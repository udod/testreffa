var KJE={lang:"EN",initFired:!1,InReport:!1,reportTest:!1,CalcDelay:0,CalcDelayVML:0,CalculatorWidthMax:850,CalculatorWidthMin:285,ShowDefinitions:!1,ShowCalculateButton:!0,ShowPrintButton:!0,IncludeDefinitions:!0,PopupDefinitions:!0,SliderWidthAdjust:0,bNativeSlider:!1,ErrorBackground:"#FF7777",IncompleteBackground:"#FFFF77",CalculatorName:"Calculator Title",bUseInputForm:!1,CommandButtons:"<div id='KJECommandButtons'><input type=button class=KJECommandButton  name=KJECalculate id=KJECalculate value='**LBL_CALCULATE**' /><input **VIEWREPORT** class=KJECommandButton  id=KJEViewReport name=KJEViewReport value='**LBL_VIEWREPORT**' /></div>",ReportButtons:"<div align=center><div id='KJEReportButtons'><input type=button class=KJECommandButton  name=KJEPrint id=KJEPrintReport value=\"**LBL_PRINTREPORT**\" /><input type=button  class=KJECommandButton  id=KJEHideReport name=KJEHideReport value='**LBL_HIDEREPORT**' /></div></div>",CommandButtonsFixed:!0,CommandButtonsTop:!0,CommandButtonOffset:20,CommandButtonHeader:0,Scroll:!0,ScrollMinimum:23,ReportHeader:"<div class='KJEReportTitleHeader'>**REPORT_TITLE**</div>",ReportStyleDefault:"<style>  BODY, TABLE, TD, TH, UL, OL, DD, DL, P, BR { font-family: arial, sans-serif; font-size: 10pt; } H1 { font-family: arial, sans-serif; font-size: 13pt; font-weight: bold; }DT { font-family: arial, sans-serif; font-size: 10pt; font-weight: bold;  }P.footer { font-family: arial, sans-serif; font-size: 9pt; } DIV.large { font-family: arial, sans-serif; font-size: 13pt; font-weight: bold; }</style>",iDecimal:2,ReportShowGraphs:!0,ReportFooter:"<div class=KJECenter><p></p>We cannot and do not guarantee their applicability or accuracy in regards to your individual circumstances. All examples are hypothetical and are for illustrative purposes.  We encourage you to seek personalized advice from qualified professionals regarding all personal finance issues.</p></div>",ReportExtraFooter:"",ReportStyleSheet:null,ReportStyleSheet2:null,KJEReportBodyClass:"class=KJEReportBody",ReportDocumentEnd:"**FOOTER** <script>setTimeout(function() {window.print(), window.close();}, 1000)<\/script></body></html>\n",CalculatorTitleTemplate:null,CalclatorTitle:null,CalculatorTitleClass:"KJETitle KJEFontHeading KJETitleExtra",CalculatorTitleErrorClass:"KJETitle KJEError",CalculatorTitleMissingClass:"KJETitle KJEMissing",CalculatorTableClass:"KJECalculatorTable",CalculatorTableReportClass:"KJECalculatorReportTable",CalcTitlePadding:20,CalcTitlePaddingMenu:10,ClearColor:"#FFFFFF",colorList:["#E8EFB2","#AEC69C","#DDDDDD","#BE4262","#FABB50","#DDCCDD","#CCCCCC","#CCCCDD","#CCDDCC","#CCDDDD","#CCCCDD"],colorRGBackground:"#FFFFFF",DefinitionsH1:"<h2 class='KJEDefinitionsHeader KJEFontHeading'>**LBL_DEFINITIONS**</h2>",LBL_DEFINITIONS:"Definitions",Colon:":",CalculatorTitleEntry:"Please enter or select a value in all fields:",CalculatorTitleCalc:"Press 'Calculate' to view your results.",ButtonCalculate:"Calculate",ButtonViewReport:"View Report",ButtonHideReport:"Hide Report",ButtonPrintReport:"Print",sCurrency:"Dollars",MSG_YEARS_LBL:"years",MSG_YEAR_LBL:"year",MSG_MONTHS_LBL:"months",MSG_MONTH_LBL:"month",MSG_AND_LBL:"and",MSG_YES:"Yes",MSG_NO:"No",YES:"yes",NO:"no",MSG_EXCEEDS_LIMIT_OF_RANGE:"KJE1 is limited to KJE2",MSG_UNDER_LIMIT_OF_RANGE:"KJE1 can't be less than KJE2",MSG_INVALID_DATE:"Please enter a valid date for KJE1",MSG_MISSING_ITEM:"Please enter a value for KJE1",MSG_GRAPH:"**GRAPH**",SplashContent:" ",SplashContentFooter:" ",Default:{RORMarket:7,RORRetire:4,RORSave:.25,RateCard:16,RatePersonal:7.5,RateFix15:4,RateFix30:4.5,RateAdj:4,RateAuto:7,RateAutoLow:1.9,MortgageAmt:2e5,HomePrice:22e4,StateTaxRate:8,InflationRate:2.9,MortgageMin:0,MortgageMax:1e8,MortgageRateMin:0,MortgageRateMax:25,MortgageTerm:30,MortgageTermMin:1,MortgageTermMax:40,MortgageTermIncrement:5,MortgageShowAll:!0,MortgageShowAllMax:25,InvestRateMin:0,InvestRateMax:20,InvestSliderRateMax:12,InflationRateMin:0,InflationRateMax:20,InflationSliderRateMax:12},InTask:!1,calcCleared:!1,CalculatorDiv:"KJECalculatorDiv",AllContent:"KJEAllContent",CalcTimeout:0,CalcTitleHeight:0,Error:!1,InComplete:!1,bValidateIncomplete:!0,Calculating:!1,gGraphs:new Array(0),gReportGraphs:new Array(0),iOldWidth:-1,bSizeInitialized:!1,ResizeTimeOut:null,iUrekau:[1709986223,1332498680,0,1505998205,380075612],InputScreenText:!1,DefinitionText:!1,ReportText:!1,MSG_ADA_TABLE:"role='presentation'",TypedArray:"undefined"!=typeof Float64Array,showInputsFirst:!1,replace:function(e,t,i){return i?i.split(e).join(t):""},getKJEReplaced:function(e){if(e||""==e)for(var t=1;t<arguments.length;t++)e=e.replace("KJE"+t,arguments[t]);else for(e="",t=0;t<arguments.length;t++)e+=arguments[t]+(t==arguments.length-1?"":", ");return e},dateFormat:function(e){var t=e.getMonth()+1;return null==e?"":t+"/"+e.getDate()+"/"+e.getFullYear()},chjilap:function(e){var t=0;if(0==e.length);else for(var i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t&=t;return t},getTermLabel:function(e,t){var i=KJE,a=Math.floor(e/12),r=e%12,s=i.MSG_AND_LBL,n=i.MSG_MONTH_LBL,o=i.MSG_MONTHS_LBL,E=i.MSG_YEAR_LBL,l=i.MSG_YEARS_LBL,_=" ";return(t||a>0?a+_+(1==a?E:l):"")+(t||a>0&&r>0?_+s+_:"")+(t||r>0?r+_+(1==r?n:o):"")},setOrientation:function(){var e=KJE;switch(window.orientation){case-90:case 90:default:e.resize(!0)}},resize:function(e){var t=KJE;t.device.iphone&&!e||(t.iOldWidth!=window.innerWidth&&t.bSizeInitialized&&(null!=t.ResizeTimeOut&&clearTimeout(t.ResizeTimeOut),t.ResizeTimeOut=setTimeout(t.calcResize,0),t.MenuResize&&t.MenuResize()),t.bSizeInitialized=!0)},InputSetup:function(e,t){for(var i=KJE,a=i.bUseInputForm&&!i.IE7and8,r="**COMMAND_BUTTONS**",s=(i.IE7and8||i.deviceMobile||i.CommandButtonsFixed)&&i.CommandButtonsTop,n=e.indexOf(r),o="<div id='KJETitle' aria-live='polite' class='"+i.CalculatorTitleClass+"'>Best Retirement Calculator â€“ Calculate Retirement Savings</div>",E="**TITLE_BAR**",l=e.indexOf(E),_=1;_<10;_++)e=i.replace("**GRAPH"+_+"**",i.replace(i.MSG_GRAPH,"<div id=KJE-C-GRAPH"+_+" style='width:100%;'><canvas id=KJE-G-GRAPH"+_+"></canvas></div>",i.VML?" "+i.MSG_GRAPH+" ":i.MSG_ADA_GRAPH),e);var h="\x3c!--KJEMAIN--\x3e<div id='KJEGuiDataPoint' style='top: 0; left: 0;'></div>";for(i.ExtraHeader&&(h+=i.ExtraHeader),a&&(h+="<form name=KJECalcForm id=KJECalcForm onsubmit='return false;'>"),h+="<div id=KJECalculatorScreenSize align=center style='position:relative; width:100%'>",h+=n<0&&s?r:"",h+="<div id='KJEWait' class=KJEWait></div>",h+="<div id='KJEMenu' class=KJEMenu></div>",h+="<div id='KJEMenuWindow'></div>",h+="<div id=KJECalculatorTable>",h+="<div id=KJECalculatorTableCell class='KJECalculator KJEEase' align=center style='width:100%'>",h+="<span id=KJESplash class=KJEBold style='color:#333333'> </span>",h+="<div id='KJEMain' class=KJEMain >",h+=l<0?o:"",h+="<div id='KJEInputs' class='KJEInputs'>"+e+"</div>",h+="</div>",h+="</div>",h+="</div>",h+=n<0&&!s?r:"",h+="</div>",a&&(h+="</form>"),h+="\x3c!--KJEMAINEND--\x3e",h+="<div id=KJEReport class=KJEReport width=100%>",h+=n>=0?"**REPORT_BUTTONS**":"",h+="<div id=KJEReportTop></div>",_=0;_<i.ReportGraphCount;_++)h+="<div align=center><div id=KJE-C-REPORTGRAPH"+_+' style="page-break-inside: avoid; margin-top:15px; height:'+i.gHeight+'px;">\x3c!--GRAPH'+_+"--\x3e<canvas id=KJE-G-REPORTGRAPH"+_+"></canvas>\x3c!--GRAPHEND--\x3e</div></div>",h+="<div id=KJEReportMiddle"+_+"></div>";return i.ExtraFooter&&(h+=i.ExtraFooter(t)),h+="</div>",i.IncludeDefinitions&&(h+=i.formatDefinitions(t)),(h=(h=h.replace("**REPORT_BUTTONS**",i.ReportButtons.replace("**LBL_HIDEREPORT**",i.ButtonHideReport).replace("**LBL_PRINTREPORT**",i.ButtonPrintReport))).replace(E,o)).replace(r,i.CommandButtons.replace("**LBL_VIEWREPORT**",i.ButtonViewReport).replace("**LBL_CALCULATE**",i.ButtonCalculate).replace("**VIEWREPORT**",a?"type=submit":"type=button"))},formatDefinitions:function(e){var t=KJE,i="\x3c!--KJEDEFINITIONS--\x3e<div width=100% align=center >";return i+="<div id=KJEDefinitions class=KJEDefinitions width=100%>"+t.DefinitionsH1.replace("**LBL_DEFINITIONS**",t.LBL_DEFINITIONS),i+="<dl>"+e+"</dl>",i+="</div>",i+="</div>\x3c!--KJEDEFINITIONSEND--\x3e"},inCommandTask:function(e){var t=KJE,i=t.Wait.style,a=(i=t.Wait.style,t.CalculatorTable.offsetTop+23+"px"),r=t.CalculatorTable.offsetLeft+10+"px";return!(!t.InTask||!e)||(i.top=a,i.right=r,i.display="none",t.displayMenu&&t.displayMenu(e),t.InTask=e,!1)},setTitle:function(e,t){var i=KJE,a=i.subheader,r=(i.kujiae,i.CalcTitle),s=i.kujaleip;i.UKuejna;i.CalcTitleWidth||(i.CalcTitleWidth=r.offsetWidth-2*i.CalcTitlePadding-(KJE.menuInit?i.CalcTitlePaddingMenu:0)),s||(KJE.TrialReplace1=1,r.innerHTML=e+a,r.className=t||i.CalculatorTitleClass),i.Calculator.style.height=i.Main.offsetHeight+"px"},setTitleTemplate:function(){var e=KJE,t="";if(e.CalculatorTitleTemplate){t=e.CalculatorTitleTemplate;for(var i=0;i<arguments.length;i++)t=t.replace("KJE"+(i+1),arguments[i]);e.CalculatorTitleShow=t}else e.CalculatorTitleShow=e.CalculatorTitle},results:function(e,t){var i=KJE;if(i.calcCleared=!1,i.IE7and8&&(i.Wait.style.display="none"),i.CalcTimeout&&clearTimeout(i.CalcTimeout),e){if(i.inCommandTask(!0))return;i.showInputs()}try{i.Error=!1,i.InComplete=!1,i.DataPointHide();var a=i.CalcControl;a.clear(),i.GuiControl.setValues(a),i.setValuesAdditional&&i.setValuesAdditional(a);var r=0,s=i.inputs.items;for(var n in s)if(!s[n].validate()){r++,i.InComplete=!0;var o=i.getKJEReplaced(i.MSG_MISSING_ITEM,s[n]._sLabel)}if(!i.InComplete){t&&a.initReport&&a.initReport(),a.calculate(!!t),KJE.calculateAdditional&&KJE.calculateAdditional(a,!!t),i.GuiControl.refresh(a),KJE.refreshAdditional&&KJE.refreshAdditional(i.GuiControl,a);for(var n in i.droppers.items)i.droppers.items[n].setText();i.setTitle(i.CalculatorTitleShow)}i.InComplete&&i.bValidateIncomplete&&i.calcClear(r>1?i.CalculatorTitleEntry:o,i.CalculatorTitleMissingClass)}catch(e){i.Error=!0;var E=e+" ";E.indexOf("NS_ERROR_FAILURE")<1&&i.calcClear(E,i.CalculatorTitleErrorClass)}i.IE7and8&&(i.Wait.style.display="none"),e&&setTimeout(function(){i.inCommandTask(!1)},0),KJE.StorageSet&&KJE.StorageSet()},calcClear:function(e,t){var i=KJE,a=i.gGraphs;e||(e=i.CalculatorTitleEntry),t||(t=null);for(var r=0;r<a.length;r++)a[r]&&a[r].blank();for(var s in i.inputs.items)i.inputs.items[s]._inputType==i.TypeLabel&&i.inputs.items[s].setText("");i.GuiControl.clear&&i.GuiControl.clear(),i.setTitle(e,t)},calcResize:function(){var e=KJE;if(e.setWidth()){var t=e.gGraphs;for(var i in e.inputs.items)e.inputs.items[i].newWidth();for(var a=0;a<t.length;a++)t[a]&&t[a].setWidth(!0)}if(e.reportViewable)for(t=e.gReportGraphs,a=0;a<t.length;a++)t[a]&&t[a].setWidth(!0,KJE.gWidthMax);e.resizeMenu&&e.resizeMenu()},dataChanged:function(e){var t=KJE;t.CalcTimeout&&clearTimeout(t.CalcTimeout),t.VML?(!t.calcCleared&&e&&(t.calcClear(t.CalculatorTitleCalc),t.calcCleared=!0),t.CalcTimeout=setTimeout(t.results,e?t.CalcDelayVML:t.CalcDelay)):t.CalcTimeout=setTimeout(t.results,t.CalcDelay)},completeFade:function(){var e=KJE;e.fade<1?(e.fade+=(e.device.iphone,100),e.Buttons.style.opacity=e.fade/100,e.Main.style.opacity=e.fade/100):(clearInterval(e.pace),KJE.reportTest&&e.showReport())},Startfade:function(){var e=KJE;e.fade<1?(e.fade+=100,e.Splash.style.opacity=0):(clearInterval(e.pace),e.Splash.style.display="none",e.fade=0,e.pace=setInterval(e.completeFade,0))},showCalculator:function(){var e=KJE;e.results(!0),e.ms=0!=e.Main.style.opacity||""==e.Main.style.opacity,e.ms?setTimeout(function(){e.Buttons.style.visibility="visible",e.Main.style.visibility="visible",e.Splash.style.display="none"},0):(e.Buttons.style.opacity=0,e.Main.style.opacity=0,e.Splash.style.opacity=1),e.fade=0,e.pace=setInterval(e.Startfade,0)},getOffset:function(e){for(var t=0,i=0;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t+=e.offsetLeft-e.scrollLeft,i+=e.offsetTop-e.scrollTop,e=e.offsetParent;return{top:i,left:t}},setWidth:function(e){var t=KJE,i=t.ScreenSize.clientWidth;return i-=i<=400?0:5,i=(i=t.CalculatorWidthMax<i?t.CalculatorWidthMax:i)<t.CalculatorWidthMin?t.CalculatorWidthMin:i,t.oldClientWidth!=i&&(t.oldClientWidth=i,t.CalculatorTable.style.width=i+"px",t.Calculator.style.height=t.Main.offsetHeight+"px",t.DataPoint.style.maxWidth=i-37+"px",t.CalculatorWidth=i-10,e&&(t.Splash.style.width=i,t.oldClientWidth=0),!0)},FloatArray:function(e){if(KJE.TypedArray)return new Float64Array(e);for(var t=new Array(e),i=0;i<e;i++)t[i]=0;return t},IntArray:function(e){return KJE.TypedArray?new Int16Array(e):new Array(e)},init:function(){var e=KJE;if(!e.initFired){e.InputClass="KJEInput"+(KJE.InputModern?" KJEInputModern":""),e.initFired=!0;var t=navigator.userAgent;e.device={iphone:t.match(/(iPhone|iPod|iPad)/),android:t.match(/Android/)},e.deviceUseNumberType=e.deviceMobile=t.match(/(iPhone|iPod|iPad|Silk|Android)/),e.deviceInputPad=e.deviceUseNumberType?KJE.parameters.get("DEVICE_INPUT_PAD",10):0,e.deviceNoTransition=t.match(/(iPhone|iPod|iPad|BlackBerry|Silk|Android)/),e.bUseStorage=!1,e.bStorageInit;for(var i=e.ReportStyleSheet,a=e.ReportStyleSheet2,r="KJE.css",s="KJESiteSpecific.css",n=document.getElementsByTagName("link"),o=0;o<n.length;++o){var E=n[o].href;E.indexOf(r)>=0&&null==i&&(i=E,e.hRefPath=E.substring(0,E.lastIndexOf("/")+1)),E.indexOf(s)>=0&&null==a&&(a=E)}null==i&&(i=r),null==a&&(a=s),e.ReportStyleSheet=i,e.ReportStyleSheet2=a;var l=e.iUrekau,_=l.length,h=location.hostname,T=e.kujiae=h.replace(/^www\./i,""),p=e.parameters,u=document;e.chjilap(T);e.kujaleip=!0;for(var d=_-1;d>=0;d--)l[d];KJE.TrialReplace1=2,e.CalculatorTitleShow=e.CalculatorTitle=p.get("TITLE_TEMPLATE",e.CalculatorTitle?e.CalculatorTitle:document.title),e.AllContent=u.getElementById(e.AllContent);u.getElementById("KJEReportText");var c=e.definitions.items,R=e.DefinitionText;for(var S in c)R=e.replace(S,c[S],R);e.parseDefinitions&&(R=e.parseDefinitions(R)),e.DefinitionText=R;var I=e.ReportText;if(e.ReportProcess&&(I=e.ReportProcess(I)),e.ReportGraphCount=0,e.ReportShowGraphs){if(I){I=e.replace("KJE_CURRENTDATE",e.dateFormat(new Date),I);for(var A=0;(A=I.indexOf(e.MSG_GRAPH,A))>=0;)e.ReportGraphCount++,A+=e.MSG_GRAPH.length}}else I=e.replace(e.MSG_GRAPH,"",I);e.ReportText=I,e.parseInputs&&(e.InputScreenText=e.parseInputs(e.InputScreenText)),e.AllContent.innerHTML=e.InputSetup(e.InputScreenText,R),e.Splash=u.getElementById("KJESplash"),e.inputsViewable=!0,e.Wait=u.getElementById("KJEWait"),e.Report=u.getElementById("KJEReport"),e.ReportTop=u.getElementById("KJEReportTop");var g=e.ReportMiddle=new Array;for(d=0;d<e.ReportGraphCount;d++)g[d]=u.getElementById("KJEReportMiddle"+d);var K=e.Buttons=u.getElementById("KJECommandButtons"),J=e.Calculate=u.getElementById("KJECalculate"),N=e.PrintReport=u.getElementById("KJEPrintReport"),C=e.ViewReport=u.getElementById("KJEViewReport"),f=e.HideReport=u.getElementById("KJEHideReport"),L=e.Inputs=u.getElementById("KJEInputs"),O=e.DataPoint=u.getElementById("KJEGuiDataPoint"),m=e.Calculator=u.getElementById("KJECalculatorTableCell");e.ScreenSize=u.getElementById("KJECalculatorScreenSize");var D=e.CalcTitle=u.getElementById("KJETitle");D.style.padding=e.CalcTitlePadding+"px",KJE.menuInit&&(D.style.paddingRight=e.CalcTitlePadding+e.CalcTitlePaddingMenu+"px");var y=e.Main=u.getElementById("KJEMain"),M=e.Definitions=u.getElementById("KJEDefinitions");if(M&&M.lastChild){var v=M.lastChild.childNodes,b=v.length;for(d=0;d<b;d++){var P=v[d];if(P.id&&"KJE-D-"==P.id.substr(0,6)){var G,x=P.id.substr(6).trim();if("REMOVE"==(G=p.get("DFN_"+x,null)))P.innerHTML="",P.style.visibility="hidden",P.style.display="none",P.id=null;else G&&P.lastChild&&(P.lastChild.innerHTML=G),(G=p.get("DFN_NAME_"+x,p.get("MSG_"+x,null)))&&P.firstChild&&(P.firstChild.innerHTML=G)}}}if(L.style.display="block",e.CalculatorTable=u.getElementById("KJECalculatorTable"),e.menuInit&&e.menuInit(),O.addEventListener){var F="click";J.addEventListener(F,e.calculateButtonAction,!1),C.addEventListener(F,e.showReport,!1),O.addEventListener(F,e.DataPointHide,!1),N&&N.addEventListener(F,e.printTheReport,!1),f&&f.addEventListener(F,e.showReport,!1)}else{F="onclick";J.attachEvent(F,e.calculateButtonAction),C.attachEvent(F,e.showReport),e.DataPointHide&&O.attachEvent(F,e.DataPointHide),N&&N.attachEvent(F,e.printTheReport),f&&f.attachEvent(F,e.showReport)}m.style.height=m.offsetHeight+"px",e.IE7and8?(K.style.visibility="hidden",y.style.visibility="hidden",e.Splash.style.visibility="visible"):(K.style.opacity=0,y.style.opacity=0,e.Splash.style.opacity=1),e.IE7and8||e.CommandButtonsFixed?(K.style.position="relative",K.style.top=e.CommandButtonOffset+"px"):(K.style.position="absolute",K.style.top=m.offsetTop-e.CommandButtonOffset+"px"),window.addEventListener&&(window.addEventListener("scroll",e.scrolled,!1),window.addEventListener("resize",e.resize,!1),window.addEventListener("orientationchange",e.setOrientation,!1)),e.oldClientWidth=0,e.setWidth(!0),e.CalculatorTitleTemplate=p.get("TITLE_TEMPLATE",e.CalculatorTitleTemplate);var H=e.HeaderTitle=p.get("CALC_HEADER_TITLE",""),w=e.HeaderDesc=p.get("CALC_HEADER_DESC","");e.initialize();var U=u.getElementById("KJEHeaderContent");if(U){var B=p.get("CALC_HEADER_DIV","<div id=KJECalculatorTitle><h1>CALC_HEADER_TITLE</h1></div><div id=KJECalculatorDescription>CALC_HEADER_DESC</div>");U.innerHTML=B.replace("CALC_HEADER_TITLE",H).replace("CALC_HEADER_DESC",w)}e.customInit&&e.customInit(this),e.showTimer()}},showTimer:function(){setTimeout(KJE.showCalculator,0)},scrolled:function(){var e=KJE;e.CommandButtonsFixed||(null!=e.ScrollTimeOut&&clearTimeout(e.ScrollTimeOut),e.ScrollTimeOut=setTimeout(e.buttonPosition,200))},buttonPosition:function(){var e=KJE,t=e.util.findPosRelativeToViewport(e.Calculator)[1],i=e.Calculator.offsetTop,a=e.AllContent.offsetHeight,r=e.CommandButtonHeader,s=i-e.CommandButtonOffset+"px";t+i+a<0?s=i+a+"px":t-r<0&&(s=i-t+5+r+"px"),e.Buttons.style.top=s},goScroll:function(){var e=KJE;if(e.Scroll){var t=e.util.findPos(e.Calculator);window.scrollTo(t[0],t[1]-e.ScrollMinimum)}},showInputs:function(){var e=KJE;e.CalcControl.initInputs&&e.CalcControl.initInputs();var t=e.Report.style.display="none";e.CalculatorTable.className=e.CalculatorTableClass,e.Calculate.value=e.ButtonCalculate,e.ViewReport.value=e.ButtonViewReport,e.Calculate.style.display=e.ShowCalculateButton?"inline-block":t;var i=e.Definitions;i&&(i.style.display=e.ShowDefinitions?"block":t),e.Main.style.display="block",e.Calculator.style.height=e.Main.offsetHeight+"px",e.reportViewable=!1,e.showInputsFirst?e.goScroll():e.showInputsFirst=!0,e.calcResize()},calculateButtonAction:function(){var e=KJE;KJE.MenuWindowHide&&KJE.MenuWindowHide(),e.goScroll(),e.reportViewable?e.printTheReport():e.Error||e.InComplete||(e.CalcTimeout=setTimeout(e.results,10))},printOpenReport:function(e){var t=KJE,i=document.getElementById("KJEAllContent"),a=t.replace,r=t.gReportGraphs,s=i.innerHTML,n=t.ReportDocumentStart+s+t.ReportDocumentEnd,o=n.indexOf("\x3c!--KJEDEFINITIONS--\x3e"),E=n.indexOf("\x3c!--KJEDEFINITIONSEND--\x3e",o);o=(n=n.substring(0,o)+n.substring(E)).indexOf("\x3c!--KJEMAIN--\x3e"),E=n.indexOf("\x3c!--KJEMAINEND--\x3e",o),n=a("\x3c!--KJEMAINEND--\x3e","",n=a("\x3c!--REPORT_DEFINED_END--\x3e","",n=a("\x3c!--KJEDEFINITIONSEND--\x3e","",n=n.substring(0,o)+n.substring(E)))),n=a("**REPORT_STYLE_SHEET**",t.ReportStyleSheet,n),n=a("**REPORT_STYLE_SHEET2**",t.ReportStyleSheet2,n),n=a("**REPORT_DEFAULT_STYLE**",t.ReportStyleDefault,n),t.ReportHeader=t.replace("","",t.ReportHeader),n=a("**HEADER**",t.ReportHeader,a("**REPORT_TITLE**",document.title,n)),n=a("**FOOTER**",a("\x3c!--EXTRA_FOOTER--\x3e",t.ReportExtraFooter,t.ReportFooter),n),n=a("**REPORT_TITLE**",t.CalcName?t.CalcName:t.CalculatorTitleShow,n),n=a("Calculator Calculator","Calculator",n=a("**TITLE**",t.CalcName?t.CalcName:"Financial Calculator",n));for(var l="\x3c!--GRAPHEND--\x3e",_=0;_<t.ReportGraphCount;_++){var h="";if(t.reportViewable)for(var T=t.gReportGraphs,p=0;p<T.length;p++)T[p]&&T[p].setWidth(!0,KJE.gWidthReport);t.VML||(h='<img src="'+r[_].wCanvas.toDataURL()+'" height='+r[_].wCanvas.offsetHeight+" width="+r[_].wCanvas.offsetWidth+">");var u="<div class='KJEGraphTitle'>"+a('"',"&quote",r[_]._titleGraph.s)+"</div>";o=n.indexOf("\x3c!--GRAPH"+_+"--\x3e"),E=n.indexOf(l,o),n=n.substring(0,o)+u+h+n.substring(E+l.length)}e.document.write(n),e.document.close(),e.focus()},printTheReport:function(){var e=KJE;if(e.IE7and8||e.VML)window.print();else{var t=0;screen&&(t=screen.width/2-480);var i=window.open("","_blank","toolbar=yes,menubar=yes,location=no,directories=no,status=no,scrollbars=yes,resizable=yes,copyhistory=no,width=960,height="+(screen.height-170)+",left="+t+",top=5");navigator.userAgent.toLowerCase().indexOf("chrome")>-1?setTimeout(function(){e.printOpenReport(i)},100):e.printOpenReport(i)}},showReport:function(){var e=KJE;e.InTask=!1,e.Error||e.InComplete||e.inCommandTask(!0)||setTimeout(e.showReportFinal,200)},showReportFinal:function(){var e=KJE;if(e.DataPointHide(),KJE.MenuWindowHide&&KJE.MenuWindowHide(),e.reportViewable)e.showInputs(),setTimeout(function(){e.inCommandTask(!1)},400);else{if(e.CalculatorTable.className=e.CalculatorTableReportClass,e.results(!1,!0),e.Error||e.InComplete)return void e.inCommandTask(!1);e.reportViewable=!0,e.Calculate.value=e.ButtonPrintReport,e.Calculate.style.display=e.ShowPrintButton?"inline-block":"none",e.Calculator.style.height="0px",e.Main.style.display="none",e.Definitions&&(e.Definitions.style.display="none"),e.Report.style.display="block",e.ViewReport.value=e.ButtonHideReport,e.reportPreprocess?e.sReport=e.reportPreprocess(e.CalcControl,e.ReportText):e.sReport=e.ReportText,e.sReport=e.CalcControl.formatReport(e.sReport),setTimeout(e.fireReport,50)}},fireReport:function(){var e=KJE,t=e.sReport.split(e.MSG_GRAPH);e.sReport="",t[0]&&(e.ReportTop.innerHTML=t[0]);for(var i=0;i<e.ReportGraphCount;i++)t[i+1]&&(e.ReportMiddle[i].innerHTML=t[i+1]);if(e.gReportGraphs.length!=t.length-1)for(var a=0;a<e.ReportGraphCount;a++){var r=e.gNewGraph(e.gGraphs[a]._gtGraphType._iGraphType,"REPORTGRAPH"+a,!0,!1,!1,e.sgv(e.gGraphs[a]._titleGraph.getProperty(),""),!0);r&&(e.gReportGraphs[a]=r)}var s=null;for(a=0;a<e.gReportGraphs.length;a++)(s=e.gReportGraphs[a]).setProperty(e.gGraphs[a].getProperty()),s._legend.setProperty(e.gGraphs[a]._legend.getProperty()),s._grid.setProperty(e.gGraphs[a]._grid.getProperty()),s._axisY.setProperty(e.gGraphs[a]._axisY.getProperty()),s._axisX.setProperty(e.gGraphs[a]._axisX.getProperty()),s.setTitle(e.sgv(e.gGraphs[a]._titleGraph.getProperty(),"")),s._titleXAxis.setProperty(e.gGraphs[a]._titleXAxis.getProperty()),s._titleYAxis.setProperty(e.gGraphs[a]._titleYAxis.getProperty()),s.add(e.gGraphs[a].getDataProperties()),s.setBackground(e.parameters.get("PAGEBACKGROUND_COLOR",e.colorRGBackground)),s.setWidth(!0);var n=e.CalcControl;n.formatGraph&&n.formatGraph(n,e.gReportGraphs),n.reportComplete&&n.reportComplete(e.GuiControl),e.reportComplete&&e.reportComplete(e.CalcControl,e.ReportText),e.ViewReport.focus(),e.goScroll(),setTimeout(function(){e.inCommandTask(!1)},400)}};KJE.util={findPos:function(e){var t=curtop=0;if(e.offsetParent)do{t+=e.offsetLeft,curtop+=e.offsetTop}while(e=e.offsetParent);return[t,curtop]},getPageScroll:function(){var e,t;return self.pageYOffset?(t=self.pageYOffset,e=self.pageXOffset):document.documentElement&&document.documentElement.scrollTop?(t=document.documentElement.scrollTop,e=document.documentElement.scrollLeft):document.body&&(t=document.body.scrollTop,e=document.body.scrollLeft),[e,t]},findPosRelativeToViewport:function(e){var t=this.findPos(e),i=this.getPageScroll();return[t[0]-i[0],t[1]-i[1]]}},KJE.InputModern=!navigator.userAgent.match(/(iPhone|iPod)/),KJE.IE=!!(window.ActiveXObject||"ActiveXObject"in window),KJE.IE7=-1!=navigator.appVersion.indexOf("MSIE 7."),KJE.IE8=-1!=navigator.appVersion.indexOf("MSIE 8."),KJE.IE7and8=(KJE.IE7||KJE.IE8)&&!window.addEventListener,KJE.IE7and8||(KJE.IE7=!1),KJE.VML=KJE.IE7and8||"undefined"!=typeof G_vmlCanvasManager,KJE.List=function(){this.length=0,this.items={},this.bLock={}},KJE.List.prototype.getSet=function(e,t){return this.exists(e)?this.items[e]:this.set(e,t)},KJE.List.prototype.get=function(e,t){return void 0===this.items[e]?t:this.items[e]},KJE.List.prototype.exists=function(e){return!(void 0===this.items[e])},KJE.List.prototype.locked=function(e){return!(void 0===this.bLock[e])},KJE.List.prototype.set=function(e,t,i){if(void 0!==t){if(void 0===this.items[e]&&this.length++,this.locked(e))return this.items[e];i&&(this.bLock[e]=!0),this.items[e]=t}return t},KJE.CalculatorWidth=KJE.CalculatorWidthMax,KJE.ReportDocumentStart='<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head><title>**REPORT_TITLE**</title><meta name="viewport" content="height=device-height,width=device-width,initial-scale=1">**REPORT_DEFAULT_STYLE**<link type="text/css" rel="StyleSheet" href="**REPORT_STYLE_SHEET**" /><link type="text/css" rel="StyleSheet" href="**REPORT_STYLE_SHEET2**" /></head><body '+KJE.KJEReportBodyClass+">**HEADER**",KJE.MSG_ADA_GRAPH="<figure zindex='1' style='margin:0; padding:0;'><figcaption class=KJEAccessible>Please view the report to see detailed results in tabular form.</figcaption>"+KJE.MSG_GRAPH+"</figure>",KJE.parameters=new KJE.List,KJE.inputs=new KJE.List,KJE.droppers=new KJE.List,KJE.definitions=new KJE.List,KJE.definitions.set("**INFLATION_DEFINITION**","This is what you expect the average rate of inflation to be in the long-term. In New Zealand, Stats NZ publishes the Consumer Price Index (CPI). Using a calculator from the Reserve Bank, between 1990 and 2018 the CPI had a long-term compounded average of 2.1% annually. However inflation varies each year. For example in In 2008 and 2011, the Reserve Bankâ€™s data shows that inflation was around 5% per year."),KJE.definitions.set("**ROR_DEFINITION**",""),KJE.definitions.set("**ROR_SHORT_DEFINITION**","It is important to remember that these scenarios are hypothetical and that future interest rates can't be predicted with certainty."),KJE.UKuejna="",KJE.subheader="",KJE.iStorageTime=0,KJE.STORAGE_NONE=0,KJE.STORAGE_AUTO=1,KJE.bStorageNonsupportWarning=!1,KJE.bStorageOK=function(){if("undefined"!=typeof Storage&&"undefined"!=typeof localStorage){try{localStorage.setItem("localStorage",1),localStorage.removeItem("localStorage")}catch(e){return KJE.bUseStorage=KJE.STORAGE_NONE,KJE.bStorageNonsupportWarning&&!KJE.deviceMobile&&alert('Your web browser does not support storing settings locally. The most common cause of this is using "Private Browsing Mode". The Auto Save functions will be disabled, all other aspects of the calculator will work correctly.'),!1}return!0}return!1},KJE.bStorageInit=function(){if(KJE.oStorageItems=null,KJE.bUseStorage=KJE.parameters.get("LOCAL_STORAGE",KJE.STORAGE_AUTO),KJE.sStorageKey=void 0!==KJE.CalcType?KJE.CalcType:"TEMP",KJE.bStorageOK()){try{var e=localStorage.getItem(KJE.sStorageKey);KJE.LZString&&(e=KJE.LZString.decompressFromEncodedURIComponent(e)),KJE.oStorageItems=JSON.parse(e)}catch(e){KJE.oStorageItems={}}null==KJE.oStorageItems&&(KJE.oStorageItems={}),localStorage.setItem(KJE.sStorageKey+"_href",KJE.formatHref()),localStorage.setItem(KJE.sStorageKey+"_title",document.title)}else KJE.bUseStorage=KJE.STORAGE_NONE;if(KJE.getURLValueParam){var t=KJE.getURLValueParam();t&&(KJE.oStorageItems=t)}return KJE.bUseStorage},KJE.StorageSet=function(){KJE.bUseStorage&&(KJE.bStorageTimeout&&clearTimeout(KJE.bStorageTimeout),KJE.bStorageTimeout=setTimeout(KJE.bStorageSet,KJE.iStorageTime))},KJE.getJSONFromInputs=function(){var e=KJE.inputs.items,t={};for(var i in e)e.hasOwnProperty(i)&&(e[i]._inputType!=KJE.TypeLabel&&e[i]._inputType!=KJE.TypeNone&&(t[i]=e[i]._value),e[i]._inputTypeAdditional==KJE.TypeDropBox&&(t[e[i]._Additional.name]=e[i]._Additional.value));return JSON.stringify(t)},KJE.bStorageSet=function(e,t){var i=KJE.getJSONFromInputs();return KJE.LZString&&(i=KJE.LZString.compressToEncodedURIComponent(i)),KJE.bUseStorage&&(localStorage.setItem(KJE.sStorageKey+(e?"#"+e:""),i),t&&localStorage.setItem(KJE.sStorageKey+"#"+e+"_name",t)),i},KJE.bStoragePopulate=function(e){var t=KJE.inputs.items;for(var i in t){var a=!1;e.hasOwnProperty(i)?a=e[i]:t.hasOwnProperty(i)&&(a=t[i].vDefault);var r=null;t[i]._inputTypeAdditional!=KJE.TypeNone&&(r=e.hasOwnProperty(t[i]._Additional.name)?e[t[i]._Additional.name]:t[i].vDefault2),KJE.InputItem.InputSetValues(t[i],a,r,!1)}KJE.results(!0)},KJE.StorageGet=function(e,t){var i=KJE.parameters.get(e,t);if(KJE.oStorageItems&&KJE.bUseStorage){var a=KJE.oStorageItems[e];null!=a&&(i=a)}return i},KJE.bHrefTrimURL=!0,KJE.formatHref=function(){var e=document.location.href;if(KJE.bHrefTrimURL){var t=e.indexOf("?");t>0&&(e=e.substr(0,t))}return e},document.addEventListener&&document.addEventListener("DOMContentLoaded",KJE.init,!1),KJE.bHT=!1,KJE.ROR_MONTH=function(e){return Math.pow(1+e,1/12)-1},KJE.ROR_PERIOD=function(e,t){return Math.pow(1+e,1/t)-1},KJE.APY_MONTH=function(e){return KJE.FV_AMT(e,12,1)-1},KJE.NPV_AMT=function(e,t,i){return-1==e?0:i/Math.pow(1+e,t)},KJE.FV_AMT=function(e,t,i){return 0==e?i:i/Math.pow(1+e,-1*t)},KJE.FV_BEGIN=function(e,t,i){return 0==e?t*i:i/e*(Math.pow(1+e,t+1)-1)-i},KJE.FV=function(e,t,i){return 0==e?t*i:i/e*(Math.pow(1+e,t)-1)},KJE.PV=function(e,t,i){return KJE.NPV_AMT(e,t,KJE.FV(e,t,i))},KJE.PV_BEGIN=function(e,t,i){return KJE.NPV_AMT(e,t,KJE.FV_BEGIN(e,t,i))},KJE.RATE=function(e,t,i){for(var a=0,r=1,s=t,n=KJE.PMT,o=1;o<50;o++){if((s=n(a,e,i))==t)return a;s<t?a+=r:a-=r,r/=2}return a},KJE.PERIODS=function(e,t,i){if(0==e&&0!=t)return i/t;for(var a=3120,r=1560,s=t,n=KJE.PMT,o=1;o<50;o++){if((s=n(e,a,i))==t)return a;s<t?a-=r:a+=r,r/=2}return a},KJE.PERIODS_FV=function(e,t,i){for(var a=720,r=360,s=t,n=KJE.PMT,o=KJE.NPV_AMT,E=1;E<50;E++){if((s=n(e,a,o(e,a,i)))==t)return a;s<t?a-=r:a+=r,r/=2}return a},KJE.APR=function(e,t,i,a,r){var s=KJE.PMT(i,e,a+r);return KJE.RATE(e,s,a)},KJE.PMT=function(e,t,i){return t<=0?i:t<=1?i*(1+e):0==e?i/t:i*e/(1-Math.pow(1+e,-1*t))},KJE.PMT_BEGIN=function(e,t,i){var a=KJE.PMT;if(t<=1)return i;for(var r=a(e,t,i),s=r/2,n=0,o=1;o<50;o++){if((n=a(e,t-1,i-r))==r)return r;n<r?r-=s:r+=s,s/=2}return r},KJE.ScheduleTableTitle="Periodic Schedule",KJE._sTableHeader="<div class='KJEScheduleDiv'><table class='KJEScheduleTable KJEReportTableShrink' summary='**TITLE_TAG**'>",KJE._sTableHeaderSmall="<table class='KJEScheduleTable KJEReportTableShrink' summary='**TITLE_TAG**'>",KJE._sTableFooter="</table></div>",KJE._sTableFooterSmall="</table>",KJE._sTopRow="<tr class='KJEScheduleHeaderRow' >",KJE._sEvenRow="<tr class='KJEScheduleEvenRow' >",KJE._sOddRow="<tr class='KJEScheduleOddRow' >",KJE._sRowFooter="</tr>",KJE._sHeading="<th class='KJEScheduleHeading' >",KJE._sHeadingUnderline="<th class='KJEScheduleHeadingUnderline' >",KJE._sHeadingFooter="</th>",KJE._sCell="<td class='KJEViewReportKJEScheduleCell' >",KJE._sCellStrong="<td class='KJEScheduleCellStrong' >",KJE._sCellSpecial="<td class='KJEScheduleCellSpecial' >",KJE._sCellFooter="</td>",KJE._sCellBorderClass="KJECellBorder",KJE.Repeating=function(e){e=e||"MSG_REPORT_COL",this.sRepeating="",this.nRepeatingCount=0,this.sReportCols=new Array(15),this.bReportRequired=new Array(15);for(var t=0;t<15;t++)this.sReportCols[t]=KJE.parameters.get(e+(t+1),""),this.bReportRequired[t]=KJE.parameters.get("MSG_REPORT_REQ"+(t+1),!0)},KJE.Repeating.prototype.sReportCol=function(e,t){return t<1||t>this.sReportCols.length?e:this.sReportCols[t-1]&&""!=this.sReportCols[t-1]?this.sReportCols[t-1]:e},KJE.Repeating.prototype.getRepeat=function(e){var t=KJE,i=t._sTableHeader,a=t._sTableFooter;return t.CalculatorWidth<640&&(i=t._sTableHeaderSmall,a=t._sTableFooterSmall),i.replace("**TITLE_TAG**",e?e.replace("'","&#39;"):t.parameters.get("MSG_REPEAT_TITLE",t.ScheduleTableTitle))+this.sRepeating+a},KJE.Repeating.prototype.clearRepeat=function(){this.sRepeating="",this.nRepeatingCount=0},KJE.Repeating.prototype.add=function(e,t,i,a,r,s,n,o){var E="";if(0==arguments.length)return E;for(var l=this.bReportRequired,_="",h="",T=s.length;T>1&&null==s[T-1];T--);var p=0;n=!!n;for(var u=0;u<T;u++)null!=s[u]&&""!=s[u]&&l[u]&&(s[u].sContent?(h=s[u].sContent,_=s[u].sCell?s[u].sCell:e,s[u].sFormat&&(_=_.replace(">"," "+s[u].sFormat+">")),n=!1):(_=e,n&&(_=_.replace("' >","' scope='col' >")),h=s[u]),u<T-1&&(_=_.replace("class='","class='"+r+" ")),p++,E+=_+h+t);p>0&&n&&(E=KJE.replace("' >","' width="+KJE.number(Math.floor(100/p),0)+"% >",E)),this.sRepeating+=i+(o?E:E.replace("<td","<td scope='row' "))+a},KJE.Repeating.prototype.addHeader=function(){var e=KJE;this.add(e._sHeading,e._sHeadingFooter,e._sTopRow,e._sRowFooter,e._sCellBorderClass,arguments,!0,!0)},KJE.Repeating.prototype.addFooter=function(){var e=KJE;this.add(e._sCellStrong,e._sCellFooter,e._sTopRow,e._sRowFooter,e._sCellBorderClass,arguments,!0,!0)},KJE.Repeating.prototype.addRepeat=function(){var e=KJE;this.add(e._sCell,e._sCellFooter,this.nRepeatingCount%2==0?e._sOddRow:e._sEvenRow,e._sRowFooter,e._sCellBorderClass,arguments,!1,!1),this.nRepeatingCount++},KJE.getScreenCoord=function(e,t,i){var a=0,r=0;do{a+=i.offsetLeft,r+=i.offsetTop}while(i=i.offsetParent);return{x:a+e,y:r+t}},KJE.getMouseCoord=function(e,t,i){var a=0,r=0;do{a+=t.offsetLeft,r+=t.offsetTop}while(t=t.offsetParent);var s=0,n=0,o=e.pageX;if(null==o){var E=document.documentElement,l=E&&null!=E.scrollLeft?E:document.body;s=e.clientX+l.scrollLeft,n=e.clientY+l.scrollTop}else if(i){var _=e.touches[0];s=_.pageX,n=_.pageY}else s=o,n=e.pageY;return{x:s-a,y:n-r}},KJE.sIncomplete="?",KJE.DropperColors=!1,KJE.iDropperCount=0,KJE.sToggleTitle="<table **EXPANDED** class='KJEToggleTable' "+KJE.MSG_ADA_TABLE+"><tr><td width=99% class=**TITLE_CLASS** valign='top'>**TITLE_TEXT**<span class='KJEAccessibleInLine' aria-live='true'><br>**IMG_TEXT**</span></td><td class='KJEToggleIcon **IMG**' aria-hidden='true'>**ICON**</td></tr></table>",KJE.sToggleTitle1="<table **EXPANDED** class='KJEToggleTable' style='margin-left: 8px; margin-bottom: 8px;' "+KJE.MSG_ADA_TABLE+"><tr><td width=100% class=**TITLE_CLASS** valign='top'>**TITLE_TEXT**<span class='KJEAccessibleInLine' aria-live='true'><br>**IMG_TEXT**</span></td></tr></table>",KJE.sToggleTitle2="<table **EXPANDED** class='KJEToggleTable' "+KJE.MSG_ADA_TABLE+"><tr><td width=49% class=**TITLE_CLASS** valign='top'>**TITLE_TEXT**<span class='KJEAccessibleInLine' aria-live='true'><br>**IMG_TEXT**</span></td><td width=49% class=**TITLE_CLASS**  valign='top'>**TITLE_TEXT2**</td><td class='KJEToggleIcon **IMG**' aria-hidden='true'>**ICON**</td></tr></table>",KJE.MSG_DEFINE_PREFIX="Define: ",KJE.MSG_DEFINE_HELPICON="?",KJE.MSG_DEFN_CLOSE_LABEL="Close definition",KJE.sToggleAltTextClose="Press spacebar to show inputs",KJE.sToggleAltTextOpen="Press spacebar to hide inputs",KJE.sToggleTitleClass="KJEToggleTitle",KJE.sInputDescTextClass="KJESubTitle",KJE.sInputDescAlignDefault="KJERight",KJE.sToggleIcon="KJEInputIcon",KJE.sToggleOpen="[+]",KJE.sToggleClose="[-]",KJE.sExpand="aria-expanded",KJE.sExpanded="",KJE.sCollapse="",KJE.FMT_NUMBER=0,KJE.FMT_DOLLARS=1,KJE.FMT_PERCENT=2,KJE.FMT_INPUT=3,KJE.FMT_YESNO=4,KJE.FMT_STRING=5,KJE.sCP="$",KJE.sCS="",KJE.sPP="",KJE.sPS="%",KJE.sNP="",KJE.sNS="",KJE.sPC=",",KJE.sPD=".",KJE.sCC=",",KJE.sCD=".",KJE.bEuropeDecimals=!1,KJE.ACCOUNTING_NEGATIVE=!1,KJE.format=new Array,KJE.iDPRowHeight=30,KJE.iDPItemHeight=28,KJE.iDPDropHeight=KJE.iDPItemHeight,KJE.iDPInputHeight=22,KJE.iDPInputTop=2,KJE.iDPInputPad=5,KJE.iDPSliderPad=0,KJE.iDPDropBoxPad=4,KJE.iDPDropBoxModernPad=20,KJE.iDPDroppeeForceSize=!1,KJE.DataPointX=0,KJE.DataPointY=0,KJE.bNoLabel=!1,KJE.bPlusMinus=!1,KJE.subText=function(e,t,i){return t=KJE.sInputDescTextClass+" "+(t||KJE.sInputDescAlignDefault),"<"+(i=i||"div")+" class='"+t+"'>"+e+"</"+i+">"},KJE.nbr=function(e,t,i,a,r,s,n){var o=KJE;e||(e=0),s=s||!1,r=r||!1,i=i||"",a=a||"",(t=t||0)>10&&(t=10);var E=o.round(e,t),l=E<0;l&&(E*=-1);var _=(E+"").split("."),h="";t>0&&(_[1]?h=_[1].length==t?_[1]:_[1]+(r?"":"0000000000".substr(0,t-_[1].length)):r||(h="0000000000".substr(0,t)),h.length>0&&(h=o.sPD+h));var T="";if(!s&&E>999){var p=_[0].length;p%3>0&&(T=_[0].substr(0,p%3)+o.sPC);for(var u=p%3;u<p;u+=3)T+=_[0].substr(u,3)+(u+3<p?o.sPC:"")}else T=_[0];return""==T&&(T="0"),n&&n>T.length&&(T=(T="0000000000"+T).substring(T.length-n)),(l?o.ACCOUNTING_NEGATIVE?"(":"-":"")+i+T+h+a+(o.ACCOUNTING_NEGATIVE&&l?")":"")},KJE.format[KJE.FMT_NUMBER]=function(e,t){return KJE.nbr(e,t,"","",!0,!1)},KJE.number=KJE.format[KJE.FMT_NUMBER],KJE.format[KJE.FMT_DOLLARS]=function(e,t){return KJE.nbr(e,t,KJE.sCP,KJE.sCS,!1,!1)},KJE.dollars=KJE.format[KJE.FMT_DOLLARS],KJE.format[KJE.FMT_PERCENT]=function(e,t){return KJE.nbr(100*e,t,KJE.sPP,KJE.sPS,!0,!1)},KJE.percent=KJE.format[KJE.FMT_PERCENT],KJE.format[KJE.FMT_INPUT]=function(e,t,i){return KJE.nbr(e,t,"","",!0,!0,i)},KJE.input=KJE.format[KJE.FMT_INPUT],KJE.format[KJE.FMT_YESNO]=function(e){return e?KJE.YES:KJE.NO},KJE.yesno=KJE.format[KJE.FMT_YESNO],KJE.round=function(e,t){return t?Math.round(e*Math.pow(10,t))/Math.pow(10,t):Math.round(e)},KJE.setLabelWrap=function(e,t,i,a,r,s){i?a="**MESSAGE**":a||(a="<label "+(s?'class="'+s.trim()+'"':"")+' for="'+t+'">**MESSAGE**</label>'),e._sLabel=a,r&&KJE.setLabelText(e,r)},KJE.setLabelText=function(e,t){e.innerHTML=e._sLabel.replace("**MESSAGE**",t)},KJE.SliderKnobExtraClass=!1,KJE.SliderKnobSize=12,KJE.SliderKnobVertAdj=-3,KJE.SliderLabelVertAdj=0,KJE.LabelLength=190,KJE.InputLength=80,KJE.RightPad=10,KJE.LabelLeftMargin=0,KJE.InputTotalLength=KJE.LabelLeftMargin+KJE.LabelLength+KJE.InputLength+KJE.RightPad,KJE.SliderMinLength=130,KJE.TypeNone=0,KJE.TypeNumber=1,KJE.TypeString=2,KJE.TypeDate=3,KJE.TypeRadio=4,KJE.TypeCheckbox=5,KJE.TypeDropBox=6,KJE.TypeLabel=7,KJE.SliderScale=new Object,KJE.s_scale=new Array(10),KJE.s_scale[0]=[0,1e3,5e3,1e4,10,50,100],KJE.s_scale[1]=[0,1e3,5e3,2e4,10,50,200],KJE.s_scale[2]=[0,1e3,1e4,1e5,50,100,1e3],KJE.s_scale[3]=[0,1e4,1e5,5e5,250,1e3,5e3],KJE.s_scale[4]=[0,1e5,5e5,1e6,250,1e3,1e4],KJE.s_scale[5]=[0,1e5,5e5,1e6,500,1e4,1e5],KJE.s_scale[6]=[0,500,2500,5e3,10,50,100],KJE.s_scale[7]=[0,100,500,1e3,5,25,50],KJE.s_scale[8]=[0,24,48,72,6,6,6],KJE.s_scale[9]=[0,100,200,300,10,10,10],KJE.s_label=new Array(10),KJE.k="k",KJE.m="m",KJE.s_label[0]=["$0","$1k","$5k","$10k"],KJE.s_label[1]=["$0","$1k","$5k","$20k"],KJE.s_label[2]=["$0","$1k","$10k","$100k"],KJE.s_label[3]=["$0","$10k","$100k","$500k"],KJE.s_label[4]=["$0","$100k","$500k","$1m"],KJE.s_label[5]=["$0","$100k","$500k","$1m"],KJE.s_label[6]=["$0","$500","$2.5k","$5k"],KJE.s_label[7]=["$0","$100","$500","$1k"],KJE.s_label[8]=["0","24","48","72"],KJE.s_label[9]=["$0","$100","$200","$300"],KJE.MakeScale=function(e,t,i,a,r,s,n){var o=this;o._Min=e,o._Mid1=t,o._Mid2=i,o._Max=a,o._stepMin=r,o._stepMid=s,o._stepMax=n,o._range=100},KJE.useScale=function(e){var t=KJE,i=t.s_scale[e];return new t.MakeScale(i[0],i[1],i[2],i[3],i[4],i[5],i[6])},KJE.s_Translate=function(e,t,i,a,r,s,n,o){var E=0;return(E=e>66.66?Math.round((a+(e-66.66)/33.33*(r-a))/o)*o:e>33.33?Math.round((i+(e-33.33)/33.33*(a-i))/n)*n:e>0?Math.round(e/33.33*(i-t)/s)*s+t:t)>r?r:E},KJE.s_Untranslate=function(e,t,i,a,r){var s=0;return e>r?100:(s=e>a?66.66+33.33*(e-a)/(r-a):e>i?33.33+33.33*(e-i)/(a-i):33.33*(e-t)/(i-t))<0?0:s},KJE.Slider=function(e,t,i,a,r,s,n,o,E,l){return new KJE.InputItem(l,KJE.TypeNumber,e,t,!0,"KJE-"+e,i,a,0,r,s,n,o,E)},KJE.MortgageAmtSlider=function(e,t,i,a){var r=KJE;return r.Slider(e,t,r.Default.MortgageMin,r.Default.MortgageMax,a||0,r.FMT_DOLLARS,0,[r.dollars(r.Default.MortgageMin/1e3)+r.k,r.dollars(200)+r.k,r.dollars(500)+r.k,r.dollars(1)+r.m],new r.MakeScale(0,2e5,5e5,1e6,5e3,1e4,2e4),i)},KJE.LoanAmtSlider=function(e,t,i){var a=KJE;return a.Slider(e,t,a.Default.MortgageMin,a.Default.MortgageMax,0,a.FMT_DOLLARS,0,[a.dollars(a.Default.MortgageMin/1e3)+a.k,a.dollars(5)+a.k,a.dollars(25)+a.k,a.dollars(100)+a.k],new a.MakeScale(0,5e3,25e3,1e5,100,500,1e3),i)},KJE.MortgageTermSlider=function(e,t,i,a){var r=KJE;return r.Slider(e,t,r.Default.MortgageTermMin,r.Default.MortgageTermMax,0,r.FMT_NUMBER,i||r.Default.MortgageTermIncrement,[r.Default.MortgageTermMin,r.number(Math.floor(.334*(r.Default.MortgageTermMax-r.Default.MortgageTermMin)+r.Default.MortgageTermMin)),r.number(Math.floor(.667*(r.Default.MortgageTermMax-r.Default.MortgageTermMin)+r.Default.MortgageTermMin)),r.number(r.Default.MortgageTermMax)],null,a)},KJE.MortgageTermDropBoxSlider=function(e,t,i){var a=KJE,r=a.getMortgageTermList().v;return a.DropBoxSlider(e,t,r)},KJE.NumberSlider=function(e,t,i,a,r,s,n){var o=KJE;return o.Slider(e,t,i,a,r||0,o.FMT_NUMBER,s||1,[i,o.number(Math.floor(.334*(a-i)+i)),o.number(Math.floor(.667*(a-i)+i)),o.number(a)],null,n)},KJE.InputSlider=function(e,t,i,a,r,s,n,o){var E=KJE,l=E.Slider(e,t,i,a,r||0,E.FMT_INPUT,n||1,[i,E.input(Math.floor(.334*(a-i)+i)),E.input(Math.floor(.667*(a-i)+i)),E.input(a)],null,o,s);return l._iPadding=s,l.setValue(l.getValue(),!0),l},KJE.DollarSlider=function(e,t,i,a,r,s,n,o){var E=KJE;if(-1==(n=n>=0&&n<=9?n:-1))for(var l=0;l<=7;l++)if(E.s_scale[l][3]==a){n=l;break}return-1!=n?E.Slider(e,t,i,a,r||0,E.FMT_DOLLARS,1,E.s_label[n],E.useScale(n),o):E.Slider(e,t,i,a,r||0==r?r:2,E.FMT_DOLLARS,s||10,[E.dollars(i),E.dollars(Math.floor(.334*(a-i)+i)),E.dollars(Math.floor(.667*(a-i)+i)),E.dollars(a)],null,o)},KJE.ZipcodeInput=function(e,t,i){var a=KJE,r=new KJE.InputItem(i,KJE.TypeNumber,e,t,!0,"KJE-"+e,0,99999,0,0,a.FMT_INPUT,0,!1);return r._iPadding=5,r.setValue(r.getValue(),!0),r},KJE.DollarInput=function(e,t,i,a,r,s){var n=KJE;return new KJE.InputItem(s,KJE.TypeNumber,e,t,!0,"KJE-"+e,i,a,0,r||0==r?r:2,n.FMT_DOLLARS,0,!1)},KJE.PercentInput=function(e,t,i,a,r,s){var n=KJE;return new KJE.InputItem(s,KJE.TypeNumber,e,t,!0,"KJE-"+e,i,a,0,r||0==r?r:2,n.FMT_PERCENT,0,!1)},KJE.PercentSlider=function(e,t,i,a,r,s,n){var o=KJE;return o.Slider(e,t,i,a,r||0==r?r:2,o.FMT_PERCENT,s||.1,[o.percent(i/100),o.percent(Math.floor(.334*(a-i)+i)/100),o.percent(Math.floor(.667*(a-i)+i)/100),o.percent(a/100)],null,n)},KJE.MortgageRateSlider=function(e,t,i){var a=KJE;return a.RateSlider(e,t,a.Default.MortgageRateMin,a.Default.MortgageRateMax,a.Default.MortgageRateMax,null,i)},KJE.InvestRateSlider=function(e,t,i){var a=KJE;return a.RateSlider(e,t,a.Default.InvestRateMin,a.Default.InvestRateMax,a.Default.InvestSliderRateMax,null,i)},KJE.InflationRateSlider=function(e,t,i){var a=KJE;return a.RateSlider(e,t,a.Default.InflationRateMin,a.Default.InflationRateMax,a.Default.InflationSliderRateMax,null,i)},KJE.preKJE=function(e){return e?"KJE-"+e:null},KJE.suffix=function(e,t){return t?e+t:null},KJE.RateSlider=function(e,t,i,a,r,s,n){s=s||.5,i=i||0,a=a||25,r=r||12;var o=KJE,E=o.percent,l=r-i,_=Math.floor(.337*l+i),h=Math.floor(.667*l+i),T=[E(i/100),E(_/100),E(h/100),E(r/100)],p=new o.MakeScale(i,_,h,r,s,s,s);return o.Slider(e,t,i,a,3,o.FMT_PERCENT,0,T,p,n)},KJE.Nbr=function(e,t,i,a,r,s,n,o){var E=KJE;return new E.InputItem(o,E.TypeNumber,e,t,!0,"KJE-"+e,i,a,0,r,s,0,!1,!1,E.suffix(e,"_TRAIL"),E.suffix(E.preKJE(e),"_TRAIL"),n,null,null,E.TypeLabel)},KJE.NbrDropBox=function(e,t,i,a,r,s,n,o,E){var l=KJE;return new l.InputItem(E,l.TypeNumber,e,t,!0,"KJE-"+e,i,a,0,r,s,0,!1,!1,n,l.preKJE(n),o||t)},KJE.Checkbox=function(e,t,i,a,r){var s=KJE;return new s.InputItem(r,s.TypeCheckbox,e,t,!a,"KJE-"+e,0,0,i,0,0,0,!1,!1,null,null,a)},KJE.DropBoxString=function(e,t,i,a,r){var s=KJE;return new s.InputItem(r,s.TypeDropBox,e,t,!0,"KJE-"+e,0,0,0,0,s.FMT_STRING,0,!1,!1,i,s.preKJE(i),a)},KJE.DropBox=function(e,t,i,a,r){var s=KJE;return new s.InputItem(r,s.TypeDropBox,e,t,!0,"KJE-"+e,0,0,s.parameters.get(e,0),0,0,0,!1,!1,i,s.preKJE(i),a)},KJE.DropBoxSlider=function(e,t,i,a){var r=KJE,s=[i[0],i[Math.floor(.333*i.length)],i[Math.floor(.666*i.length)],i[i.length-1]];return new r.InputItem(a,r.TypeDropBox,e,t,!0,"KJE-"+e,0,i.length-1,0,0,0,1,s,null)},KJE.Label=function(e,t,i,a,r){var s=KJE;return new s.InputItem(r,s.TypeLabel,e,t,!1,"KJE-"+e,0,0,0,0,0,0,!1,!1,i,s.preKJE(i),a)},KJE.StringInput=function(e,t,i,a,r){var s=KJE;return new s.InputItem(r,s.TypeString,e,t,!0,"KJE-"+e,0,0,0,0,0,0,!1,!1,i,s.preKJE(i),a)},KJE.Date=function(e,t,i,a,r){var s=KJE;return new s.InputItem(r,s.TypeDate,e,t,!0,"KJE-"+e,0,0,"TODAY",0,0,0,!1,!1,i,s.preKJE(i),a)},KJE.Radiobox=function(e,t,i,a,r,s){var n=KJE;return new n.InputItem(s,n.TypeRadio,t,i,!1,"KJE-"+t,0,0,a,0,0,0,!1,!1,null,null,r,null,e)},KJE.Radioboxes=function(e,t,i,a,r,s){var n=KJE;return new n.InputItem(s,n.TypeRadio,e,t,!1,"KJE-"+e+"1",0,0,i,0,0,0,!1,!1,e,n.suffix(n.preKJE(e),"2"),a,r)},KJE.InputItem=function(e,t,i,a,r,s,n,o,E,l,_,h,T,p,u,d,c,R,S){var I=this,A=KJE,g=A.setLabelWrap,K=A.parameters;I._inputType=t,I._name=i,I._inputTypeAdditional=A.TypeNone,I._increment=Math.abs(h),I._decimals=l,I._iPadding=0,I._format=_,I._minimum=n,I._maximum=o,I._range=o-n,I.bValidate=!0,I.bIncompleteCheck=!0,I.bNoLabel=KJE.bNoLabel,I.vDefault=K.get(I._name,E),I.oAdditional=d;var J=K.get("MSG_"+i+"1",c),N=K.get("MSG_"+i+"2",R);if(void 0!==document.createElement&&void 0!==document.documentElement&&"number"==typeof document.documentElement.offsetWidth){I._sError="",I._bError=!1,I._InComplete=!1,I._mouseDown=!1,A.inputs.set(i,this);var C=I._container=document.getElementById("KJE-C-"+I._name);if(!C)return I._inputType=A.TypeNone,void I.setValue(I.vDefault,!0);C.className="KJEInputContainer";var f=C.style;C.backgroundColor=f.backgroundColor;var L=C.offsetWidth;if(I.bSlider=0!=T,void 0===A.bNativeSlider){var O=document.createElement("input");O.setAttribute("type","range"),A.bNativeSlider="text"!==O.type}p&&(I._oScale=p);var m=A.iDPInputPad,D=I._inputField=document.getElementById(s),y=I._iInputFieldDiv=document.getElementById(s+"Div"),M=D.style;D.name=S||I._name,D.className=A.InputClass,M.height=A.iDPInputHeight-KJE.iDPInputTop+"px",M.top=A.iDPInputTop+"px",M.position="absolute",D.resize=!1,I._inputType!=A.TypeLabel&&D.setAttribute("aria-required","true"),I._sLabel=K.get("MSG_"+I._name,a);var v=I._fieldset=document.getElementById("KJE-FS-"+I._name);if(v){v.className="KJEAccessibleFieldSet";var b=document.createElement("legend");b.className="KJEAccessibleFieldSetLegend",b.innerText=I._sLabel,v.insertBefore(b,v.firstChild)}var P=0;if(null!=a&&0!=A.LabelLength){e=e?" "+e:"";var G=document.getElementById("KJE-D-"+(A.InputItem.AltHelpName?A.InputItem.AltHelpName:I._name)),x=I._label=document.createElement("div"),F=x.style;F.position="absolute",F.width=A.LabelLength+"px",F.left=KJE.LabelLeftMargin+"px",F.top=A.iDPInputHeight/4+A.iDPInputTop+"px",I.className=(G&&KJE.PopupDefinitions?"KJEHelp ":"KJELabel ")+e,g(x,s,A.deviceMobile||!r,null,I.bNoLabel?"":I._sLabel+(""!=I._sLabel?A.Colon:""),I.className),x.className=I.className;try{C.insertBefore(x,v||(y||D))}catch(e){}G&&KJE.PopupDefinitions&&I.AddDefinitionEvents(x,G,I._sLabel,I._name),(P=x.offsetWidth)||(P=A.LabelLength),(U=x.offsetHeight)+6>A.iDPRowHeight&&(f.height=U+6+"px",F.top="0px")}var H=P,w=0;if(D.indent=(A.deviceInputPad?A.deviceInputPad:m)+P,I.bNoLabel&&(D.indent=0,P=0),I._inputType==A.TypeCheckbox||I._inputType==A.TypeRadio){if(I._sTrailingText=J,I._sTrailingText2=N,M.left=P+"px",J){var U,B=(oe=document.createElement("div")).style;g(oe,s,!1,null,I._sTrailingText),oe.className="KJETrailingLabel",B.position="absolute",P=P+1.5*m+(D.offsetWidth?D.offsetWidth:15),B.left=P+"px",C.appendChild(oe),B.top=A.iDPInputHeight/4+A.iDPInputTop+"px",(U=oe.offsetHeight)+6>A.iDPRowHeight&&(f.height=U+6+"px",B.top="0px"),P+=oe.offsetWidth,oe=oe}}else if(I._inputType!=A.TypeDropBox)if(I._inputType==A.TypeLabel)D.className="KJEOutputLabel "+e,M.top=A.iDPInputHeight/4+A.iDPInputTop+"px",M.left=P+m+"px",D.indent+=A.deviceInputPad,J?M.width=A.InputLength+m+"px":D.resize=!0,M.height=A.iDPItemHeight-2+"px";else if(I._inputType==A.TypeString||I._inputType==A.TypeDate)M.left=(A.deviceInputPad?A.deviceInputPad:m)+P+"px",J||I.bSlider||I._inputType==A.TypeDate?M.width=A.InputLength+"px":(D.indent=(A.deviceInputPad?A.deviceInputPad:m)+P+m,D.resize=!0);else{if(M.width=A.InputLength+"px",A.deviceUseNumberType){var V=document.createElement("div"),k=V.style;V.className="KJELabelBold",k.position="absolute",k.width=A.deviceInputPad+"px",k.left=P+"px",k.top=A.iDPInputHeight/4+A.iDPInputTop+"px",_==A.FMT_DOLLARS?V.innerHTML=A.sCP+A.sCS:_==A.FMT_PERCENT?V.innerHTML=A.sPP+A.sPS:V.innerHTML="",k.height=A.iDPInputHeight+"px",C.appendChild(V),m=V.offsetWidth+1}A.deviceUseNumberType&&0==I._decimals&&I._maximum<1e3&&(D.type="number"),M.left=P+m+"px"}else{D.className="KJEDropBox";var Y=(A.deviceInputPad?A.deviceInputPad:m)+P,W=A.iDPDropHeight-A.iDPInputTop,X=A.InputLength+KJE.iDPDropBoxPad;if(y){var j=y.style;y.className="KJEDropBoxDivModern",D.className="KJEDropBox KJEDropBoxModern",j.height=A.iDPInputHeight-KJE.iDPInputTop-2+"px",j.top=A.iDPInputTop-1+"px",j.position="absolute",j.left=Y+"px",M.left="4px",j.height=W+"px",j.width=X+"px",M.width=X+KJE.iDPDropBoxModernPad+"px",M.top=(A.IE7and8?-7:0)+A.iDPInputTop+"px"}else M.width=X+"px",M.left=Y+"px",M.top=A.iDPInputTop+"px";M.height=W+"px",J||I.bSlider||(D.indent=(A.deviceInputPad?A.deviceInputPad:KJE.iDPDropBoxPad)+P+m,D.resize=!0)}if(d){var z=I._Additional=document.getElementById(d);if(I._Additional){var $=z.style;$.position="absolute",$.top=A.iDPInputTop+"px",z.setAttribute("aria-required","true");L=A.CalculatorWidth-2*A.iDPInputPad;if(A.TypeRadio==I._inputType){if(I._inputTypeAdditional=A.TypeRadio,z.indent=P+2*m,$.left=z.indent+"px",z.name=S||I._name,z.className=KJE.InputClass,$.height=A.iDPInputHeight-A.iDPInputTop+"px",N){var Z=I._label3=document.createElement("div"),Q=Z.style;g(Z,d,!1,null,I._sTrailingText2),Z.className="KJETrailingLabel",Q.position="absolute";var q=z.offsetWidth;if(q=q||20,Q.height=A.iDPInputHeight+"px",Q.top=A.iDPInputHeight/4+A.iDPInputTop+"px",C.offsetWidth)L-z.indent<A.SliderMinLength?($.top=A.iDPInputHeight+"px",$.left=H+"px",Q.top=A.iDPInputHeight+A.iDPInputHeight/4+"px",Q.left=H+1.5*m+D.offsetWidth+"px",f.height=1.6*A.iDPRowHeight+"px"):Q.left=P+3.5*m+q+"px";else{var ee=A.LabelLength+A.InputLength+7*m+q;Q.left=ee+q+"px",$.left=ee+"px"}C.appendChild(Z)}}else{I._inputTypeAdditional=A.TypeDropBox;var te=I._AdditionalDiv=document.getElementById(d+"Div");z.name=u,z.className="KJEDropBox",z.setAttribute("aria-label",J);var ie=A.iDPDropHeight-A.iDPInputTop,ae=P+(A.offsetWidth?A.offsetWidth(D):D.offsetWidth)+5+2*m,re=ae-m,se=L-ae;if(te){var ne=te.style;te.className="KJEDropBoxDivModern",z.className="KJEDropBox KJEDropBoxModern",ne.position="absolute",ne.top=A.iDPInputTop-1+"px",ne.height=ie+"px",ne.left=re+"px",ne.width=se+"px",$.left="0px",$.top=(A.IE7and8?-7:0)+A.iDPInputTop+"px"}else $.left=re+"px";$.width=se+"px",$.height=ie+"px",z.indent=ae,se<A.SliderMinLength&&C.offsetWidth&&($.top=A.iDPRowHeight+"px",f.height=2*A.iDPRowHeight+"px")}z.addEventListener?z.addEventListener("change",A.dataChanged,!1):z.attachEvent("onchange",A.dataChanged)}else if(J){I._inputTypeAdditional=A.TypeLabel,I._sTrailingText=J;var oe;B=(oe=document.createElement("div")).style;g(oe,d,!1,null,I._sTrailingText),oe.className="KJETrailingLabel",B.position="absolute",B.left=P+(A.deviceInputPad?A.deviceInputPad:m)+m+A.InputLength+5+"px",B.top=A.iDPInputHeight/4+A.iDPInputTop+"px",B.height=A.iDPInputHeight+"px",I._Additional=oe,z=I._Additional=oe,I._label2=oe,C.appendChild(oe)}}else if(I.bSlider){w=P+(A.deviceInputPad?A.deviceInputPad:m)+m+A.InputLength+A.iDPSliderPad,W=A.iDPItemHeight;var Ee=I._slider=document.createElement("div"),le=Ee.style;if(Ee.setAttribute("aria-hidden","true"),KJE.bPlusMinus?Ee.className="KJEIncrementer":(Ee.labels=I.setLabelSlider(W,.1*W,w+A.SliderKnobSize/2,T),Ee.labels.indent=w,le.position="absolute",le.left=w+"px",Ee.className="KJESlider"),Ee.indent=w,Ee.unselectable="on",le.height=W+"px",Ee.bMO=!0,C.appendChild(I._slider),KJE.bPlusMinus){var _e=I._plus=document.createElement("div"),he=I._minus=document.createElement("div"),Te=_e.style,pe=he.style;he.className="KJEIncrementControl KJEIncrementMinus",_e.className="KJEIncrementControl KJEIncrementPlus",pe.bMouseoutignore=Te.bMouseoutignore=!0,pe.unselectable=Te.unselectable="on",pe.position=Te.position="relative",pe.cursor=Te.cursor="pointer",Ee.appendChild(I._minus),Ee.appendChild(I._plus),I.AddPlusMinusEvents(_e,he)}else{var ue;if(A.bNativeSlider)(ue=I._line=document.createElement("input")).setAttribute("type","range"),ue.setAttribute("min","0"),ue.setAttribute("max","100"),ue.setAttribute("step",".01"),ue.tabIndex="-1",ue.style.height=A.iDPRowHeight/2+2+"px",ue.style.outline="none";else(ue=I._line=document.createElement("div")).style.height=A.iDPRowHeight/2+2+"px";ue.className="KJELine";var de=ue.style;ue.bMouseoutignore=!0,ue.unselectable="on",de.position="relative",de.cursor="pointer",Ee.appendChild(I._line);var ce=A.SliderKnobSize;if(A.bNativeSlider)I.bSetRange=!0,I.AddNativeEvents(ue);else{var Re=I._knob=document.createElement("div"),Se=Re.style;Re.sClassNormal=(A.IE7and8?"KJEArrowIE8":"KJEArrow")+(A.SliderKnobExtraClass?" "+A.SliderKnobExtraClass:""),Re.sClassActive=(A.IE7and8?"KJEArrowIE8":"KJEArrow active")+(A.SliderKnobExtraClass?" "+A.SliderKnobExtraClass:""),Re.className=Re.sClassNormal,Re.unselectable="on",Re.bMouseoutignore=!0,Se.position="absolute",Se.cursor="pointer",Ee.appendChild(I._knob),ce=.66*Re.offsetWidth;var Ie=Ee.offsetHeight,Ae=Re.offsetHeight;0==ce&&(ce=A.SliderKnobSize),0==Ae&&(Ae=A.SliderKnobSize),Ee.offsetHeight?Se.top=Ie-Ae+A.SliderKnobVertAdj+"px":Se.top=A.iDPRowHeight-A.SliderKnobSize+A.SliderKnobVertAdj+"px",I.AddSliderEvents(Ee)}de.left=ce+"px",I._posAdjust=ce}}I.vDefault2=I._inputTypeAdditional!=A.TypeNone?I._Additional.value:null,A.InputItem.InputSetValues(I,I.vDefault,I.vDefault2,!0),I.AddInputEvents(D),K.get(i+"_HIDE",!1)&&(I.bValidate=!1,I.hide()),K.get(i+"_DISABLE",!1)&&I.disable()}},KJE.InputItem.InputSetValues=function(e,t,i,a){var r=KJE,s=t;switch(a&&(s=KJE.StorageGet(e._name,e.vDefault)),e._inputType){case r.TypeRadio:e._inputField.checked=s,e.oAdditional&&(e._Additional.checked=!e._inputField.checked);break;case r.TypeCheckbox:e._inputField.checked=s;break;case r.TypeDropBox:var n=r.setDropBox(e._inputField,s);e._InComplete=!1,0==n&&KJE.bFirstNotValid&&(e._InComplete=!0);break;case r.TypeLabel:e._inputField.innerHTML=s;break;case r.TypeDate:e._inputField.value=s,e.setTypedDate(!0);break;case r.TypeString:e._inputField.value=s,e.setTypedString(!0);break;case r.TypeNumber:e._inputField.value=s,e.setTypedValue(!0)}if(e._inputTypeAdditional!=r.TypeNone){s=i;switch(a&&(s=r.StorageGet(e._Additional.name,e.vDefault)),e._inputTypeAdditional){case r.TypeDropBox:n=r.setDropBox(e._Additional,s);e._InComplete=!1,0==n&&KJE.bFirstNotValid&&(e._InComplete=!0);break;case r.TypeDate:case r.TypeString:e._Additional.value=s;break;case r.TypeNumber:e._Additional.value=s,e.setTypedValue(!0)}}},KJE.InputItem.AltHelpName=!1,KJE.InputItem.prototype.AddDefinitionEvents=function(e,t,i,a){var r=KJE.iDPInputHeight-5,s=document.createElement("div");s.className="KJEGuiDefnPopup",s.id="KJE-PODEFN-"+a;var n=document.createElement("button");n.id="KJE-PO-"+a,n.setAttribute("aria-label",KJE.MSG_DEFINE_PREFIX+i),n.className="KJEDefinitionIcon",n.innerHTML="i",n.tabIndex="0",n.setAttribute("type","button"),n.setAttribute("onmouseout","KJE.DefnPointHide('"+a+"')"),s.innerHTML='<button id="KJE-POCLOSE-'+a+'" class="KJECloseButton" onclick="KJE.DefnPointHide(\''+a+'\')" type="button" aria-aria-label="'+KJE.MSG_DEFN_CLOSE_LABEL+" "+i+'" tabindex="0">X</button><dl class=KJEDefinitionPopup>'+t.innerHTML+"</dl>",s.innerHTML="<dl class=KJEDefinitionPopup>"+t.innerHTML+"</dl>",e.insertBefore(n,e.firstChild),e.parentNode.appendChild(s),s.setAttribute("aria-hidden","true"),s.setAttribute("role","dialog"),s.setAttribute("aria-label",KJE.MSG_DEFINE_PREFIX+i),e.addEventListener?e.addEventListener("click",function(t){KJE.DefnPointTimeOut>0&&KJE.DefnPoint==s?KJE.DefnPointHide():KJE.DefnPointShow(s,50,r,e,6e4,a),t.preventDefault()},!1):e.attachEvent("onclick",function(t){KJE.DefnPointTimeOut>0&&KJE.DefnPoint==s?KJE.DefnPointHide():KJE.DefnPointShow(s,50,r,e,6e4,a),t.preventDefault()})},KJE.InputItem.prototype.AddPlusMinusEvents=function(e,t){var i=this;e.addEventListener?(e.addEventListener("click",function(e){i.doIncrement(!0)},!1),t.addEventListener("click",function(e){i.doIncrement(!1)},!1)):(e.attachEvent("onclick",function(e){i.doIncrement(!0)}),t.attachEvent("onclick",function(e){i.doIncrement(!1)}))},KJE.InputItem.prototype.AddNativeEvents=function(e){var t=this;e.addEventListener("input",function(e){t.bSetRange&&t.setRangeValue(e),t.bSetRange=!0},!1)},KJE.InputItem.prototype.AddSliderEvents=function(e){var t=this;if(e.addEventListener){try{document.createEvent("TouchEvent"),e.addEventListener("touchstart",function(e){e.preventDefault(),t.doMouseDown(e,!0)},!1),e.addEventListener("touchmove",function(e){e.preventDefault(),t.doMouseMove(e,!0)},!1),e.addEventListener("touchend",function(e){e.preventDefault(),t.doMouseUp(e,!0)},!1),e.addEventListener("touchcancel",function(e){e.preventDefault(),t.doMouseOut(e,!0)},!1)}catch(e){}e.addEventListener("mousemove",function(e){t.doMouseMove(e)},!1),e.addEventListener("mousedown",function(e){t.doMouseDown(e)},!1),e.addEventListener("mouseup",function(e){t.doMouseUp(e)},!1),e.addEventListener("mouseout",function(e){t.doMouseOut(e)},!1)}else e.attachEvent("onmousemove",function(e){t.doMouseMove(e)}),e.attachEvent("onmousedown",function(e){t.doMouseDown(e)}),e.attachEvent("onmouseup",function(e){t.doMouseUp(e)}),e.attachEvent("onmouseout",function(e){t.doMouseOut(e)})},KJE.InputItem.prototype.AddInputEvents=function(e){var t=this;e.addEventListener?(e.addEventListener("change",function(e){t.doBlur(e)},!1),e.addEventListener("focus",function(e){t.doFocus(e)},!1),e.addEventListener("keypress",function(e){if(13==e.keyCode)return t.doBlur(),KJE.Dropper.stopBubble(e)},!1)):(e.attachEvent("onchange",function(e){t.doBlur(e)}),e.attachEvent("onfocus",function(e){t.doFocus(e)}),e.attachEvent("onkeypress",function(e){if(13==e.keyCode)return t.doBlur(),KJE.Dropper.stopBubble(e)}))},KJE.InputItem.prototype.doFocus=function(){var e=KJE;switch(this._inputType){case e.TypeRadio:case e.TypeCheckbox:case e.TypeDropBox:case e.TypeLabel:break;case e.TypeDate:case e.TypeString:case e.TypeNumber:this._inputField.select(),this._inputField.value==this.getName()&&(this._inputField.value="")}},KJE.InputItem.prototype.doBlur=function(){var e=KJE,t=this;switch(t._inputType){case e.TypeRadio:case e.TypeCheckbox:e.dataChanged();break;case e.TypeDropBox:t._InComplete=!1,0==t._inputField.selectedIndex&&t.bFirstNotValid&&(t._InComplete=!0),t.setSliderPosition(t._inputField.selectedIndex),e.dataChanged();break;case e.TypeDate:t.setTypedDate();break;case e.TypeString:t.setTypedString();break;case e.TypeNumber:t.setTypedValue()}},KJE.InputItem.prototype.doClick=function(e,t){this.setMouseValue(e,t)},KJE.InputItem.prototype.doMouseUp=function(e,t){this._line.className="KJELine",this._knob.className=this._knob.sClassNormal,this._mouseDown=!1},KJE.InputItem.prototype.doMouseOut=function(e,t){var i=window.event;if(!this._inputField.disabled&&this._mouseDown){if(!e)e=i;var a=i?e.srcElement:e.target;if(a.bMouseoutignore)return;for(var r=e.relatedTarget?e.relatedTarget:e.toElement;r!=a&&"BODY"!=r.nodeName;)r=r.parentNode;a!=r&&this.doMouseUp()}},KJE.InputItem.prototype.doMouseDown=function(e,t){var i=this;i._inputField.disabled||(i._line.className="KJELine active",KJE.IE7and8||(i._knob.className=i._knob.sClassActive),i._mouseDown=!0,e&&i.setMouseValue(e,t))},KJE.InputItem.prototype.doMouseMove=function(e,t){this._mouseDown&&this.setMouseValue(e,t)},KJE.InputItem.prototype.setRangeValue=function(e){v=this._line.value,this.setChangeValue(v/100)},KJE.InputItem.prototype.setMouseValue=function(e,t){var i=KJE.getMouseCoord(e,this._slider,t);if(i.x>=0){var a=this._posAdjust,r=this._slider.offsetWidth,s=(i.x-a)/(r-a);this.setChangeValue(s)}},KJE.InputItem.prototype.setChangeValue=function(e){var t=this,i=t._minimum,a=t._maximum,r=t._oScale;if(r)e=KJE.s_Translate(100*e,r._Min,r._Mid1,r._Mid2,r._Max,r._stepMin,r._stepMid,r._stepMax);else{var s=t._increment;e=e*t._range+i,e=1==s?Math.round(e):Math.round(e/s)*s}t._InComplete=!1,t.setValue(e>a?a:e<i?i:e,!1,!0)},KJE.InputItem.prototype.doIncrement=function(e){var t=this._minimum,i=this._maximum;i<20&&(iIncrement=.5),iIncrement=i<100?1:i<1e3?10:i<1e4?100:1e3;var a=this.getValue()+(e?1:-1)*iIncrement;this.setValue(a>i?i:a<t?t:a,!1,!0)},KJE.InputItem.prototype.validate=function(){var e=this;if(e.bValidate){if(e._bError)throw e._sError;return!(e.bIncompleteCheck&&e._InComplete)}return!0},KJE.InputItem.prototype.setValue=function(e,t,i){var a=KJE,r=this,s=r._inputField,n=r._format,o=r._container,E=r._inputType,l=!1;if(E==a.TypeNone)return r._value=e,void(r._bError=!1);if(E==a.TypeDate){var _=new Date;try{var h=new Array;e.indexOf("/")>0?((h=e.split("/"))[0]=Math.round(h[0]),h[1]=Math.round(h[1]),h[2]=Math.round(h[2])):(h[0]=Math.round(e.substring(0,2)),h[1]=Math.round(e.substring(2,4)),h[2]=Math.round(e.substring(4))),h[2]<100&&(h[2]+=2e3),h[2]+h[1]+h[0]>0?_=new Date(h[2],h[0]-1,h[1]):l=!0}catch(e){l=!0}l?(r._sError=a.getKJEReplaced(a.MSG_INVALID_DATE,r._sLabel),r._value=null):(r._value=_,s.value=a.dateFormat(_))}else if(E==a.TypeString)s.value=e;else if(E==a.TypeDropBox)s.selectedIndex=Math.round(e),r.setSliderPosition(e);else if(E==a.TypeLabel)s.innerHTML=e;else if(E==a.TypeCheckbox)s.checked=e;else{r.bValidate&&(e>r._maximum?(r._sError=a.getKJEReplaced(this.MSG_EXCEEDS_LIMIT_OF_RANGE?this.MSG_EXCEEDS_LIMIT_OF_RANGE:a.MSG_EXCEEDS_LIMIT_OF_RANGE,r._sLabel,a.format[n](a.FMT_PERCENT==n?r._maximum/100:r._maximum,r._decimals,r._iPadding)),l=!0):e<r._minimum&&(r._sError=a.getKJEReplaced(this.MSG_UNDER_LIMIT_OF_RANGE?this.MSG_UNDER_LIMIT_OF_RANGE:a.MSG_UNDER_LIMIT_OF_RANGE,r._sLabel,a.format[n](a.FMT_PERCENT==n?r._minimum/100:r._minimum,r._decimals,r._iPadding)),l=!0));var T=r._value=a.round(e,r._decimals),p="";p=!a.deviceUseNumberType||n!=a.FMT_DOLLARS&&n!=a.FMT_PERCENT?a.format[n](n==a.FMT_PERCENT?T/100:T,r._decimals,r._iPadding):a.nbr(T,r._decimals,"","",!0,!1),s.value=a.replace("&nbsp;"," ",p),r.setSliderPosition(T)}r._bError=l,o.style.backgroundColor=l?a.ErrorBackground:o.backgroundColor,t||a.dataChanged(i)},KJE.InputItem.prototype.setSliderPosition=function(e){var t=this;if(t.bSlider){var i=t._slider.width;if(i&&(e||0==e)){var a=t._oScale,r=t._posAdjust,s=0;if(a)s=KJE.s_Untranslate(e,a._Min,a._Mid1,a._Mid2,a._Max)/100;else{var n=t._maximum,o=t._minimum;s=((e>n?n:e<o?o:e)-o)/t._range}KJE.bNativeSlider?t._line.value=100*s:t._knob.style.left=(i-r)*s+r/2+"px"}}},KJE.InputItem.prototype.setTypedString=function(e){var t=KJE.replace;this.setValue(t("<","",t(">","",t("(","",t(")","",this._inputField.value)))),e)},KJE.InputItem.prototype.setTypedDate=function(e){var t=KJE,i=this,a=i._inputField.value,r=a;if(i._InComplete=!1,"TODAY"==a)r=t.dateFormat(new Date);else if("NEXT_MONTH"==a){var s=new Date;s.setMonth(s.getMonth()+1),r=t.dateFormat(s)}else if("T"==r.substr(10,1)&&(r=r.substr(5,2)+"/"+r.substr(8,2)+"/"+r.substr(0,4)),""==(r=t.stripDate(r))||r==i._sLabel)return i._inputField.value=i.bNoLabel?i._sLabel:"",i._InComplete=!0,i._bError=!1,i._container.style.backgroundColor=t.IncompleteBackground,e||t.dataChanged(),void(i._value=null);i.setValue(r,e)},KJE.InputItem.prototype.setTypedValue=function(e){var t=KJE,i=this;i._InComplete=!1;var a=i._inputField.value;if(""==a||a==i._sLabel)i.setSliderPosition(i._minimum),i._inputField.value=i.bNoLabel?i._sLabel:"",i._InComplete=!0,i._bError=!1,i._container.style.backgroundColor=t.IncompleteBackground,e||t.dataChanged();else{var r=t.round(parseFloat(t.strip(a)),i._decimals);i.bSetRange=!1,i.setValue(r,e)}},KJE.InputItem.prototype.getSecondValue=function(){return this.getV(this._inputTypeAdditional,this._Additional)},KJE.InputItem.prototype.getValue=function(){var e=this;return e._value=e.getV(e._inputType,e._inputField,e._format)},KJE.InputItem.prototype.setText=function(e){return this.setT(this._inputType,this._inputField,e)},KJE.InputItem.prototype.setSecondText=function(e){return this.setT(this._inputTypeAdditional,this._Additional,e)},KJE.InputItem.prototype.getSecondFormatted=function(){return this.getF(this._inputTypeAdditional,this._Additional)},KJE.InputItem.prototype.getFormatted=function(){return this._InComplete?KJE.sIncomplete:this.getF(this._inputType,this._inputField)},KJE.InputItem.prototype.getF=function(e,t){var i=KJE,a="",r=this._value,s=this._format;switch(e){case i.TypeRadio:case i.TypeCheckbox:a=t.value;break;case i.TypeDropBox:a=t[t.selectedIndex].text;break;case i.TypeLabel:a=t.innerHTML;break;case i.TypeDate:a=i.dateFormat(r);break;case i.TypeString:a=t.value;break;case i.TypeNumber:a=i.format[s](s==i.FMT_PERCENT?r/100:r,this._decimals,this._iPadding);break;case i.TypeNone:a=r}return a},KJE.InputItem.prototype.getV=function(e,t,i){var a=KJE,r=0;switch(e){case a.TypeRadio:case a.TypeCheckbox:r=t.checked;break;case a.TypeDropBox:r=t[t.selectedIndex].value,i!=a.FMT_STRING&&(r=Math.round(r));break;case a.TypeLabel:r=t.innerHTML;break;case a.TypeDate:r=this._value;break;case a.TypeString:r=t.value;break;case a.TypeNumber:r=a.round(parseFloat(a.strip(t.value)),this._decimals);break;case a.TypeNone:r=this._value}return r},KJE.InputItem.prototype.setT=function(e,t,i){var a=KJE;switch(e){case a.TypeRadio:case a.TypeCheckbox:case a.TypeDropBox:break;case a.TypeLabel:t.innerHTML=i;break;case a.TypeDate:t.value=i,this.setTypedDate(!0);break;case a.TypeString:t.value=i,this.setTypedString(!0);break;case a.TypeNumber:t.value=a.replace("&nbsp;"," ",i),this.setTypedValue(!0)}},KJE.InputItem.prototype.shortDesc=function(){return this._sLabel+KJE.Colon+" "+this.getFormatted()},KJE.InputItem.prototype.newWidth=function(){var e=KJE,t=this,i=t._inputField,a=t._Additional;if(t._inputType!=e.TypeNone){var r=t.SliderX();if(i.resize){var s=Math.max(r-i.indent,0);t._iInputFieldDiv?(t._iInputFieldDiv.style.width=s+"px",i.style.width=s+KJE.iDPDropBoxModernPad+"px"):i.style.width=s+"px"}if(a&&a.indent&&t._inputTypeAdditional!=e.TypeRadio){s=r+10-a.indent;t._AdditionalDiv?(t._AdditionalDiv.style.width=s+"px",a.style.width=s+KJE.iDPDropBoxModernPad+"px"):a.style.width=s+"px"}var n=t._slider;n&&!KJE.bPlusMinus&&this.showSlider(n);var o=t._label2;if(o){var E=o.offsetHeight;E+6>e.iDPRowHeight&&(t._container.style.height=E+e.iDPInputHeight/4+2+"px")}}},KJE.InputItem.prototype.SliderX=function(){return KJE.CalculatorWidth-2*KJE.iDPInputPad-(this.SliderWidthAdjust?this.SliderWidthAdjust:KJE.SliderWidthAdjust)},KJE.InputItem.prototype.showSlider=function(e){var t=KJE,i=this,a=i.SliderX();if(e.indent)if(a-t.InputTotalLength<t.SliderMinLength)e.style.display="none",e.labels.style.display="none";else{e.style.display="inline-block",e.labels.style.display="inline-block";var r=a-e.indent;e.width=r,e.style.width=r+"px",i._line.style.width=r-t.SliderKnobSize+"px",e.labels.style.width=a-e.labels.indent+"px",i.setSliderPosition(i._inputType==t.TypeDropBox?i._inputField.selectedIndex:i._value)}},KJE.InputItem.prototype.hide=function(){var e=this._container;e&&(e.style.display="none")},KJE.InputItem.prototype.show=function(){var e=this._container;e&&(e.style.display="block")},KJE.InputItem.prototype.setLabelSlider=function(e,t,i,a){var r=["left","center","center","right"],s=document.createElement("div");s.className="KJEScale",s.setAttribute("aria-hidden","true"),s.className="KJEScale",s.unselectable="on",s.style.position="absolute",s.style.height=e+"px",s.style.cursor="pointer",s.style.top=t-18+"px",s.style.left=i+"px",this._container.appendChild(s);var n=KJE.SliderLabelVertAdj;if(a)for(var o=(a.length>5?5:a.length)-1,E=0;E<=o;E++){var l=document.createElement("div");if(l.className="KJEScale",l.unselectable="on",l.style.position="absolute",l.style.height=e+"px",l.style.textAlign=r[E==o?3:E],l.style.cursor="pointer",l.style.top=0+n+"px",4==o)switch(E){case 0:l.style.width="100%",l.style.left=0;break;case 1:l.style.width="55%",l.style.left=0;break;case 2:l.style.width="100%";break;case 3:l.style.width="75%",l.style.left=0;break;case 4:l.style.width="100%",l.style.right=0}else l.style.width=o<2?"100%":(o>2?66.66:100)+"%",E>1?l.style.right=0:l.style.left=0;l.innerHTML=a[E],s.appendChild(l)}return s},KJE.InputItem.prototype.disable=function(e,t){var i=this,a=i._inputType,r=i._label2,s=i._label;return a!=KJE.TypeNone&&(i.bValidate=!1,i._container.style.backgroundColor=i._container.backgroundColor,i._InComplete=!1,a==KJE.TypeCheckbox&&r&&(r.className="KJETrailingLabelDisable"),s&&!e&&(s.className=i.className+" KJETrailingLabelDisable"),i.bSlider&&(i._slider.labels.style.display="none",i._slider.style.display="none"),i._inputField&&t&&(i._inputField.style.display="none"),i._inputField.disabled=!0)},KJE.InputItem.prototype.enable=function(){var e=KJE,t=this,i=t._inputType,a=t._label2,r=t._label;return i!=e.TypeNone&&(t.bValidate=!0,i==e.TypeCheckbox&&a&&(a.className="KJETrailingLabel"),r&&(r.className=this.className),t.bSlider&&t.showSlider(t._slider,null),t._inputField&&(t._inputField.style.display="block"),i==e.TypeDate&&t.setTypedDate(!0),i==e.TypeNumber&&t.setTypedValue(!0),t._inputField.disabled=!1)},KJE.InputItem.prototype.getName=function(){return this._sLabel},KJE.shortDesc=function(){for(var e="",t=0;t<arguments.length;t++)arguments[t].shortDesc?e+=arguments[t].shortDesc()+(t==arguments.length-1?"":", "):e+=arguments[t];return e},KJE.stripDate=function(e){if(!e)return"";for(var t=e.length,i="";t>0;){var a=e.charAt(t-1);switch(a){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"/":i=a+i;break;case"-":i=a+"/"}t--}return i},KJE.strip=function(e){if(!e)return"0";for(var t=e.length,i="",a=0,r=0;t>0;){var s=e.charAt(t-1);switch(s){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":i=s+i;break;case".":a||(i=s+i),a++;break;case"-":case"(":r++}t--}return""==i?"0":r?"-"+i:i},KJE.DataPointTimeOut=-1,KJE.DataPointObject=null,KJE.DataPointShow=function(e,t,i,a,r,s){var n=KJE;s||(s=2500),n.DataPoint.style.display="block";var o=n.getScreenCoord(i,a,r),E=n.DataPointOffset();n.DataPoint.style.left=o.x+E.x-47+n.DataPointX+"px",n.DataPoint.style.top=o.y+E.y-5+n.DataPointY+"px",n.DataPoint.innerHTML=t,n.DataPointTimeOut&&clearTimeout(n.DataPointTimeOut),n.DataPointTimeOut=setTimeout(n.DataPointHide,s),n.DataPointObject=r},KJE.DataPointHide=function(){var e=KJE;e.DataPoint.style.display="none",e.DataPointTimeOut&&clearTimeout(e.DataPointTimeOut),e.DataPointTimeOut=-1,e.DataPointObject=null},KJE.DataPointOffset=function(){var e=KJE.DataPoint.offsetParent;if(e){var t=KJE.getScreenCoord(0,0,e);return{x:-t.x,y:-t.y}}return{x:0,y:0}},KJE.DefnPointTimeOut=-1,KJE.DefnPoint=null,KJE.DefnPointX=5,KJE.DefnPointY=19,KJE.DefnPointShow=function(e,t,i,a,r,s){var n=KJE;n.DefnPointTimeOut&&clearTimeout(n.DefnPointTimeOut),n.DefnPoint&&n.DefnPointHide(),r||(r=2500),n.DefnPoint=e,e.style.display="block";n.getScreenCoord(t,i,a),n.DataPointOffset();if(e.style.left=n.DefnPointX+"px",e.style.top=n.DefnPointY+"px",e.setAttribute("aria-hidden","false"),n.DefnPointTimeOut=setTimeout(n.DefnPointHide,r),s)try{document.getElementById("KJE-POCLOSE-"+s).focus()}catch(e){}},KJE.DefnPointHide=function(e){var t=KJE;t.DefnPoint.style.display="none",t.DefnPoint.setAttribute("aria-hidden","true"),t.DefnPointTimeOut&&clearTimeout(t.DefnPointTimeOut),t.DefnPointTimeOut=-1,t.DefnPoint=null},KJE.sDropperTitle="<div class=KJEToggleIcon>**ICON**</div><div class=KJEToggleTitle>**TITLE_TEXT**</div>",KJE.DropperDefined=function(e){return document.getElementById("KJE-P-"+e)},KJE.DivDefined=function(e){return document.getElementById("KJE-D-"+e)},KJE.Dropper=function(e,t,i,a,r,s){var n=this,o=KJE;o.iDropperCount+=1;var E=o.parameters.get("DROPPER_OPEN"+Math.floor(o.droppers.length+1),t);t=!!o.IE7and8||E,n.getOpen=i||!1,n.getClosed=a||!1;var l=n._idDropper=document.getElementById("KJE-P-"+e);l.setAttribute("role","button"),s&&(l.style.display="none");var _=n._idDrop=document.getElementById("KJE-D-"+e),h=n._idDroppee=document.getElementById("KJE-E-"+e);if(_&&(_.className="KJEDrop"),h&&(h.className="KJEDroppee"),l.className="KJEDropper",l.tabIndex="0",o.IE7and8&&(l.style.paddingRight="0"),h.style.display="block",h.style.width="100%",n._iHeight=h.offsetHeight,!n._iHeight||o.iDPDroppeeForceSize){n._iHeight=0;for(var T=h.getElementsByTagName("div"),p=0;p<T.length;p++)"KJEInputContainer"==T[p].className&&(n._iHeight+=o.iDPRowHeight);n._iHeight+=10}n.InCalculator=!r,n._sInnerHTML=l.innerHTML,n._sName=e,n.sExtraClass=!!o.DropperColors&&(o.DropperColors.length>=o.iDropperCount&&o.DropperColors[o.iDropperCount-1]),n.AddEvents(),n.show(!!t),t?(h.style.height=n._iHeight+"px",h.style.overflow="visible",l.setAttribute(o.sExpand,"true")):(h.style.height="0px",h.style.display="none",h.style.visibility="hidden",l.setAttribute(o.sExpand,"false")),o.IE7and8&&!E&&setTimeout(function(){KJE.inCommandTask(!1),n.toggle()},1001)},KJE.Dropper.prototype.AddEvents=function(){var e=this,t=e._idDropper;t.addEventListener?(t.addEventListener("click",function(){e.toggle(e)},!1),t.addEventListener("keypress",function(e){if(32==e.keyCode||13==e.keyCode)return KJE.Dropper.stopBubble(e)},!1),t.addEventListener("keydown",function(t){if(32==t.keyCode||13==t.keyCode)return e.toggle(),KJE.Dropper.stopBubble(t)},!1)):(t.attachEvent("onclick",function(){e.toggle(e)}),t.attachEvent("onkeypress",function(e){if(32==e.keyCode||13==e.keyCode)return KJE.Dropper.stopBubble(e)}),t.attachEvent("onkeydown",function(t){if(32==t.keyCode||13==t.keyCode)return e.toggle(),KJE.Dropper.stopBubble(t)}))},KJE.Dropper.prototype.setHidden=function(e){this._idDrop.style.display="none",this._idDroppee.style.display="none"},KJE.Dropper.prototype.setShown=function(e){this._idDrop.style.display="block",this._idDroppee.style.display="block"},KJE.Dropper.prototype.setBackground=function(e){this._idDrop&&(this._idDrop.style.backgroundColor=e),this._idDroppee.style.backgroundColor=e},KJE.Dropper.prototype.setText=function(e){var t=this,i=t.getOpen,a=t.getClosed,r=t._bShow;e||(e=r&&i?"function"==typeof i?i():i:!r&&a?"function"==typeof a?a():a:t._sInnerHTML),t._idDropper.innerHTML=KJE.setToggleTitleText(e,t,KJE)},KJE.Dropper.prototype.show=function(e){this._bShow=e,this.setText()},KJE.Dropper.prototype.toggle=function(){if(!KJE.inCommandTask(!0)){var e=this,t=e._idDroppee,i=KJE.deviceNoTransition||KJE.IE7and8?0:8;t.style.overflow="hidden",e._bShow?(KJE.IE7and8?t.style.display="none":t.style.height="0px",e._bShow=!1,e.show(),KJE.Calculator.style.height=KJE.Main.offsetHeight+"px",setTimeout(function(){KJE.inCommandTask(!1),t.style.visibility="hidden",t.style.display="none",e._idDropper.setAttribute(KJE.sExpand,"false")},100)):(t.style.display="block",t.style.visibility="visible",e._count=0,KJE._iInterval=setInterval(function(){e.open(t.style,e._iHeight,i)},25))}},KJE.Dropper.stopBubble=function(e){return e.cancelBubble=!0,e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1},KJE.Dropper.prototype.open=function(e,t,i){var a=this,r=a._count;if(r>=i)return clearInterval(KJE._iInterval),KJE.IE7and8||(e.height=t+"px"),KJE.Calculator.style.height=KJE.Main.offsetHeight+"px",void setTimeout(function(){KJE.inCommandTask(!1),a.show(!0),a._idDropper.setAttribute(KJE.sExpand,"true"),a._idDroppee.style.overflow="visible"},100);r>=i-2&&(r-=.5),r++,e.height=t*(r/i)+"px",KJE.Calculator.style.height=KJE.Main.offsetHeight+"px",a._count=r},KJE.addDiv=function(e,t,i){var a=document.getElementById("KJE-D-"+e);return a&&(a.className="KJEInputDiv"+(i?" "+i:""),t&&(a.style.backgroundColor=t)),a},KJE.addDropper=function(e,t){return t&&e.setBackground(t),KJE.droppers.set(e._sName,e),e},KJE.setToggleTitleText=function(e,t,i,a){e||(e="");var r=e.indexOf("<"),s=e.indexOf("|"),n=((r=r>0&&s>0?r>s?s:r:r<s?s:r)>0?e.substring(0,r):e).trim();"."==n.charAt(n.length-1)&&(n=n.slice(0,-1)),n.charAt(n.length-1)!=KJE.Colon.trim()&&(n+=KJE.Colon);var o="",E="",l="";t&&(o=t._bShow?i.sToggleAltTextOpen:i.sToggleAltTextClose,E=t._bShow?i.sToggleClose:i.sToggleOpen,l=t._bShow?i.sExpanded:i.sCollapse);var _=KJE.sToggleTitle,h="",T=e.indexOf("|"),p=a||!t?"":i.sToggleIcon;return!a&&t||(E="",o=""),T>-1?(_=KJE.sToggleTitle2,h=e.substring(T+1),e=e.substring(0,T)):t&&!a||(_=KJE.sToggleTitle1),null!=t&&t.sExtraClass&&(_=KJE.replace("**EXTRA_CLASS**",t.sExtraClass,_)),_.replace("**IMG_TEXT**",o).replace("**SUMMARY_TEXT**",n).replace("**TITLE_TEXT**",e).replace("**TITLE_TEXT2**",h).replace("**ICON**",E).replace("**IMG**",p).replace("**TITLE_CLASS**",i.sToggleTitleClass).replace("**TITLE_CLASS**",i.sToggleTitleClass).replace("**EXPANDED**",l)},KJE.setDropBox=function(e,t){t+="";for(var i=0;i<e.options.length;i++)if(e.options[i].value==t){e.options[i].selected=!0;break}return i},KJE.getDropBox=function(e,t,i,a,r){r=r?' class="'+r+'" ':"";for(var s=(a=a||i).length,n=i.length,o="<select name="+e+" id=KJE-"+e+r+">",E=0;E<n;E++){var l=i[E]==t?" selected='selected' ":"";o+="<option value='"+i[E]+"' "+l+">"+(E>=s?i[E]:a[E])}return o+="</select>",KJE.InputModern&&(o="<div id=KJE-"+e+r+"Div >"+o+"</div>"),o},KJE.getTermChoice=function(e,t,i,a,r,s,n,o,E){var l=new Array,_=new Array;s=s||"",n=n||!1,E=E||1;for(var h=0,T=KJE.parameters.get("TERM_SHOW_ADDITIONAL",7),p=E;p<=a;p++)(i&&p<=r||p%5==0||p==T)&&0==(0==T&&(5==p||25==p||35==p))&&(l[h]=p+" "+(1==p?KJE.MSG_YEAR_LBL:KJE.MSG_YEARS_LBL)+(p>r?s:""),_[h]=p,h++);return o?KJE.getDropBox(e,t,_,l,n):{d:l,v:_}},KJE.getMortgageTermChoice=function(e,t,i){var a=KJE;return a.getTermChoice(e,t,a.parameters.get("MORTGAGE_TERM_MAX",a.Default.MortgageShowAll),a.parameters.get("MORTGAGE_TERM_MAX",a.Default.MortgageTermMax),a.parameters.get("MORTGAGE_SHOW_MAX",a.Default.MortgageShowAllMax),"",!1,i,a.parameters.get("MORTGAGE_TERM_MIN",a.Default.MortgageTermMin))},KJE.getMortgageTermDrop=function(e,t){return KJE.getMortgageTermChoice(e,t,!0)},KJE.getMortgageTermList=function(){return KJE.getMortgageTermChoice("",0,!1)},KJE.iGraphFixedWidth=0,KJE.gScaleLabel=["","Thousands of ","Millions of ","Billions of "],KJE.gScaleLabelMax=[0,1e5,1e8,1e11],KJE.gScaleLabelFactor=[1,1e3,1e6,1e9],KJE.gFont=["Arial","Arial","Arial","Arial","Arial","Arial"],KJE.gFontStyle=["bold","bold","","","bold",""],KJE.gFontSize=[13,10,10,10,10,7],KJE.g=new Object,KJE.g.sToggleAltTextClose="press spacebar to show graph",KJE.g.sToggleAltTextOpen="press spacebar to hide graph",KJE.g.sNewGraphPleaseComplete="please complete inputs to view graph",KJE.g.sToggleTitleClass="KJEGraphTitle",KJE.g.sToggleIcon="KJEGraphIcon",KJE.g.sToggleOpen="[+]",KJE.g.sToggleClose="[-]",KJE.g.sExpanded="",KJE.g.sCollapse="",KJE.g.sExpand="aria-expanded",KJE.gHeight=250,KJE.gHeightReport=350,KJE.gWidthMax=850,KJE.gLegendMin=400,KJE.gColorBackground="#FFFFFF",KJE.gColorForeground="#000000",KJE.gColorGrid="#BBBBBB",KJE.gColorGridBackground1="#FFFFFF",KJE.gColorGridBackground2="#CCCCCC",KJE.gColorAxisLine="#666666",KJE.gColorText="#000000",KJE.gColorList=["#000055","#7B68EE","#64A650","#FFF200","#5f007f","#F15A22","#B72467","#6DC8BF","#FF0000","#ff00ff","#ffff00","#00ffff","#7f007f","#7f0000","#007f7f","#0000ff","#00c8ff","#60ffff","#bfffbf","#ffff90","#a0c8ef"],KJE.gPleaseComplete="",KJE.gWidthAdjust=0,KJE.gPIE=0,KJE.gCOLUMN=1,KJE.gCATEGORIES=2,KJE.gSTACKED=3,KJE.gLINE=4,KJE.gGetFontHeight=function(e){return Math.ceil(e.measureText("m").width+2)},KJE.gDarker=function(e,t){"#"==e[0]&&(e=e.slice(1));var i=parseInt(e,16),a=(i>>16)*t;a>255?a=255:a<0&&(a=0);var r=(i>>8&255)*t;r>255?r=255:r<0&&(r=0);var s=(255&i)*t;return s>255?s=255:s<0&&(s=0),"rgb("+Math.floor(a)+","+Math.floor(r)+","+Math.floor(s)+")"},KJE.gTitle=new Object,KJE.gGraphLine=new Object,KJE.gAxis=new Object,KJE.gGraphColumn=new Object,KJE.gGraphPie=new Object,KJE.gTitle.HORIZONTAL=0,KJE.gTitle.VERTICAL=1,KJE.gLegend=new Object,KJE.gLegend.LEFT=0,KJE.gLegend.RIGHT=1,KJE.gLegend.TOP=3,KJE.gLegend.BOTTOM=4,KJE.gLegend.TOP_LEFT=5,KJE.gLegend.TOP_RIGHT=6,KJE.gLegend.BOTTOM_LEFT=7,KJE.gLegend.BOTTOM_RIGHT=8,KJE.gLegend.GRID_TOP_RIGHT=9,KJE.gLegend.GRID_TOP_LEFT=10,KJE.gLegend.GRID_BOTTOM_RIGHT=11,KJE.gLegend.GRID_BOTTOM_LEFT=12,KJE.gLegend.GRID_TOP=13,KJE.gLegend.GRID_BOTTOM=14,KJE.gLegend.GRID_RIGHT=15,KJE.gLegend.GRID_LEFT=16,KJE.gLegend.TOP_GRID_ALIGN=17,KJE.gLegend.BANDED_LEGEND=0,KJE.gLegend.DATA_SERIES_LEGEND=1,KJE.gLegend.CATEGORY_LEGEND=2,KJE.gLegend.ROUND_LEGEND=0,KJE.gLegend.SQUARE_LEGEND=1,KJE.gLegend._sSHADOW_COLOR="#222222",KJE.gTITLE_FONT=0,KJE.gBOLD_FONT=1,KJE.gPLAIN_FONT=2,KJE.gLEGEND_FONT=3,KJE.gLEGEND_FONT_BOLD=4,KJE.gLEGEND_FONT_TINY=5,KJE.gSCALE=KJE.VML?1:2,KJE.ggetFont=function(e){var t=KJE,i=t.gFontSize[e];return t.gFontStyle.length<=e&&e==t.gLEGEND_FONT_TINY&&(e-=3,i=t.gFontSize[e]-3),t.gFontStyle.length<=e&&(e-=2,i=t.gFontSize[e]),((t.VML?"":t.gFontStyle[e]+" ")+Math.floor(t.gSCALE*i)+"pt "+t.gFont[e]).trim()},KJE.gBORDER_WIDTH=10*KJE.gSCALE,KJE.gLegend._iSIDE_BORDER_WIDTH=10*KJE.gSCALE,KJE.gLegend._iTOPBOTTOM_BORDER_WIDTH=3*KJE.gSCALE,KJE.gLegend._iBOX_SIDE_LENGTH=12*KJE.gSCALE,KJE.gLegend._iCIR_SIDE_LENGTH=7*KJE.gSCALE,KJE.gLegend._iBOX_TO_LABEL_SPACE=10*KJE.gSCALE,KJE.gLegend._sSHADOW_BLUR_X=2*KJE.gSCALE,KJE.gLegend._sSHADOW_BLUR_Y=2*KJE.gSCALE,KJE.gLegend._LINE_WIDTH=KJE.gSCALE,KJE.gLegend._LINE_SPACE=7.5*KJE.gSCALE,KJE.gLegend._PAD=KJE.gSCALE,KJE.gGraphPie._LINE_WIDTH=KJE.gSCALE,KJE.gGraphLine._CLICKABLE=7*KJE.gSCALE,KJE.gGraphLine._sSHADOW_BLUR=0,KJE.gGraphLine._LINE_WIDTH=3*KJE.gSCALE,KJE.gGraphLine._sSHADOW_BLUR_X=0,KJE.gGraphLine._sSHADOW_BLUR_Y=0,KJE.gGraphColumn._LINE_WIDTH=KJE.gSCALE,KJE.giGridLineWidth=KJE.gSCALE,KJE.gAxis.TICK_LENGTH=3*KJE.gSCALE,KJE.gAxis.LABEL_SPACE_LENGTH=5*KJE.gSCALE,KJE.gAxis.LINE_WIDTH=KJE.gSCALE,KJE.gAxis.LEFT=0,KJE.gAxis.RIGHT=1,KJE.gAxis.TOP=3,KJE.gAxis.BOTTOM=4,KJE.gGraphColumn.LINE_NONE=0,KJE.gGraphColumn.LINE_ON_FIRST_ONLY=2,KJE.gGraphColumn.LINE_ON_ALL=3,KJE.gGraphColumn._sSHADOW_COLOR="#929292",KJE.gGraphColumn._sSHADOW_BLUR=8,KJE.gGraphColumn._sSHADOW_BLUR_X=3*KJE.gSCALE,KJE.gGraphColumn._sSHADOW_BLUR_Y=2*KJE.gSCALE*-1,KJE.gGraphPie._LINE_JOIN="round",KJE.gGraphPie._LINE_COLOR="#000000",KJE.gGraphLine.AREA_NONE=0,KJE.gGraphLine.AREA_ALL=1,KJE.gGraphLine.AREA_FIRST_ONLY=2,KJE.gGraphLine.AREA_SECOND_ONLY=3,KJE.gGraphLine.AREA_BANDED=4,KJE.gGraphLine._sSHADOW_COLOR="#929292",KJE.sgvStr=function(e){return null==e?null:e.replace(/%%/g,'"').replace(/@@/g,"|").replace(/\^\^/g,",").replace(/!!/,"~")},KJE.spvStr=function(e){return null==e?null:e.replace?e.replace(/"/g,"%%").replace(/\|/g,"@@").replace(/,/g,"^^").replace(/~/g,"!!"):e},KJE.spvColor=function(e){return e||"#000000"},KJE.sgvColor=function(e){return e||"#000000"},KJE.sgv=function(e,t){return null==e?t:"null"==e?t:" "==e?t:"string"==typeof t?KJE.sgvStr(e):"boolean"==typeof t?""==e?t:"true"==e.trim():"number"==typeof t?parseFloat(e):void 0},KJE.sgvNumList=function(e){if(null==e)return null;if("null"==e)return null;if(""==e.trim())return null;for(var t=e.split(","),i=KJE.FloatArray(t.length),a=0;a<t.length;a++)i[a]=parseFloat(t[a]);return i},KJE.sgvStrList2=function(e){var t=[];if(null==e)t=null;else if("null"==e)t=null;else if(""==e.trim())t=null;else for(var i=e.split("~"),a=0;a<i.length;a++)t[a]=KJE.sgvStrList(i[a]);return t},KJE.sgvStrList=function(e){var t=[];if(null==e)t=null;else if("null"==e)t=null;else if(""==e.trim())t=null;else for(var i=e.split(","),a=0;a<i.length;a++)t[a]=KJE.sgvStr(i[a]);return t},KJE.spvStringList2=function(e){var t=KJE;if(null==e)return"null";for(var i=t.spvStringList(e[0]),a=1;a<e.length;a++)i+="~"+t.spvStringList(e[a]);return i},KJE.spvStringList=function(e){var t=KJE;if(null==e)return"null";for(var i=t.spvStr(e[0]),a=1;a<e.length;a++)i+=","+t.spvStr(e[a]);return i},KJE.spvColorList=function(e){var t=KJE;if(null==e)return"null";for(var i=t.spvStr(e[0]),a=1;a<e.length;a++)i+=","+t.spvColor(e[a]);return i},KJE.spvFloatList=function(e,t){var i=KJE;if(null==e)return"null";for(var a=""+i.input(e[0],t),r=1;r<e.length;r++)a+=","+i.input(e[r],t);return a},KJE.gNewGraph=function(e,t,i,a,r,s,n,o){var E=document.getElementById("KJE-C-"+t);if(E){var l=KJE;a=!l.parameters.get("GRAPH_OPEN"+Math.floor(l.gGraphs.length+1),!(l.VML&&!n)&&!a);var _=l.gGraphs[l.gGraphs.length]=new l.gCanvas(E,e,t,i,a,r,s,n,o);return e!=l.gPIE&&e!=l.gCATEGORIES||(_._bPopDetail=!1),_}return null},KJE.gCanvas=function(e,t,i,a,r,s,n,o,E){var l=this,_=KJE,h=l.wCanvas=document.getElementById("KJE-G-"+i);if(l._bPopDetail=!0,l._bPopCat=!0,l.wContainer=e,l.wContainer.className="KJEGraphContainer",l.wCanvas.className="KJEGraph",KJE.iGraphFixedWidth?l.wContainer.style.width=KJE.iGraphFixedWidth+"px":l.wContainer.style.width="100%","undefined"!=typeof G_vmlCanvasManager&&G_vmlCanvasManager.initElement(l.wCanvas),l._ctx=null,l.sTitle=n,l.TT=n,l.InCalculator=!o,l.bBorder=!E,l._sGraphType=t,l._gtGraphType=new _.gType(t),l.FONT_TITLE=_.ggetFont(_.gTITLE_FONT),l.FONT_BOLD=_.ggetFont(_.gBOLD_FONT),l.FONT_PLAIN=_.ggetFont(_.gPLAIN_FONT),l.FONT_LEGEND=_.ggetFont(_.gLEGEND_FONT),l.FONT_LEGEND_BOLD=_.ggetFont(_.gLEGEND_FONT_BOLD),l.FONT_LEGEND_TINY=_.ggetFont(_.gLEGEND_FONT_TINY),l._legend=new _.gGraphLegend(_.gLegend.RIGHT,this),l._grid=new _.gGrid(this),l._axisY=new _.gValueAxis(this),l._axisX=new _.gCategoryAxis(this),l._titleGraph=new _.gGraphTitle(l.sTitle),l._titleXAxis=new _.gGraphTitle(""),l._titleYAxis=new _.gGraphTitle(_.sCurrency),l._titleYAxis._iOrientation=_.gTitle.VERTICAL,l._vDataSeries=new Array,l._showItemLabel=!1,l._showItemLabelFmt=_.FMT_DOLLARS,l._showItemLabelDecimals=l._iLimit=0,l._showItemLabelOnTop=l._showLabelFactor=!0,l._iArea=_.gGraphLine.AREA_NONE,l._cGrid=_.gColorGrid,l._cGridBackground1=_.gColorGridBackground1,l._cGridBackground2=_.gColorGridBackground2,l._cAxisLine=_.gColorAxisLine,l._cTextColor=_.gColorText,l._sGraphCategories=l._sGraphCategoriesBold=l._sValueLabels=l._showItemValues=null,l._colorList=_.gColorList,l._iDataSeriesCount=0,a){var T=l.wTitle=document.createElement("DIV");T.className=l.InCalculator&&l.bBorder?"KJEGraphDropper":"KJEDropperReport",T.setAttribute("role","button"),l.InCalculator&&(T.tabIndex="0"),_.VML&&(T.style.paddingRight="0"),e.insertBefore(T,h)}if(l.wTitle&&!o&&(l.wTitle.addEventListener?(l.wTitle.addEventListener("click",function(e){l.toggle()},!1),l.wTitle.addEventListener("keypress",function(e){if(32==e.keyCode||13==e.keyCode)return KJE.Dropper.stopBubble(e)},!1),l.wTitle.addEventListener("keydown",function(e){if(32==e.keyCode||13==e.keyCode)return l.toggle(),KJE.Dropper.stopBubble(e)},!1)):(l.wTitle.attachEvent("onclick",function(e){l.toggle()}),l.wTitle.attachEvent("onkeypress",function(e){if(32==e.keyCode||13==e.keyCode)return KJE.Dropper.stopBubble(e)}),l.wTitle.attachEvent("onkeydown",function(e){if(32==e.keyCode||13==e.keyCode)return l.toggle(),KJE.Dropper.stopBubble(e)}))),h){var p=l._gtGraphType;h.addEventListener?(h.addEventListener("click",function(e){var t=KJE.getMouseCoord(e,h),i=p.getWedgeValue(t.x,t.y);i&&KJE.DataPointShow(e,i.s,i.x,i.y,h)},!1),h.addEventListener("mousemove",function(e){var t=KJE.getMouseCoord(e,h),i=p.getWedgeValue(t.x,t.y);i&&KJE.DataPointShow(e,i.s,i.x,i.y,h)},!1)):(h.attachEvent("onclick",function(e){var t=KJE.getMouseCoord(e,h),i=p.getWedgeValue(t.x,t.y);i&&KJE.DataPointShow(e,i.s,i.x,i.y,h)}),h.attachEvent("onmousemove",function(e){var t=KJE.getMouseCoord(e,h),i=p.getWedgeValue(t.x,t.y);i&&KJE.DataPointShow(e,i.s,i.x,i.y,h)}))}l.setBackground(s),this.setWidth(),l.setHeight(o?_.gHeightReport:_.gHeight),l.show(!r,l.sTitle)},KJE.gCanvas.prototype.setShown=function(e){this.wContainer.style.display="block",this.wContainer.style.width="100%",this.setWidth(!0)},KJE.gCanvas.prototype.setHidden=function(e){this.wContainer.style.display="none"},KJE.gCanvas.prototype.setTitle=function(e){this.sTitle=e},KJE.gCanvas.prototype.toggle=function(){if(!KJE.Error&&!KJE.InComplete&&!KJE.inCommandTask(!0)){var e=this,t=e.wCanvas,i=KJE.deviceNoTransition||KJE.VML?0:10;this._bShow?(KJE.VML&&(t.style.display="none"),t.style.overflow="hidden",this._bShow=!1,this.show(),setTimeout(function(){KJE.inCommandTask(!1)},100)):(this._count=0,KJE.VML?setTimeout(function(){t.style.overflow="hidden",t.style.display="block",t.style.visibility="visible",e.show(!0),e.paint(null,!0),setTimeout(function(){KJE.inCommandTask(!1)},10)},300):(t.style.overflow="hidden",t.style.display="block",t.style.visibility="visible",this.paint(null,!0),KJE._iInterval=setInterval(function(){e.open(e.iGraphHeight,i)},25)))}},KJE.gCanvas.prototype.show=function(e,t){if(this.wTitle){this._bShow=e;var i=this.wTitle,a=0;e?(a=this.iGraphHeight,i.setAttribute(KJE.g.sExpand,"true")):i.setAttribute(KJE.g.sExpand,"false"),i.innerHTML=KJE.setToggleTitleText(t||this._titleGraph.s,this,KJE.g,!this.InCalculator);var r=i.offsetHeight;this.wContainer.style.height=(r||28)+a+"px",this.InCalculator?KJE.Calculator.style.height=KJE.Main.offsetHeight+"px":KJE.Calculator.style.height="0px"}},KJE.gCanvas.prototype.open=function(e,t){if(this._count>=t)return clearInterval(KJE._iInterval),this.show(!0),void setTimeout(function(){KJE.inCommandTask(!1)},100);this._count>=t-2&&(this._count-=.5),this._count++;var i=e*(this._count/t);this.wContainer.style.height=this.wTitle.offsetHeight+i+"px",this.InCalculator&&(KJE.Calculator.style.height=KJE.Main.offsetHeight+"px")},KJE.gCanvas.prototype.setProperty=function(e){var t=e.split("|"),i=KJE.sgv,a=KJE.sgvStrList,r=this;r.removeAll();for(var s=0;s<t.length;s++)switch(s){case 0:t[s]!=r._gtGraphType._iGraphType&&(this._gtGraphType=new KJE.gType(t[s]));break;case 1:r._showItemLabel=i(t[s],r._showItemLabel);break;case 2:r._showItemLabelFmt=i(t[s],r._showItemLabelFmt);break;case 3:r._showItemLabelDecimals=i(t[s],r._showItemLabelDecimals);break;case 4:r._showItemLabelOnTop=i(t[s],r._showItemLabelOnTop);break;case 5:r._iArea=i(t[s],r._iArea);break;case 6:r._cBackground=i(t[s],r._cBackground);break;case 7:r._cGrid=i(t[s],r._cGrid);break;case 8:r._cGridBackground1=i(t[s],r._cGridBackground1);break;case 9:r._cGridBackground2=i(t[s],r._cGridBackground2);break;case 10:r._cAxisLine=i(t[s],r._cAxisLine);break;case 11:r._cTextColor=i(t[s],r._cTextColor);break;case 12:r._iLimit=i(t[s],r._iLimit);break;case 13:r._sGraphCategories=a(t[s]);break;case 14:r._sGraphCategoriesBold=a(t[s]);break;case 15:r._sValueLabels=a(t[s]);break;case 16:r._colorList=a(t[s]);break;case 17:r._showItemValues=i(t[s],r._showItemValues);break;case 18:r._bPopDetail=i(t[s],r._bPopDetail);break;case 19:r._bPopCat=i(t[s],r._bPopCat);break;case 20:r._showLabelFactor=i(t[s],r._showLabelFactor)}},KJE.gCanvas.prototype.getProperty=function(){var e=KJE.spvStringList,t=this,i=KJE;return t._gtGraphType._iGraphType+"|"+t._showItemLabel+"|"+t._showItemLabelFmt+"|"+t._showItemLabelDecimals+"|"+t._showItemLabelOnTop+"|"+t._iArea+"|"+i.spvColor(t._cBackground)+"|"+i.spvColor(t._cGrid)+"|"+i.spvColor(t._cGridBackground1)+"|"+i.spvColor(t._cGridBackground2)+"|"+i.spvColor(t._cAxisLine)+"|"+i.spvColor(t._cTextColor)+"|"+t._iLimit+"|"+e(t._sGraphCategories)+"|"+e(t._sGraphCategoriesBold)+"|"+e(t._sValueLabels)+"|"+i.spvColorList(t._colorList)+"|"+i.spvStringList2(t._showItemValues)+"|"+t._bPopDetail+"|"+t._bPopCat+"|"+t._showLabelFactor},KJE.gCanvas.prototype.getColor=function(e){return e-=1,e%=this._colorList.length,this._colorList[e]},KJE.gCanvas.prototype.blank=function(){this.removeAll(),this.paint(),this.wTitle&&this.setTitleGraph(KJE.gPleaseComplete)},KJE.gCanvas.prototype.getDataSeriesCount=function(){return this._iDataSeriesCount},KJE.gCanvas.prototype.getDataProperties=function(){for(var e="",t=0;t<this._iDataSeriesCount;t++)e+="|"+this._vDataSeries[t].getProperty();return e.substring(1)},KJE.gCanvas.prototype.getValueCount=function(){for(var e=this._iDataSeriesCount,t=this._iLimit,i=0;e;)(t>(i=this._vDataSeries[e-1].getValueCount())||0==t)&&(t=i),e--;return t},KJE.gCanvas.prototype.getMinValue=function(){if(null==this._vDataSeries)return 0;for(var e=this._vDataSeries[0].getMinValue(this._iLimit),t=e,i=1;i<this._iDataSeriesCount;i++)(t=this._vDataSeries[i].getMinValue(this._iLimit))<e&&(e=t);return e},KJE.gCanvas.prototype.getMaxValue=function(){if(null==this._vDataSeries)return 0;var e=0,t=0;if(this._gtGraphType._iGraphType==KJE.gSTACKED){for(var i=new Array,a=0;a<this._vDataSeries.length;a++)for(var r=this._vDataSeries[a]._fValues,s=0;s<r.length;s++)i[s]=r[s]+(i[s]?i[s]:0);return Math.max.apply(Math,i)}for(t=e=this._vDataSeries[0].getMaxValue(this._iLimit),s=1;s<this._iDataSeriesCount;s++)(t=this._vDataSeries[s].getMaxValue(this._iLimit))>e&&(e=t);return e},KJE.gCanvas.prototype.add=function(e){if(null==e);else if("string"==typeof e)if(""==e.trim());else for(var t=e.split("|"),i=0;i<t.length;i++)this._vDataSeries[this._iDataSeriesCount++]=new KJE.gGraphDataSeries(t[i],null,null,null);else this._vDataSeries[this._iDataSeriesCount]=e,this._iDataSeriesCount++},KJE.gCanvas.prototype.removeAll=function(){this._vDataSeries=new Array,this._iDataSeriesCount=0,this._iLimit=0,this._gtGraphType.syncSetup(this),this._legend._cBGColor=null},KJE.gCanvas.prototype.paint=function(e,t){if(this.sTitle&&this.setTitleGraph(this.sTitle),this.wCanvas.getContext&&(t||this._bShow)){var i=this.wCanvas.getContext("2d");if(0!=i.canvas.width&&0!=i.canvas.height){i&&(this._ctx=i);var a=this._ctx.canvas.width,r=this._ctx.canvas.height;0!=this._iDataSeriesCount?(i.fillStyle=this._cBackground,i.fillRect(0,0,a,r),this._gtGraphType.paint(this._ctx,a,r)):(i.fillStyle=this._cBackground,i.fillRect(0,0,a,r))}}},KJE.gCanvas.prototype.setGraphCategories=function(e){this._sGraphCategories=e},KJE.gCanvas.prototype.setBackground=function(e){this.wContainer.style.backgroundColor=e,this._cBackground=e},KJE.gCanvas.prototype.setWidth=function(e,t){var i=0;t?i=t:(this.wContainer.style.width="100%",(i=this.wContainer.clientWidth)||(i=KJE.CalculatorWidth)),i>KJE.gWidthMax&&(i=KJE.gWidthMax),i-=KJE.gWidthAdjust,this.wCanvas.style.width=this.wContainer.style.width=i+"px",this.wCanvas.width=i*KJE.gSCALE,this.iWidth=i,e&&this.paint()},KJE.gCanvas.prototype.setHeight=function(e){this.wCanvas.style.height=e+"px",this.iGraphHeight=e,this.wCanvas.height=e*KJE.gSCALE},KJE.gCanvas.prototype.getBackground=function(){return this._cBackground},KJE.gCanvas.prototype.setTitleGraph=function(e){var t=this;t._titleGraph.s!=e&&(t.wTitle&&(t.wTitle.innerHTML=KJE.setToggleTitleText(e,t,KJE.g,!t.InCalculator),t.InCalculator&&(KJE.Calculator.style.height=KJE.Main.offsetHeight+"px")),t._titleGraph.setText(e))},KJE.gCanvas.prototype.setTitleTemplate=function(){for(var e=this.TT,t=0;t<arguments.length;t++)e=e.replace("KJE"+(t+1),arguments[t]);this.sTitle=e},KJE.gCanvas.prototype.getFormat=function(e,t,i){var a="",r=this._showItemLabelFmt,s=this._showItemValues;return null==s?a=KJE.format[r](e/(r==KJE.FMT_PERCENT&&this._showLabelFactor?100:1),this._showItemLabelDecimals):s.length>t&&s[t].length>i&&(a=s[t][i]),a},KJE.gGraphDataSeries=function(e,t,i,a,r,s,n){var o=this;o._iDecimals=n||2;var E=e instanceof Array;if(!E&&KJE.TypedArray&&(E=e instanceof Float64Array),E)o._fValues=e,o._sSeriesTitle=t,o._cColor=i,o._sSeriesTitleBold=a||"",o._sSeriesPop=r||t,o._bNoPopDetails=!!s;else for(var l=e.split("~"),_=l.length,h=KJE.sgv,T=0;T<_;T++)switch(T){case 0:o._cColor=h(l[T],"#0000FF");break;case 1:o._sSeriesTitle=h(l[T],"");break;case 2:o._sSeriesTitleBold=h(l[T],"");break;case 3:o._fValues=KJE.sgvNumList(l[T]);break;case 4:o._sSeriesPop=h(l[T],o._sSeriesTitle);break;case 5:o._bNoPopDetails=h(l[T],!1)}},KJE.gGraphDataSeries.prototype.getProperty=function(){var e=KJE;return this._cColor+"~"+e.spvStr(this._sSeriesTitle)+"~"+e.spvStr(this._sSeriesTitleBold)+"~"+e.spvFloatList(this._fValues,this._iDecimals)+"~"+e.spvStr(this._sSeriesPop)},KJE.gGraphDataSeries.prototype.getValueCount=function(){return null==this._fValues?0:this._fValues.length},KJE.gGraphDataSeries.prototype.getMinValue=function(e){var t=this._fValues;if(null==t)return 0;var i=t[0],a=t.length;a>e&&0!=e&&(a=e);for(var r=1;r<a;r++)i>t[r]&&(i=t[r]);return i},KJE.gGraphDataSeries.prototype.getMaxValue=function(e){var t=this._fValues;if(null==t)return 0;var i=t.length;i>e&&0!=e&&(i=e);for(var a=t[0],r=i-1;r>0;r--)a<t[r]&&(a=t[r]);return a},KJE.gGraphTitle=function(e){var t=this;t._iOrientation=KJE.gTitle.HORIZONTAL,t.s=e,t.f="11pt Helvetica",t.c="#000000",t.bShow=!0,t.sText=""},KJE.gGraphTitle.prototype.setProperty=function(e){this.setText(KJE.sgv(e,""))},KJE.gGraphTitle.prototype.getProperty=function(){return KJE.spvStr(this.s)},KJE.gGraphTitle.prototype.paint=function(e,t,i,a,r){e.font=this.f,e.fillStyle=this.c,e.shadowBlur="",e.shadowColor="",e.shadowOffsetX="",e.shadowOffsetY="",e.textAlign="center",e.textBaseline="middle",0!=this._iWidth&&(this._iOrientation==KJE.gTitle.VERTICAL?(e.save(),e.rotate(-Math.PI/2),e.fillText(KJE.FTR(this.sText),-i-r/2,t+a/2),e.restore()):e.fillText(KJE.FTR(this.sText),t+a/2,i+r/2))},KJE.gGraphTitle.prototype.setText=function(e){this.s=e},KJE.gGraphTitle.prototype.setFont=function(e){this.f=e},KJE.gGraphTitle.prototype.setColor=function(e){this.c=e},KJE.gGraphTitle.prototype.setTitle=function(e,t){var i=0,a=0,r=t||"";if(""!=(r+=""==r&&this.s==KJE.sCurrency?"":this.s||"")&&this.bShow){e.font=this.f;var s=a=KJE.gGetFontHeight(e)+10;i=e.measureText(KJE.FTR(r)).width,this._iOrientation==KJE.gTitle.VERTICAL&&(a=i,i=s)}this.sText=r,this._iHeight=a,this._iWidth=i},KJE.gGraphLegend=function(e,t){this._gGraph=t;var i=this;i._iShape=KJE.gLegend.SQUARE_LEGEND,i._iOrientation=e,i._legendType=KJE.gLegend.DATA_SERIES_LEGEND,i._border=!1,i._cBGColor=null,i._iLegendWidth=0,i.LINE_SPACE=KJE.gLegend._LINE_SPACE,i._bShow=!0,i._cColor="#000000",i._iXOffset=0,i._iYOffset=0,i._iWidthOffset=0,i._iHeightOffset=0,i._iMaxLegendLength=0,i._iWidth=0,i._iHeight=0,i._iFontHeight=0,i._iColorBoxYOffset=0,i._iLabelOffset=0,i._iColorBoxOffset=0,i._iBORDER_WIDTH=0},KJE.gGraphLegend.prototype.setProperty=function(e){for(var t=e.split("|"),i=KJE.sgv,a=this,r=0;r<t.length;r++)switch(r){case 0:a._cBGColor=i(t[r],a._cBGColor);break;case 1:a._iShape=i(t[r],a._iShape);break;case 2:a._iOrientation=i(t[r],a._iOrientation);break;case 3:a._border=i(t[r],a._border);break;case 4:a._iLegendWidth=i(t[r],a._iLegendWidth);break;case 5:a.LINE_SPACE=i(t[r],a.LINE_SPACE);break;case 6:a._bShow=i(t[r],a._bShow)}},KJE.gGraphLegend.prototype.getProperty=function(){var e=this;return null==e._cBGColor&&(e._cBGColor=e._gGraph.getBackground()),e._cBGColor+"|"+e._iShape+"|"+e._iOrientation+"|"+e._border+"|"+e._iLegendWidth+"|"+e.LINE_SPACE+"|"+e._bShow},KJE.gGraphLegend.prototype.setVisible=function(e){this._bShow=e},KJE.gGraphLegend.prototype.useOrientation=function(e){var t=this._iOrientation;return this.bLegendSmall=!1,e/KJE.gSCALE<KJE.gLegendMin&&(t=KJE.gLegend.BOTTOM,this.bLegendSmall=!0),t},KJE.gGraphLegend.prototype.paint=function(e,t,i,a,r,s,n,o,E){var l=this._iHeight,_=this._iWidth,h=this._iBORDER_WIDTH,T=KJE.gLegend._iTOPBOTTOM_BORDER_WIDTH;s||(s=0),n||(n=0),o||(o=0),E||(E=0),e.textAlign="left",e.textBaseline="middle";var p=KJE.gLegend;switch(this.useOrientation(e.canvas.width)){case p.TOP:r=l;break;case p.TOP_GRID_ALIGN:r=l,a=_,t=s;break;case p.BOTTOM:i+=r-l,r=l;break;case p.LEFT:n>0&&(i=n),E>0&&(r=E),a=_;break;case p.RIGHT:n>0&&(i=n),E>0&&(r=E),t+=a-_,a=_;break;case p.TOP_LEFT:r=l,a=_;break;case p.BOTTOM_LEFT:i+=r-l,r=l,a=_;break;case p.TOP_RIGHT:t+=a-_,r=l,a=_;break;case p.BOTTOM_RIGHT:i+=r-l,t+=a-_,r=l,a=_;break;case p.GRID_TOP_RIGHT:t=s-T+o-_,i=n+T,a=_,r=l;break;case p.GRID_TOP_LEFT:t=s+T,i=n+T,a=_,r=l;break;case p.GRID_BOTTOM_RIGHT:t=s-T+o-_,i=n-T+E-l,a=_,r=l;break;case p.GRID_BOTTOM_LEFT:t=s+T,i=n-T+E-l,a=_,r=l;break;case p.GRID_TOP:t=s,i=n+h,a=o,r=l;break;case p.GRID_BOTTOM:t=s,i=n-h+E-l,a=o,r=l;break;case p.GRID_LEFT:t=s+h,i=n,a=_,r=E;break;case p.GRID_RIGHT:t=s-h+o-_,i=n,a=_,r=E}if(this._bShow){var u=t+a/2-_/2,d=i+r/2-l/2;if(this._border&&(e.fillStyle=this._cBGColor,e.fillRect(u-.5,d-.5,_,l),e.strokeStyle=this._gGraph._cTextColor,e.strokeRect(u-.5,d-.5,_,l)),this._legendType<=p.DATA_SERIES_LEGEND)return void this.drawDataSeriesLegend(e,u,d);this.drawCategoryLegend(e,u,d)}},KJE.gGraphLegend.prototype.drawDataSeriesLegend=function(e,t,i){for(var a=this._gGraph._vDataSeries.length,r=new Array(a),s=new Array(a),n=new Array(a),o=this._gGraph._vDataSeries,E=0;E<a;E++)r[E]=o[E]._cColor,s[E]=o[E]._sSeriesTitle+(KJE.VML?o[E]._sSeriesTitleBold:""),KJE.VML||(n[E]=o[E]._sSeriesTitleBold);this.drawLegend(e,t,i,r,s,n)},KJE.gGraphLegend.prototype.drawCategoryLegend=function(e,t,i){var a=this._gGraph._sGraphCategories,r=this._gGraph._sGraphCategoriesBold;if(KJE.VML&&null!=r){for(var s=this._gGraph._sGraphCategories.length,n=new Array(s),o=0;o<s;o++)n[o]=a[o]+r[o];r=null,a=n}this.drawLegend(e,t,i,this._gGraph._colorList,a,r)},KJE.gGraphLegend.prototype.drawLegend=function(e,t,i,a,r,s){var n=KJE.gLegend,o=i+n._iSIDE_BORDER_WIDTH,E=this._iShape==n.SQUARE_LEGEND,l=0,_=this.LINE_SPACE+this._iFontHeight,h=this._iColorBoxOffset,T=this._iColorBoxYOffset,p=n._iSIDE_BORDER_WIDTH,u=n._PAD,d=this.bLegendSmall?this._gGraph.FONT_LEGEND_TINY:this._gGraph.FONT_LEGEND_BOLD,c=this.bLegendSmall?this._gGraph.FONT_LEGEND_TINY:this._gGraph.FONT_LEGEND,R=this._legendType==n.BANDED_LEGEND,S=r.length,I=KJE.FTR;e.font=c,e.lineWidth=n._LINE_WIDTH,e.shadowColor=n._sSHADOW_COLOR,e.shadowOffsetX=n._sSHADOW_BLUR_X,e.shadowOffsetY=n._sSHADOW_BLUR_Y;for(var A=0;A<S;A++){if(e.fillStyle=a[A],E)e.fillRect(t+h,o+T,p,p);else{var g=n._iCIR_SIDE_LENGTH;e.beginPath(),e.arc(t+h+g,o+T+g,g,0,2*Math.PI,!0),e.closePath(),e.fill()}o+=_,R&&A++}e.lineWidth=n._LINE_WIDTH,e.shadowBlur="0",e.shadowColor=n._sSHADOW_COLOR,e.shadowOffsetX="0",e.shadowOffsetY="0",e.fillStyle=this._cTextColor,o=i+p+T+p/2+u;var K=t+this._iLabelOffset;for(A=0;A<S;A++)e.fillText(I(r[A]),K,o),s&&s[A]&&(l=e.measureText(I(r[A])).width,e.font=d,e.fillText(I(s[A]),K+l,o),e.font=c),o+=_,R&&A++},KJE.gGraphLegend.prototype.setSize=function(e){var t=KJE.gLegend,i=this;i._iWidth=0,i._iHeight=0,i._iXOffset=0,i._iYOffset=0;var a=i._iWidthOffset=i._iBORDER_WIDTH=KJE.gBORDER_WIDTH;if(i._iHeightOffset=0,i._bShow){var r=t._iSIDE_BORDER_WIDTH,s=i._gGraph,n=i.LINE_SPACE,o=i._iFontHeight,E=t._PAD;i._iColorBoxOffset=r+E,i._iLabelOffset=r+r+t._iBOX_TO_LABEL_SPACE+2*E;var l=i._iWidth=i._iLabelOffset+i._iMaxLegendLength+r,_=i._iHeight=r+(o+n)*(i._legendType==t.CATEGORY_LEGEND?null==s._sGraphCategories?0:s._sGraphCategories.length:s.getDataSeriesCount())-n+r;switch(i._iColorBoxYOffset=Math.ceil((o-r)/2)+E,i.useOrientation(e.canvas.width)){case t.TOP:case t.TOP_GRID_ALIGN:i._iYOffset=_+a;case t.BOTTOM:i._iHeightOffset=_+a;break;case t.LEFT:case t.TOP_LEFT:case t.BOTTOM_LEFT:i._iXOffset=l+a,i._iWidthOffset=l+a+a;break;case t.RIGHT:case t.TOP_RIGHT:case t.BOTTOM_RIGHT:i._iWidthOffset=l+a}}},KJE.gGraphLegend.prototype.setINF=function(e){oThis=this,oThis._cColor=oThis._gGraph._cTextColor,oThis._cTextColor=oThis._gGraph._cTextColor,null==oThis._cBGColor&&(oThis._cBGColor=oThis._gGraph._cBackground),oThis._iMaxLegendLength=0,oThis._iFontHeight=0,oThis._iFontDescent=0;oThis.useOrientation(e.canvas.width);var t=oThis.bLegendSmall?oThis._gGraph.FONT_LEGEND_TINY:oThis._gGraph.FONT_LEGEND_BOLD,i=oThis.bLegendSmall?oThis._gGraph.FONT_LEGEND_TINY:oThis._gGraph.FONT_LEGEND;if(oThis._bShow){if(oThis._iLegendWidth>0)oThis._iMaxLegendLength=oThis._iLegendWidth;else{e.font=i;var a=0,r="",s=oThis._gGraph._vDataSeries.length,n="";if(oThis._legendType!=KJE.gLegend.CATEGORY_LEGEND)for(var o=0;o<s;o++)n=oThis._gGraph._vDataSeries[o]._sSeriesTitle,r=(r=oThis._gGraph._vDataSeries[o]._sSeriesTitleBold)||"",a=e.measureText(KJE.FTR(n+(KJE.VML?r:""))).width,""==r||KJE.VML||(e.font=oThis.FONT_LEGEND_BOLD,a+=e.measureText(KJE.FTR(r)).width,e.font=i),a>oThis._iMaxLegendLength&&(oThis._iMaxLegendLength=a);else if(null!=oThis._gGraph._sGraphCategories){s=oThis._gGraph._sGraphCategories.length;for(var E=null==oThis._gGraph._sGraphCategoriesBold?0:oThis._gGraph._sGraphCategoriesBold.length,l=0;l<s;l++)n=oThis._gGraph._sGraphCategories[l],r=l<E?oThis._gGraph._sGraphCategoriesBold[l]:"",a=e.measureText(KJE.FTR(n+(KJE.VML?r:""))).width,l<E&&(e.font=t,a+=e.measureText(KJE.FTR(r)).width,e.font=i),a>oThis._iMaxLegendLength&&(oThis._iMaxLegendLength=a)}}oThis._iFontHeight=KJE.gGetFontHeight(e)}},KJE.gValueAxis=function(e){this._gGraph=e,this._font=e.FONT_PLAIN,this._bShow=!0,this._cColor="#FFFFFF",this._cLine="#000000",this._cTextColor="#000000",this._iFormat=KJE.FMT_DOLLARS,this._iXOffset=0,this._iYOffset=0,this._iLabelCount=0,this._iMaxLabelLength=0,this._iMaxLength=0,this._iWidth=0,this._iHeight=0,this._iPixelsPerIncrement=0,this._iDataLength=0,this._fValuePerPixel=0,this._iFontHeight=0,this._iFormat=KJE.FMT_DOLLARS,this._bAutoMaximum=!0,this._bAutoMinimum=!1,this._axisMinimum=0,this._axisMaximum=100,this._sUnits="",this._iUnitFactor=1,this._fAbsoluteMinValue=0,this._fAbsoluteMaxValue=0,this._fRange=0,this._fMinValue=0,this._fMaxValue=0,this._iIncrement=0,this._iFactor=0,this._fIncrement=0,this._iZeroIntersects=0},KJE.gValueAxis.prototype.setProperty=function(e){for(var t=e.split("|"),i=KJE.sgv,a=0;a<t.length;a++)switch(a){case 0:this._bShow=i(t[a],this._bShow);break;case 1:this._iFormat=i(t[a],this._iFormat);break;case 2:this._bAutoMaximum=i(t[a],this._bAutoMaximum);break;case 3:this._bAutoMinimum=i(t[a],this._bAutoMinimum);break;case 4:this._axisMaximum=i(t[a],this._axisMaximum);break;case 5:this._axisMinimum=i(t[a],this._axisMinimum)}},KJE.gValueAxis.prototype.getProperty=function(){return this._bShow+"|"+this._iFormat+"|"+this._bAutoMaximum+"|"+this._bAutoMinimum+"|"+KJE.number(this._axisMaximum,2)+"|"+KJE.number(this._axisMinimum,2)},KJE.gValueAxis.prototype.getLabel=function(e){return null==this._gGraph._sValueLabels?KJE.format[this._iFormat](e/this._iUnitFactor,this._fAbsoluteMaxValue-this._fAbsoluteMinValue<=5?2:0):this._gGraph._sValueLabels[Math.floor(e)]},KJE.gValueAxis.prototype.getNextIncrement=function(e){var t=this._iIncrement;return null==this._gGraph._sValueLabels?this._fRange>100?e-t*this._iFactor:Math.round(e*this._iFactor-t)/this._iFactor:e-1},KJE.gValueAxis.prototype.paint=function(e,t,i){if(this._bShow){var a=KJE.gAxis;e.font=this._font;for(var r=this._iWidth-a.TICK_LENGTH-a.LINE_WIDTH,s=a.LABEL_SPACE_LENGTH+a.TICK_LENGTH,n=0,o=this.getStartingPlotValue(),E=0;E<=this._iLabelCount;E++)e.strokeStyle=this._cTextColor,this._iPixelsPerIncrement<this._iFontHeight?E%2!=0&&this.drawText(e,t,i,this.getLabel(o),s,n):this.drawText(e,t,i,this.getLabel(o),s,n),e.strokeStyle=this._cColor,e.beginPath(),this.drawLine(e,t,i,r,n,r+a.TICK_LENGTH,n,this._cLine),n+=this._iPixelsPerIncrement,o=this.getNextIncrement(o);this.drawLine(e,t,i,r+a.TICK_LENGTH,0,r+a.TICK_LENGTH,this._iDataLength,this._cLine)}},KJE.gValueAxis.prototype.drawLine=function(e,t,i,a,r,s,n,o){e.strokeStyle=o,e.moveTo(a+t+.5,r+i+.5),e.lineTo(s+t+.5,n+i+.5),e.stroke()},KJE.gValueAxis.prototype.drawText=function(e,t,i,a,r,s){var n=e.measureText(KJE.FTR(a)).width,o=s+this._iFontHeight/2,E=this._iWidth-r-n;e.textAlign="left",e.textBaseline="bottom",e.font=this._font,e.fillText(KJE.FTR(a),t+E,i+o)},KJE.gValueAxis.prototype.setSize=function(e,t){e.font=this._font,e.fillStyle=this._cColor,this._iPixelsPerIncrement=Math.floor(t/this._iLabelCount),this._iDataLength=this._iPixelsPerIncrement*this._iLabelCount,this._iMaxLength=t,this._iHeight=this._iDataLength;for(var i=0,a=this.getStartingPlotValue(),r=0;r<=this._iLabelCount;r++){if(0==a){this._iZeroIntersects=i;break}a=this.getNextIncrement(a),i+=this._iPixelsPerIncrement}var s=KJE.gAxis;this._iWidth=this._iMaxLabelLength+s.LABEL_SPACE_LENGTH+s.TICK_LENGTH+s.LINE_WIDTH,this._iYOffset=this._bShow?this._iHeight:0,this._iXOffset=this._bShow?this._iWidth:0,this._fValuePerPixel=this._iDataLength/this._fRange},KJE.gValueAxis.prototype.setFormat=function(e){this._iFormat=e},KJE.gValueAxis.prototype.setINF=function(e){this._cLine=this._gGraph._cAxisLine,this._cColor=this._gGraph._cTextColor,this._cTextColor=this._gGraph._cTextColor,this._iFontHeight=KJE.gGetFontHeight(e),e.font=this._font,e.strokeStyle=this._cTextColor,this._fAbsoluteMaxValue=this._bAutoMaximum?this._gGraph.getMaxValue():this._axisMaximum,this._fAbsoluteMinValue=this._bAutoMinimum?this._gGraph.getMinValue():this._axisMinimum,this._fAbsoluteMaxValue<1e-5&&this._fAbsoluteMaxValue>-1e-5&&this._fAbsoluteMinValue<1e-5&&this._fAbsoluteMinValue>-1e-5?this._fAbsoluteMaxValue=25:this._fAbsoluteMaxValue<1&&this._fAbsoluteMaxValue>-1&&this._fAbsoluteMinValue<1&&this._fAbsoluteMinValue>-1&&this._iFormat==KJE.FMT_DOLLARS&&(this._fAbsoluteMaxValue=1);var t=this._fAbsoluteMaxValue-this._fAbsoluteMinValue;if(this._iFactor=1,this._iIncrement=1,this._fIncrement=1,null!=this._gGraph._sValueLabels);else{var i=t;if(i>100)for(;i>200;)this._iFactor*=10,i=t/this._iFactor;else for(;i<=20;)this._iFactor*=10,i=t*this._iFactor;this._iIncrement=i>100?20:i>50?10:5,this._fIncrement=t>100?this._iIncrement*this._iFactor:this._iIncrement/this._iFactor}if(0==this._fAbsoluteMinValue?this._fMinValue=0:this._fAbsoluteMinValue%this._fIncrement==0?this._fMinValue=this._fAbsoluteMinValue:this._fMinValue=Math.floor(this._fAbsoluteMinValue/this._fIncrement)*this._fIncrement,0==this._fAbsoluteMaxValue?this._fMaxValue=0:this._fAbsoluteMaxValue%this._fIncrement==0?this._fMaxValue=this._fAbsoluteMaxValue:(this._fMaxValue=Math.ceil(this._fAbsoluteMaxValue/this._fIncrement),this._fMaxValue=Math.round(this._iFactor*this._fMaxValue*this._fIncrement)/this._iFactor),this._fRange=this._fMaxValue-this._fMinValue,0==this._fRange&&(this.fRange=this._fIncrement),null==this._gGraph._sValueLabels?this._iLabelCount=Math.round(this._fRange/this._fIncrement):this._iLabelCount=this._gGraph._sValueLabels.length-1,this.setGraphUnits(this._fMaxValue,this._fMinValue),this._bShow){for(var a=this.getStartingPlotValue(),r=0,s=0,n=this._iLabelCount,o=0;o<=n;o++)r=(s=e.measureText(KJE.FTR(this.getLabel(a))).width)>r?s:r,a=this.getNextIncrement(a);var E=KJE.gAxis;this._iMaxLabelLength=r,this._iFontHeight=KJE.gGetFontHeight(e),this._iWidth=this._iMaxLabelLength+E.LABEL_SPACE_LENGTH+E.TICK_LENGTH+E.LINE_WIDTH}},KJE.gValueAxis.prototype.getStartingPlotValue=function(){return null==this._gGraph._sValueLabels?this._fMaxValue:this._gGraph._sValueLabels.length-1},KJE.gValueAxis.prototype.setVisible=function(e){this._bShow=e},KJE.gValueAxis.prototype.getDataLength=function(){return this._iDataLength},KJE.gValueAxis.prototype.setGraphUnits=function(e,t){var i=KJE;t=t||0;for(var a=i.gScaleLabelMax,r=i.gScaleLabelFactor,s=a.length-1;s>=0;s--)if(e>=a[s]||t<=-1*a[s]){this._sUnits=i.gScaleLabel[s],this._iUnitFactor=r[s];break}return this._iUnitFactor},KJE.gCategoryAxis=function(e){this._gGraph=e,this._bShow=!0,this._cColor="#FFFFFF",this._cLine="#000000",this._cTextColor="#000000",this._fFont="11pt Helvetica",this._iXOffset=0,this._iYOffset=0,this._iLabelCount=0,this._iMaxLabelLength=0,this._iWidth=0,this._iHeight=0,this._iPixelsPerIncrement=0,this._iDataLength=0,this._iFontHeight=0,this._iFontOffset=0,this._fSpacingPercent=.25,this._fDataGapPercent=0,this._bNoOffset=!1,this._sCategories=new Array,this._iCategoryCount,this._iBarCount,this._iBarWidth,this._iSpaceWidth,this._iGapWidth,this._iBarsPerCategory,this._iAxisSegmentLength,this._bVertical=!1},KJE.gCategoryAxis.prototype.setProperty=function(e){for(var t=e.split("|"),i=KJE.sgv,a=0;a<t.length;a++){switch(a){case 0:this._bShow=i(t[a],this._bShow);break;case 1:this._fSpacingPercent=i(t[a],this._fSpacingPercent);break;case 2:this._fDataGapPercent=i(t[a],this._fDataGapPercent)}a++}},KJE.gCategoryAxis.prototype.getProperty=function(){return this._bShow+"|"+KJE.input(this._fSpacingPercent,2)+"|"+KJE.input(this._fDataGapPercent,2)},KJE.gCategoryAxis.prototype.paint=function(e,t,i,a,r){var s=this;if(s._bShow){var n=KJE.gAxis;i+=r,e.font=s._fFont;var o=n.TICK_LENGTH,E=n.LABEL_SPACE_LENGTH+n.LINE_WIDTH+n.TICK_LENGTH,l=o+n.LABEL_SPACE_LENGTH,_=0,h=0,T=1,p=s._sCategories,u=s._iCategoryCount,d=s._bVertical,c=(d?s._iFontHeight:s._iMaxLabelLength)+E;c>s._iAxisSegmentLength&&u>2&&(T=Math.ceil(u/(s._iDataLength/c))),e.strokeStyle=s._cLine,e.beginPath();for(var R=0;R<u;R++)h=s.getCategoryLeft(R),0==R&&(h-=n.LINE_WIDTH),e.moveTo(h+t+.5,0+i+.5),e.lineTo(h+t+.5,o+i+.5);if(e.moveTo(t+.5,i+.5),e.lineTo(s._iWidth+t+.5,i+.5),e.stroke(),p){e.setStyle=s._cTextColor,d?(e.save(),e.rotate(-Math.PI/2),e.textAlign="right",e.textBaseline="middle"):(e.textAlign="center",e.textBaseline="top"),s.getCatOffset=s._bNoOffset?s.getCategoryLeft:s.getCategoryMid;var S=p.length,I=KJE.FTR;for(R=0;R<u;R++)_=s.getCatOffset(R),(T<2||R%T==0&&R<u-.9*T&&R!=u-2||R==u-1)&&R<S&&(d?e.fillText(I(p[R]),-i-l-.5,t+_-.5):e.fillText(I(p[R]),t+_+.5,i+l+.5));d&&e.restore()}}},KJE.gCategoryAxis.prototype.drawLine=function(e,t,i,a,r,s,n,o){e.beginPath(),e.strokeStyle=o,e.moveTo(a+t+.5,r+i+.5),e.lineTo(s+t+.5,n+i+.5),e.stroke()},KJE.gCategoryAxis.prototype.setSize=function(e,t){e.font=this._fFont;var i=this._gGraph.getValueCount()-(this._bNoOffset?1:0),a=this._gGraph.getDataSeriesCount(),r=a*i,s=2*i,n=(a-1)*i;this._iWidth=t,this._iDataLength=t;var o=Math.floor(this._iWidth/Math.round(s*this._fSpacingPercent+r+n*this._fDataGapPercent)),E=o*this._fDataGapPercent,l=Math.floor((this._iDataLength-o*r-E*n)/s);if(this._iAxisSegmentLength=2*l+E*(a-1)+o*a,this._iXOffset=0,this._iYOffset=0,this._bShow){var _=KJE.gAxis;this._iMaxLabelLength>this._iAxisSegmentLength&&this._iMaxLabelLength>e.measureText("9999").width&&this._iMaxLabelLength<e.measureText("9999999999999999999").width?(this._iHeight=this._iMaxLabelLength+_.TICK_LENGTH,this._bVertical=!0):(this._iHeight=this._iFontHeight+_.LABEL_SPACE_LENGTH+_.TICK_LENGTH+_.LINE_WIDTH,this._bVertical=!1)}else this._iHeight=0;this._iBarsPerCategory=a,this._iBarWidth=o,this._iGapWidth=E,this._iSpaceWidth=l},KJE.gCategoryAxis.prototype.setINF=function(e){if(this._iCategoryCount=this._gGraph.getValueCount(),this._sCategories=this._gGraph._sGraphCategories,this._fFont=this._gGraph.FONT_PLAIN,this._cColor=this._gGraph._cTextColor,this._cTextColor=this._gGraph._cTextColor,this._cLine=this._gGraph._cAxisLine,this._iFontHeight=0,this._iMaxLabelLength=0,this._iHeight=0,this._bShow){var t=KJE.gAxis;this._sCategories?this._iFontHeight=KJE.gGetFontHeight(e):this._iFontHeight=2*-t.LABEL_SPACE_LENGTH,e.font=this._fFont,e.strokeStyle=this._cColor,this._iMaxLabelLength=this.getMaximumCategoryLength(e,this._iCategoryCount,this._sCategories)}},KJE.gCategoryAxis.prototype.getCategoryLeft=function(e){return Math.round(this._iWidth/(this._iCategoryCount-(this._bNoOffset?1:0))*e)},KJE.gCategoryAxis.prototype.getCategoryMid=function(e){return Math.round(this._iWidth/this._iCategoryCount*e)+Math.round((this._iBarsPerCategory*this._iBarWidth+(this._iBarsPerCategory-1)*this._iGapWidth)/2)+this._iSpaceWidth},KJE.gCategoryAxis.prototype.getDataWidth=function(){return this._iGapWidth+this._iBarWidth},KJE.gCategoryAxis.prototype.getMaximumCategoryLength=function(e,t,i){if(null==i)return 0;if(0==i.length)return 0;for(var a=0,r=0,s=0;s<t&&s<i.length;s++)a=(r=e.measureText(KJE.FTR(i[s])).width+3)>a?r:a;return a},KJE.gCategoryAxis.prototype.setVisible=function(e){this._bShow=e},KJE.gGrid=function(e){this._gGraph=e,this._showYGridLines=!0,this._showXGridLines=!1,this._lineWidth=KJE.giGridLineWidth},KJE.gGrid.prototype.setProperty=function(e){for(var t=e.split("|"),i=KJE.sgv,a=0;a<t.length;a++)switch(a){case 0:this._showYGridLines=i(t[a],this._showYGridLines);break;case 1:this._showXGridLines=i(t[a],this._showXGridLines);break;case 2:this._lineWidth=i(t[a],this._lineWidth)}},KJE.gGrid.prototype.getProperty=function(){return this._showYGridLines+"|"+this._showXGridLines+"|"+this._lineWidth},KJE.gGrid.prototype.paint=function(e,t,i){var a,r,s,n=this._gGraph._axisX._iDataLength,o=this._gGraph._axisY._iDataLength,E=e.createLinearGradient(0,0,0,o);E.addColorStop(0,this._gGraph._cGridBackground1),E.addColorStop(1,this._gGraph._cGridBackground2),e.fillStyle=E,e.fillRect(t,i,n,o+1),e.beginPath(),e.strokeStyle=this._gGraph._cGrid,e.lineWidth=this._lineWidth,e.strokeRect(t,i,n+1,o),e.strokeStyle=this._gGraph._cAxisLine,e.beginPath(),e.moveTo(t,i+o),e.lineTo(t+n,i+o),e.closePath(),e.strokeStyle=this._gGraph._cGrid;var l=this._gGraph.getValueCount();if(this._showXGridLines){a=0,r=0,s=0;for(var _=0;_<l;_++)s=this._axisX.getCategoryLeft(_),0==_&&a--,a=t+s,e.moveTo(a+.5,i),e.lineTo(a+.5,i+o)}var h=0;if(this._showYGridLines){r=i;for(var T=this._gGraph._axisY._iLabelCount,p=this._gGraph._axisY._iPixelsPerIncrement,u=this._gGraph._axisY._iZeroIntersects,d=0;d<T;d++)u+i==r&&(h=r),e.moveTo(t,r+.5),e.lineTo(t+n,r+.5),r+=p}e.strokeStyle=this._gGraph._cGrid,e.stroke(),e.closePath(),h&&(e.beginPath(),e.strokeStyle=this._gGraph._cAxisLine,e.moveTo(t,h+.5),e.lineTo(t+n,h+.5),e.stroke(),e.closePath())},KJE.gType=function(e){this._iGraphType=e,this.bTitleHigher=!1,this._gGraph=null,this.xPopup=new Array,this.yPopup=new Array,this.xArray=new Array,this.yArray=new Array,this.sItems=new Array},KJE.gType.prototype.syncSetup=function(e){switch(this._gGraph=e,e.wTitle&&(e.wTitle.style.fontColor=e._cTextColor,e._titleGraph.bShow=!1),e._titleGraph.setFont(e.FONT_TITLE),e._titleXAxis.setFont(e.FONT_BOLD),e._titleYAxis.setFont(e.FONT_BOLD),e._titleGraph.setColor(e._cTextColor),e._titleXAxis.setColor(e._cTextColor),e._titleYAxis.setColor(e._cTextColor),this._iGraphType){case KJE.gCOLUMN:e._legend._legendType=KJE.gLegend.DATA_SERIES_LEGEND,e._axisX._fDataGapPercent=.05,this.bTitleHigher=!0;break;case KJE.gCATEGORIES:e._legend._legendType=KJE.gLegend.CATEGORY_LEGEND,e._axisX._fDataGapPercent=.05,this.bTitleHigher=!0;break;case KJE.gLINE:e._legend._legendType=KJE.gLegend.DATA_SERIES_LEGEND,e._axisX._fDataGapPercent=100,this.bTitleHigher=!1,e._axisX._bNoOffset=!0;break;case KJE.gPIE:e._legend._legendType=KJE.gLegend.CATEGORY_LEGEND,this.bTitleHigher=!1;break;case KJE.gSTACKED:e._legend._legendType=KJE.gLegend.DATA_SERIES_LEGEND,e._axisX._fDataGapPercent=-1,this.bTitleHigher=!0}},KJE.gType.prototype.paint=function(e,t,i){var a=this,r=a._gGraph,s=r._legend,n=r._axisX,o=r._axisY,E=r._titleXAxis,l=r._titleYAxis,_=r._titleGraph;_.setTitle(e),s.setINF(e),r._axisX.setINF(e),r._axisY.setINF(e),E.setTitle(e,""),l.setTitle(e,r._axisY._sUnits);var h,T,p,u,d,c,R,S,I,A,g,K,J,N,C,f,L=a.bTitleHigher&&r._showItemLabel&&r._showItemLabelOnTop,O=KJE.gBORDER_WIDTH,m=KJE.gBORDER_WIDTH,D=t-2*KJE.gBORDER_WIDTH,y=i-2*KJE.gBORDER_WIDTH,M=_._iHeight,v=O,b=m+(L?Math.ceil(M/2):0)+M+KJE.gBORDER_WIDTH,P=D,G=y-((L?Math.ceil(M/2):0)+M+KJE.gBORDER_WIDTH);switch(s.setSize(e),a._iGraphType){case KJE.gPIE:h=v,T=b,p=P,u=G,d=P,c=G,R=v,S=b,I=v,A=b,g=P,K=G,J=v+s._iXOffset,N=b+s._iYOffset,C=P-s._iWidthOffset,f=G-s._iHeightOffset;break;default:h=v+s._iXOffset,T=b+s._iYOffset,p=P-s._iWidthOffset,u=G-s._iHeightOffset,d=p-l._iWidth-KJE.gBORDER_WIDTH,c=u-E._iHeight-KJE.gBORDER_WIDTH,n.setSize(e,d-o._iWidth),o.setSize(e,c-n._iHeight),R=h+l._iWidth+KJE.gBORDER_WIDTH,S=T+(o._iMaxLength-o._iHeight),J=I=R+o._iXOffset,N=A=S+n._iYOffset,C=g=n._iDataLength,f=K=o._iDataLength}switch(a._iGraphType){case KJE.gPIE:break;default:r._grid.paint(e,I,A),E.paint(e,I,o._iDataLength+A+n._iHeight+E._iHeight/2,g,E._iHeight),l.paint(e,h,A,l._iWidth,K),o.paint(e,R,S+n._iXOffset,g,K),n.paint(e,R+o._iXOffset,S,g,K)}switch(a._iGraphType){case KJE.gCATEGORIES:case KJE.gCOLUMN:a.paintDataColumn(e,J,N,C,f);break;case KJE.gLINE:a.paintDataLine(e,J,N,C,f);break;case KJE.gPIE:a.paintDataPie(e,J,N,C,f);break;case KJE.gSTACKED:a.paintDataStacked(e,J,N,C,f)}_.paint(e,O,m-(L?Math.ceil(M/4):0),D,M),s.paint(e,v,b,P,G,I,A,g,K)},KJE.gType.prototype.paintDataColumn=function(e,t,i,a,r){var s=this._gGraph,n=KJE.gGraphColumn,o=this,E=s._axisX._iBarWidth,l=s._axisY._fValuePerPixel,_=s._axisX._iSpaceWidth,h=s._axisX.getDataWidth(),T=s._axisY._fMinValue,p=s._axisY._fMaxValue,u=s._axisY._iZeroIntersects,d=s.getValueCount();e.shadowColor=n._sSHADOW_COLOR,e.shadowBlur=n._sSHADOW_BLUR,e.shadowOffsetX=E<3*n._sSHADOW_BLUR_X?0:n._sSHADOW_BLUR_X;var c=e.shadowOffsetY=E<3*n._sSHADOW_BLUR_X?0:n._sSHADOW_BLUR_Y;e.lineWidth=n._LINE_WIDTH;var R=new Array,S=new Array,I=new Array,A=0;e.font=s.FONT_LEGEND,s._showItemLabelOnTop||(A=-KJE.gGetFontHeight(e)),e.textAlign="center",e.textBaseline="bottom";for(var g=0,K=0,J="",N=s._legend._legendType!=KJE.gLegend.CATEGORY_LEGEND,C=null!=s._sGraphCategoriesBold&&s._legend._legendType==KJE.gLegend.CATEGORY_LEGEND,f=s._axisX._sCategories,L=0;L<s._vDataSeries.length;L++){N&&(J=s._vDataSeries[L]._sSeriesPop);var O=-9191,m=-9191;e.fillStyle=s._vDataSeries[L]._cColor;var D,y,M,v=s._vDataSeries[L]._fValues;R[L]=new Array,S[L]=new Array,I[L]=new Array;for(var b=0;b<d;b++)D=t+s._axisX.getCategoryLeft(b)+_+L*h,(g=v[b])<0?p<0?(y=i,M=-1*Math.round((g+p)*l)):(y=i+u,M=-1*Math.round(g*l)):y=T>0?i+r-(M=Math.round((g-T)*l)):i+u-(M=Math.round(g*l)),e.beginPath(),s._legend._legendType==KJE.gLegend.CATEGORY_LEGEND?e.fillStyle=s.getColor(b+1):e.fillStyle=s._vDataSeries[L]._cColor,e.strokeStyle=e.fillStyle,e.shadowOffsetY=c,e.fillRect(D,y,E,M),e.shadowOffsetY="0",e.fillRect(D,y,E,M),(s._iArea==KJE.gGraphColumn.LINE_ON_ALL||s._iArea==KJE.gGraphColumn.LINE_ON_FIRST_ONLY&&0==L)&&(e.lineWidth=KJE.gGraphLine._LINE_WIDTH,e.shadowOffsetY=KJE.gGraphLine._sSHADOW_BLUR_Y,-9191!=m&&(e.beginPath(),e.moveTo(O+E/2,m),e.lineTo(D+E/2,y),e.stroke()),O=D,m=y),e.closePath(),R[L][b]=s.getFormat(v[b],L,b),o.xPopup[K]=(D+E/2)/KJE.gSCALE,o.yPopup[K]=(y+M)/KJE.gSCALE,o.xArray[K]=new Array(4),o.yArray[K]=new Array(4),o.xArray[K][0]=D/KJE.gSCALE,o.yArray[K][0]=y/KJE.gSCALE,o.xArray[K][1]=(D+E)/KJE.gSCALE,o.yArray[K][1]=o.yArray[K][0],o.xArray[K][2]=o.xArray[K][1],o.yArray[K][2]=(y+M)/KJE.gSCALE,o.xArray[K][3]=o.xArray[K][0],o.yArray[K][3]=o.yArray[K][2],o.sItems[K++]=J+" "+(f?f[b]:"")+(C&&s._sGraphCategoriesBold[b]?s._sGraphCategoriesBold[b]:"")+(s._bPopDetail?KJE.Colon+" "+R[L][b]:""),S[L][b]=D+E/2,I[L][b]=y-A}if(o.xArray.length=K,o.yArray.length=K,o.sItems.length=K,e.shadowBlur="0",e.shadowOffsetX="0",e.shadowOffsetY="0",e.fillStyle=s._cTextColor,s._showItemLabel)for(L=0;L<R.length;L++)for(b=0;b<R[L].length;b++)e.beginPath(),e.fillText(KJE.FTR(R[L][b]),S[L][b],I[L][b]),e.closePath()},KJE.gType.prototype.paintDataLine=function(e,t,i,a,r){var s=KJE,n=s.gGraphLine,o=KJE.gSCALE,E=this._gGraph,l=this,_=E._axisY._fValuePerPixel,h=E._axisY._fMinValue,T=E._axisY._fMaxValue,p=E._axisY._iZeroIntersects,u=E.getValueCount(),d=0,c=n._CLICKABLE;e.shadowBlur=n._sSHADOW_BLUR,e.shadowColor=n._sSHADOW_COLOR,e.shadowOffsetX=n._sSHADOW_BLUR_X,e.lineWidth=n._LINE_WIDTH,e.shadowOffsetY=n._sSHADOW_BLUR_Y;for(var R=E._axisX._sCategories,S=0;S<E._vDataSeries.length;S++){var I=E._vDataSeries[S]._sSeriesPop,A=E._vDataSeries[S]._bNoPopDetails;e.fillStyle=E._vDataSeries[S]._cColor,e.strokeStyle=E._vDataSeries[S]._cColor;for(var g,K,J=E._vDataSeries[S]._fValues,N=-9191,C=-9191,f=0;f<u;f++)g=t+E._axisX.getCategoryLeft(f)-.5,K=p-Math.round(J[f]*_)+.5,T<0?K=-1*Math.round((J[f]+T)*_):h>0&&(K=r-Math.round((J[f]-h)*_)),K+=i,-9191!=C&&(e.beginPath(),e.strokeStyle=E._vDataSeries[S]._cColor,e.fillStyle=E._vDataSeries[S]._cColor,E._iArea==n.AREA_ALL||E._iArea==n.AREA_FIRST_ONLY&&0==S||E._iArea==n.AREA_SECOND_ONLY&&1==S?(e.moveTo(N,i+r),e.lineTo(N,C),e.lineTo(g+.5,K),e.lineTo(g+.5,i+r),e.lineTo(N,i+r),e.fill()):(e.moveTo(g+.5,K),e.lineTo(N,C),e.stroke())),l.xPopup[d]=(g-5)/o,l.yPopup[d]=(K+5)/o,l.xArray[d]=KJE.IntArray(4),l.yArray[d]=KJE.IntArray(4),l.xArray[d][0]=(g-c)/o,l.yArray[d][0]=(K-c)/o,l.xArray[d][1]=(g+c)/o,l.yArray[d][1]=l.yArray[d][0],l.xArray[d][2]=l.xArray[d][1],l.yArray[d][2]=(K+c)/o,l.xArray[d][3]=l.xArray[d][0],l.yArray[d][3]=l.yArray[d][2],l.sItems[d++]=I+(A?"":" "+(R?R[f]:"")+(E._bPopDetail?s.Colon+" "+E.getFormat(J[f],S,f):"")),N=g,C=K}l.xArray.length=d,l.yArray.length=d,l.sItems.length=d},KJE.gType.prototype.paintDataPie=function(e,t,i,a,r){for(var s=0,n=this._gGraph,o=this,E=n._vDataSeries[0]._fValues,l=0;l<E.length;l++)s+=E[l];var _=Math.round(a/2+t),h=Math.round(r/2+i),T=0;a/r&&(T=Math.floor(r/24),h-=Math.ceil(T/2)+1,r-=Math.ceil(T)+1),e.save();var p=a>r?a/r:1,u=a>r?1:r/a;_/=p,h/=u,e.scale(p,u);var d=Math.round(Math.min(a/2,r/2)),c=0,R=0;e.shadowBlur=10,e.shadowOffsetX=T,e.shadowOffsetY=T,e.lineWidth=KJE.gGraphPie._LINE_WIDTH,e.lineJoin=KJE.gGraphPie._LINE_JOIN,e.fillStyle=KJE.gGraphPie._LINE_COLOR;var S=n._axisX._sCategories;if(s<=0&&(e.fillStyle=KJE.gDarker(n.getColor(1),.5),e.shadowColor=e.fillStyle,e.beginPath(),e.moveTo(_,h),e.arc(_,h,d,0,2*Math.PI,!0),e.lineTo(_,h),e.closePath(),e.stroke(),e.fill(),e.fillStyle=n.getColor(1),e.strokeStyle=KJE.gDarker(n.getColor(1),.6),e.beginPath(),e.moveTo(_,h),e.arc(_,h,d,0,2*Math.PI,!0),e.lineTo(_,h),e.closePath(),e.stroke(),e.fill()),s>0){for(var I=E.length-1;I>=0;I--)if(0!=E[I]){R=E[I]/s,e.fillStyle=KJE.gDarker(n.getColor(I+1),.5),e.shadowColor=e.fillStyle,e.beginPath(),e.moveTo(_,h);var A=c*Math.PI*2,g=0==I&&E[I]>0?0:(c+R)*Math.PI*2;e.arc(_,h,d,A,g,!1),e.lineTo(_,h),e.closePath(),e.fill(),c+=R}c=0,e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;var K=0;for(I=E.length-1;I>=0;I--)if(0!=E[I]){R=E[I]/s,e.fillStyle=n.getColor(I+1),e.strokeStyle=KJE.gDarker(n.getColor(I+1),.6),e.beginPath(),e.moveTo(_,h);A=c*Math.PI*2,g=0==I&&E[I]>0?0:(c+R)*Math.PI*2;e.arc(_,h,d,A,g,!1),e.lineTo(_,h),e.closePath(),e.stroke(),e.fill(),R=E[I]/s;var J=Math.ceil(20*R+.01);o.xArray[K]=KJE.IntArray(J+2),o.yArray[K]=KJE.IntArray(J+2),o.xArray[K][0]=_*p/KJE.gSCALE,o.yArray[K][0]=h*u/KJE.gSCALE;for(var N=R/J,C=0;C<J;C++)o.xArray[K][C+1]=(_+d*Math.cos((c+N*C)*Math.PI*2))*p/KJE.gSCALE,o.yArray[K][C+1]=(h+d*Math.sin((c+N*C)*Math.PI*2))*u/KJE.gSCALE,C==Math.floor(J/2)&&(o.xPopup[K]=(_+.75*d*Math.cos((c+N*C)*Math.PI*2))*p/KJE.gSCALE-5,o.yPopup[K]=(h+.75*d*Math.sin((c+N*C)*Math.PI*2))*u/KJE.gSCALE+10);o.xArray[K][J+1]=(_+d*Math.cos((c+R)*Math.PI*2))*p/KJE.gSCALE,o.yArray[K][J+1]=(h+d*Math.sin((c+R)*Math.PI*2))*u/KJE.gSCALE,o.sItems[K]=(S?S[I]:"")+(n._bPopDetail?KJE.Colon+" "+n.getFormat(E[I],0,I):""),c+=R,K++}o.xArray.length=K,o.yArray.length=K,o.sItems.length=K,o.xPopup.length=K,o.yPopup.length=K}e.restore()},KJE.gType.prototype.paintDataStacked=function(e,t,i,a,r){var s=this._gGraph,n=s._axisY,o=s._axisX,E=KJE.gGraphColumn,l=this,_=o._iBarWidth,h=n._fValuePerPixel,T=o._iSpaceWidth,p=o.getDataWidth(),u=n._fMinValue,d=n._fMaxValue,c=n._iZeroIntersects,R=s.getValueCount(),S=new Array,I=new Array,A=new Array,g=new Array,K=l.xArray,J=l.yArray,N=l.sItems,C=l.xPopup,f=l.yPopup,L=o._sCategories;e.shadowColor=E._sSHADOW_COLOR,e.shadowBlur=E._sSHADOW_BLUR,e.shadowOffsetX=_<3*E._sSHADOW_BLUR_X?0:E._sSHADOW_BLUR_X;var O=e.shadowOffsetY=_<3*E._sSHADOW_BLUR_X?0:E._sSHADOW_BLUR_Y;e.lineWidth=E._LINE_WIDTH,e.font=s.FONT_LEGEND,e.textAlign="center",e.textBaseline="bottom";var m=5;s._showItemLabelOnTop||(m=-KJE.gGetFontHeight(e));for(var D=null,y=0;y<s._vDataSeries.length;y++){D=s._vDataSeries[y]._fValues;for(var M=0;M<D.length;M++)S[M]=D[M]+(S[M]?S[M]:0)}for(M=0;M<S.length;M++)I[M]=s.getFormat(S[M],y-1,M);var v=0,b=0;for(y=0;y<s._vDataSeries.length;y++){var P=s._vDataSeries[y]._sSeriesPop,G=0,x=0,F=0;for(D=s._vDataSeries[y]._fValues,M=0;M<R;M++){G=t+o.getCategoryLeft(M)+T+y*p,v=S[M],S[M]-=D[M],v<0?d<0?(x=i,F=-1*Math.round((v+d)*h)):(x=i+c,F=-1*Math.round(v*h)):x=u>0?i+r-(F=Math.round((v-u)*h)):i+c-(F=Math.round(v*h)),e.beginPath(),e.fillStyle=s._vDataSeries[y]._cColor,0==y&&(e.shadowOffsetY=O,e.fillRect(G,x,_,F),A[M]=G+_/2,g[M]=x-m),e.shadowOffsetY="0",e.fillRect(G,x,_,F);var H=x+Math.floor(D[M]*h);C[b]=(G+_/2)/KJE.gSCALE,f[b]=H/KJE.gSCALE,K[b]=new Array(4),J[b]=new Array(4),K[b][0]=G/KJE.gSCALE,J[b][0]=x/KJE.gSCALE,K[b][1]=(G+_)/KJE.gSCALE,J[b][1]=J[b][0],K[b][2]=K[b][1],J[b][2]=H/KJE.gSCALE,K[b][3]=K[b][0],J[b][3]=J[b][2],N[b++]=P+(s._bPopCat&&L?" "+o._sCategories[M]:"")+(s._bPopDetail?KJE.Colon+" "+s.getFormat(D[M],y,M):"")}}if(K.length=b,J.length=b,N.length=b,e.shadowBlur="0",e.shadowOffsetX="0",e.shadowOffsetY="0",e.fillStyle=s._cTextColor,s._showItemLabel)for(M=0;M<S.length;M++)e.beginPath(),e.fillText(KJE.FTR(I[M]),A[M],g[M]),e.closePath()},KJE.gType.prototype.poly=function(e,t,i,a){var r,s,n=0;if(e){var o=e.length;for(r=0,s=o-1;r<o;s=r++)(t[r]<=a&&a<t[s]||t[s]<=a&&a<t[r])&&i<(e[s]-e[r])*(a-t[r])/(t[s]-t[r])+e[r]&&(n=!n)}return n},KJE.gType.prototype.getWedgeValue=function(e,t){for(var i=this,a=i.xArray,r=i.yArray,s=i.sItems.length;s>-1;s--){if(i.poly(a[s],r[s],e,t))return{x:i.xPopup[s],y:i.yPopup[s],s:i.sItems[s]}}return null},KJE.FTR=function(e){return e},KJE.ErrorBackground="#FF7777",KJE.IncompleteBackground="#FFFF77",KJE.ClearColor="#FFFFFF",KJE.colorList=["#ffffff","#ffffff","#F0E68C","#5F3240","#FABB50","#DECBCB","#CCCCCC","#CCCCDD","#CCDDCC","#CCDDDD","#CCCCDD"],KJE.ReportHeader="<div class='KJEReportTitleBlock'><div class='KJEReportTitle'>**REPORT_TITLE**</div></div>",KJE.ReportFooter="<div class=KJECenter><p class='KJEReportFooter KJECenter'>Information and interactive calculators are made available to you as self-help tools for your independent use and are not intended to provide investment advice. We cannot and do not guarantee their applicability or accuracy in regards to your individual circumstances. All examples are hypothetical and are for illustrative purposes.  We encourage you to seek personalized advice from qualified professionals regarding all personal finance issues.</p></div>",KJE.gFont=["Arial","Helvetica","Helvetica"],KJE.gFontStyle=["bold","bold",""],KJE.gFontSize=[13,10,10],KJE.gHeight=250,KJE.gHeightReport=350,KJE.gColorBackground="#FFFFFF",KJE.gColorForeground="#000000",KJE.gColorGrid="#BBBBBB",KJE.gColorGridBackground1="#FFFFFF",KJE.gColorGridBackground2="#CCCCCC",KJE.gColorAxisLine="#666666",KJE.gColorText="#000000",KJE.gColorList=["#febe40","#B8CBE4","#29466D","#DBE4F2","#5f007f","#F15A22","#B72467","#6DC8BF","#00007f","#ff00ff","#ffff00","#00ffff","#7f007f","#7f0000","#007f7f","#0000ff","#00c8ff","#60ffff","#bfffbf","#ffff90","#a0c8ef"],KJE.bUseInputForm=!1,KJE.SplashContent="Calculators provided <br/><br/>";var oDefinitions=document.getElementById("br-definition");function mapCalcValues(e){e.map(function(e){var t=getParameterByName(e[0]);t&&("boolean"==typeof e[2]?KJE.parameters.set(e[1],!!parseInt(t)):KJE.parameters.set(e[1],t))})}function getParameterByName(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null==t?"":decodeURIComponent(t[1].replace(/\+/g," "))}null!==oDefinitions&&(KJE.ShowDefinitions=!1,KJE.customInit=function(){oDefinitions.innerHTML=KJE.DefinitionText}),KJE.SocialSecurityCalc=function(){this.iDecimal=0,this.ADJUST_ONLY=!1,this.SOCIAL_SECURITY_CURRENT_MAX=127200,this.SOCIAL_SECURITY_AP_MAX=32244,this.SOCIAL_SECURITY_MAX_RATIO=.25349,this.SOCIAL_EARLIEST_RETIRE_AGE=62,this.SOCIAL_NORMAL_RETIRE_AGE=67,this.SOCIAL_LATEST_RETIRE_AGE=70,this.EARLY_DISCOUNTS=[.7,.75,.8,.86666,.93333,1],this.EARLY_AGE_CUTOFFS=[75,61,0],this.AGE_FULL_BENEFITS=[65,66,67],this.LATE_AGE_CUTOFFS=[71,0],this.LATE_AGE_INCREASES=[.075,.08],this.SOCIAL_SPOUSE_BENEFIT=.5,this.SOCIAL_FULL_BENEFIT_AMT=0,this.cats=null,this.DS_SOCIAL_PAYMENTS=null,this.DR_SOCIAL_PAYMENTS=null,this.MSG_SUMMARY_TEXT=KJE.parameters.get("MSG_SUMMARY_TEXT","Social Security may provide KJE1"),this.MSG_GRAPH3=KJE.parameters.get("MSG_GRAPH3","Estimated Monthly Benefits"),this.MSG_SUMMARY_TEXT2=KJE.parameters.get("MSG_SUMMARY_TEXT2","If you start collecting your benefits at age KJE2 you could receive approximately KJE3 per year or KJE4 per month. This is KJE5 of your final year's income of KJE6. This is only an estimate. Actual benefits depend on work history and the complete compensation rules used by Social Security."),this.SUMMARY_TEXT="",this.SUMMARY_TEXT2="",this.WAGE_CUTOFFS=[1e4,2e4,3e4,4e4,5e4,6e4,7e4,8e4,9e4,this.SOCIAL_SECURITY_CURRENT_MAX],this.SOCIAL_FULL_BENEFIT=[.6096,.4878,.3972,.3525,.3252,.3072,.2943,.2847,.2684,this.SOCIAL_SECURITY_MAX_RATIO],this.sSchedule=new KJE.Repeating},KJE.SocialSecurityCalc.prototype.clear=function(){this.CURRENT_AGE=0,this.HOUSEHOLD_INCOME=0,this.SALARY_PERCENT=0,this.SOCIAL_SECURITY_INCREASE_RATE=0,this.MARRIED=0,this.AGE_OF_RETIREMENT=0},KJE.SocialSecurityCalc.prototype.calculate=function(e){var t=KJE,i=this.CURRENT_AGE,a=this.HOUSEHOLD_INCOME,r=this.SALARY_PERCENT,s=this.SOCIAL_SECURITY_INCREASE_RATE,n=this.MARRIED,o=this.AGE_OF_RETIREMENT,E=0,l=0,_=0,h=0,T=0,p=0,u=65,d=0,c=0,R=0,S=s/100;h=o<this.SOCIAL_EARLIEST_RETIRE_AGE?this.SOCIAL_EARLIEST_RETIRE_AGE:o;for(var I=0;I<this.EARLY_AGE_CUTOFFS.length;I++)if(this.EARLY_AGE_CUTOFFS[I]<i){u=this.AGE_FULL_BENEFITS[I];break}for(I=0;I<this.LATE_AGE_CUTOFFS.length;I++)if(i>=this.LATE_AGE_CUTOFFS[I]){c=this.LATE_AGE_INCREASES[I];break}if(!this.ADJUST_ONLY){this.SOCIAL_FULL_BENEFIT_AMT=0;var A=(d=u-i)-1;A=A<0?0:A,l=t.round(KJE.FV_AMT(S,A,this.SOCIAL_SECURITY_CURRENT_MAX),2),this.WAGE_CUTOFFS[this.WAGE_CUTOFFS.length-1]=this.SOCIAL_SECURITY_CURRENT_MAX;var g=E=KJE.FV_AMT(r/100,A,a);this.SOCIAL_FULL_BENEFIT_PERCENT=this.SOCIAL_FULL_BENEFIT[this.SOCIAL_FULL_BENEFIT.length-1]*l/g;for(var K=0;K<this.WAGE_CUTOFFS.length;K++)if(g<KJE.FV_AMT(S,A,this.WAGE_CUTOFFS[K])){if(0==K)this.SOCIAL_FULL_BENEFIT_PERCENT=this.SOCIAL_FULL_BENEFIT[K];else{var J=KJE.FV_AMT(S,A,this.WAGE_CUTOFFS[K]),N=(J-g)/(J-KJE.FV_AMT(S,A,this.WAGE_CUTOFFS[K-1]));this.SOCIAL_FULL_BENEFIT_PERCENT=this.SOCIAL_FULL_BENEFIT[K]+(this.SOCIAL_FULL_BENEFIT[K-1]-this.SOCIAL_FULL_BENEFIT[K])*N}break}n>0&&(this.SOCIAL_FULL_BENEFIT_PERCENT=this.SOCIAL_FULL_BENEFIT_PERCENT*(1+this.SOCIAL_SPOUSE_BENEFIT)),this.SOCIAL_FULL_BENEFIT_AMT=t.round(this.SOCIAL_FULL_BENEFIT_PERCENT*g,0),n>0&&(this.SOCIAL_FULL_BENEFIT_PERCENT=this.SOCIAL_FULL_BENEFIT_AMT/E)}var C=this.SOCIAL_LATEST_RETIRE_AGE-this.SOCIAL_EARLIEST_RETIRE_AGE+1;for(this.cats=new Array(C),this.DS_SOCIAL_PAYMENTS=new Array(C),this.DR_SOCIAL_PAYMENTS=new Array(C),I=0;I<C;I++)if(this.cats[I]=t.number(this.SOCIAL_EARLIEST_RETIRE_AGE+I),this.SOCIAL_EARLIEST_RETIRE_AGE+I<=u?this.DR_SOCIAL_PAYMENTS[I]=t.round(this.SOCIAL_FULL_BENEFIT_AMT*this.EARLY_DISCOUNTS[I+this.SOCIAL_NORMAL_RETIRE_AGE-u],0):this.DR_SOCIAL_PAYMENTS[I]=t.round(this.SOCIAL_FULL_BENEFIT_AMT*(1+c*(this.SOCIAL_EARLIEST_RETIRE_AGE-u+I)),0),h==this.SOCIAL_EARLIEST_RETIRE_AGE+I){var f=h-i-1;R=KJE.FV_AMT(r/100,f<0?0:f,a),p=this.DR_SOCIAL_PAYMENTS[I]/R,_=this.DR_SOCIAL_PAYMENTS[I],T=this.DR_SOCIAL_PAYMENTS[I]/12}if(e){var L=this.sSchedule;L.clearRepeat(),L.addHeader(L.sReportCol("Age<br />Benefits Begin",1),L.sReportCol("Amount<br />per Month",2),L.sReportCol("Amount<br />per Year",3))}var O=0;for(I=1;I<=C;I++)O=I-1,this.DS_SOCIAL_PAYMENTS[O]=this.DR_SOCIAL_PAYMENTS[O]/12,e&&L.addRepeat(t.number(O+this.SOCIAL_EARLIEST_RETIRE_AGE,0),t.dollars(this.DR_SOCIAL_PAYMENTS[O]/12),t.dollars(this.DR_SOCIAL_PAYMENTS[O]));this.FUTURE_HOUSEHOLD_INCOME=E,this.SOCIAL_SECURITY_MAX=l,this.SOCIAL_AT_RETIRE_AMT=_,this.SOCIAL_AT_RETIRE_AGE=h,this.SOCIAL_AT_RETIRE_AMT_MONTHLY=T,this.SOCIAL_AT_RETIRE_PERCENT=p,this.SOCIAL_FULL_BENEFIT_AGE=u,this.SOCIAL_FULL_BENEFIT_PERCENT=0,this.YEARS_UNTIL_SOCIAL_FULL_BENEFITS=d,this.SOCIAL_DELAYED_RETIRE_PERCENT=c,this.HOUSEHOLD_INCOME_AT_RETIRE=R},KJE.SocialSecurityCalc.prototype.formatReport=function(e){var t=KJE,i=(this.iDecimal,e);return i=KJE.replace("FUTURE_HOUSEHOLD_INCOME",t.dollars(this.FUTURE_HOUSEHOLD_INCOME),i),i=KJE.replace("HOUSEHOLD_INCOME_AT_RETIRE",t.dollars(this.HOUSEHOLD_INCOME_AT_RETIRE),i),i=KJE.replace("SOCIAL_SECURITY_MAX",t.dollars(this.SOCIAL_SECURITY_MAX),i),i=KJE.replace("SOCIAL_AT_RETIRE_AGE",t.number(this.SOCIAL_AT_RETIRE_AGE),i),i=KJE.replace("SOCIAL_AT_RETIRE_AMT_MONTHLY",t.dollars(this.SOCIAL_AT_RETIRE_AMT_MONTHLY),i),i=KJE.replace("SOCIAL_AT_RETIRE_AMT",t.dollars(this.SOCIAL_AT_RETIRE_AMT),i),i=KJE.replace("SOCIAL_AT_RETIRE_PERCENT",t.percent(this.SOCIAL_AT_RETIRE_PERCENT,2),i),i=KJE.replace("SOCIAL_FULL_BENEFIT_AMT",t.dollars(this.SOCIAL_FULL_BENEFIT_AMT),i),i=KJE.replace("SOCIAL_FULL_BENEFIT_AGE",t.number(this.SOCIAL_FULL_BENEFIT_AGE),i),i=KJE.replace("SOCIAL_FULL_BENEFIT_PERCENT",t.percent(this.SOCIAL_FULL_BENEFIT_PERCENT,2),i),i=KJE.replace("YEARS_UNTIL_SOCIAL_FULL_BENEFITS",t.number(this.YEARS_UNTIL_SOCIAL_FULL_BENEFITS),i),i=KJE.replace("CURRENT_AGE",t.number(this.CURRENT_AGE),i),i=KJE.replace("HOUSEHOLD_INCOME",t.dollars(this.HOUSEHOLD_INCOME),i),i=KJE.replace("SALARY_PERCENT",t.percent(this.SALARY_PERCENT/100,2),i),i=KJE.replace("MARRIED",t.yesno(this.MARRIED),i),i=KJE.replace("AGE_OF_RETIREMENT",t.number(this.AGE_OF_RETIREMENT),i),i=KJE.replace("SOCIAL_SECURITY_CURRENT_MAX",t.dollars(this.SOCIAL_SECURITY_CURRENT_MAX),i),i=KJE.replace("SOCIAL_SECURITY_INCREASE_RATE",t.percent(this.SOCIAL_SECURITY_INCREASE_RATE/100,2),i),i=KJE.replace("INFLATION_RATE",t.percent(this.SOCIAL_SECURITY_INCREASE_RATE/100,2),i),i=KJE.replace("SOCIAL_EARLIEST_RETIRE_AGE",t.number(this.SOCIAL_EARLIEST_RETIRE_AGE),i),i=KJE.replace("SOCIAL_LATEST_RETIRE_AGE",t.number(this.SOCIAL_LATEST_RETIRE_AGE),i),i=(i=KJE.replace("SOCIAL_DELAYED_RETIRE_PERCENT",t.percent(this.SOCIAL_DELAYED_RETIRE_PERCENT,2),i)).replace("**REPEATING GROUP**",this.sSchedule.getRepeat()),this.sSchedule.clearRepeat(),i},KJE.SocialSecurityCalc.prototype.formatGraph=function(e,t){t[0].setTitle(this.MSG_GRAPH3),t[0].setTitleGraph(this.MSG_GRAPH3),t[0].show(!0),t[0].paint()},KJE.RetirementPlanCalc=function(){this.SHOW_SOCIAL=KJE.parameters.get("SHOW_SOCIAL",!0),this.MSG_ERROR1=KJE.parameters.get("MSG_ERROR1","Both current savings and monthly income cannot be zero."),this.MSG_ERROR2=KJE.parameters.get("MSG_ERROR2","Current age must be less than retirement age."),this.MSG_ERROR3=KJE.parameters.get("MSG_ERROR3","Start age can't be less than retirement age."),this.NEST_EGG=KJE.parameters.get("NEST_EGG",!1),this.MSG_GRAPH_TITLE=KJE.parameters.get("MSG_GRAPH_TITLE","You need to save KJE1 per month to meet your retirement needs."),this.MSG_TITLE=KJE.parameters.get("MSG_TITLE","You may need KJE1 to retire at age KJE2"),this.MSG_LABEL_3=KJE.parameters.get("MSG_LABEL_3","Your plan is on track."),this.MSG_LABEL_4=KJE.parameters.get("MSG_LABEL_4","You may need to save more."),this.MSG_RUNOUT=KJE.parameters.get("MSG_RUNOUT_BOLD","Retirement savings runs out at age AGE_RUN_OUT."),this.MSG_SUCCESS=KJE.parameters.get("MSG_SUCCESS_BOLD","Balance at end of retirement is ENDING_BALANCE."),this.MSG_RESULT=KJE.parameters.get("MSG_SUCCESS","Your plan provides KJE1 when you retire. This assumes annual retirement expenses of KJE2 which is KJE3 of your last year's income of KJE4."),this.MSG_RESULT_SOCIAL=KJE.parameters.get("MSG_RESULT_SOCIAL","If you have selected to include NZ Superannuation payments, these are included below and will be inflation-adjusted if you expect inflation. "),this.MSG_RESULT_EXTRA=KJE.parameters.get("MSG_RESULT_EXTRA",""),this.MSG_RESULT_EXTRA_GRAPH=KJE.parameters.get("MSG_RESULT_EXTRA_GRAPH",""),this.MSG_SUCCESS_REPORT=KJE.parameters.get("MSG_SUCCESS_REPORT","Does not run out of funds."),this.MSG_RUNOUT_REPORT=KJE.parameters.get("MSG_RUNOUT_REPORT","Retirement funds run out at age KJE1."),this.MSG_INFLATION_REPORT=KJE.parameters.get("MSG_INFLATION_REPORT","This amount is increased INFLATION_RATE each year until you retire and through your retirement to account for inflation."),this.MSG_SOCIAL_SECURITY=KJE.parameters.get("MSG_SOCIAL_SECURITY","If you have selected to include NZ Superannuation payments, these are included below and will be inflation-adjusted if you expect inflation. "),this.MSG_START_OF_MESSAGE=KJE.parameters.get("MSG_START_OF_MESSAGE",""),this.MSG_GRAPH_REPORT_TITLE=KJE.parameters.get("MSG_GRAPH_REPORT_TITLE","Retirement Savings and Expenditures"),this.sGraph2=KJE.parameters.get("GRAPH_2","Savings for retirement"),this.sGraph3=KJE.parameters.get("GRAPH_3","Total expenses"),this.bATRETIREMENT=!1,this.iDecimals=0,this.RESPONSE="",this.RESPONSE1="",this.RESPONSE2="",this.START_OF_MESSAGE="",this.INCREASE_ANNUAL_SAVINGS=!this.NEST_EGG,this.YEARS_OF_RETIREMENT=0,this.dAdjustedSavingsRate=0,this.dAdjustedRorRate=0,this.dAdjustedSalaryPercent=0,this.dAdjusteYearsToRetirement=0,this.RESULTS_MSG="",this.INCOME_PERCENT=0,this.AGE_RUN_OUT=0,this.END_OF_RETIREMENT_MESSAGE="",this.SOCIAL_SECURITY_INCREASE_RATE=.024,this.CURRENT_TAX=0,this.RETIREMENT_TAX=0,this.RETIREMENT_TAX_WITHDRAWALS=!1,this.SOCIAL_SECURITY_TAX_WITHDRAWALS=!1,this.USE_NET_INCOME=KJE.parameters.get("USE_NET_INCOME",!1),this.SHORT_RESULTS=!1,this.OTHER_PENSION_START=[0,0,0],this.OTHER_PENSION_AMOUNT=[0,0,0],this.OTHER_PENSION_LASTS=[0,0,0],this.OTHER_PENSION_START_MIN=KJE.FloatArray(3),this.OTHER_PENSION_ENFORCE_MIN=new Array(3),this.OTHER_PENSION_USERETIREAGE=new Array(3);for(var e=0;e<3;e++)this.OTHER_PENSION_START_MIN[e]=KJE.parameters.get("OTHER_PENSION_START"+(e+1)+"_MIN",14),this.OTHER_PENSION_ENFORCE_MIN[e]=KJE.parameters.get("OTHER_PENSION_ENFORCE"+(e+1)+"_MIN",!1),this.OTHER_PENSION_USERETIREAGE[e]=KJE.parameters.get("OTHER_PENSION_USERETIREAGE"+(e+1),!1);this.OTHER_PENSION_INFLATION=[!1,!1,!1],this.OTHER_PENSION_CPP=[KJE.parameters.get("OTHER_PENSION_CPP1",!1),KJE.parameters.get("OTHER_PENSION_CPP2",!1),KJE.parameters.get("OTHER_PENSION_CPP3",!1)],this.OTHER_PENSION_COUNT=KJE.parameters.get("OTHER_PENSION_COUNT",0),this.OTHER_PENSION_AMOUNT_ADJUSTED=[0,0,0],this.OTHER_PENSION_AMOUNT_ADJUSTED=[0,0,0],this.CPP_MINIMUM_AGE=60,this.CPP_MAXIMUM_AGE=71,this.CPP_NOMINAL_AGE=65,this.OAS_START_65=56,this.OAS_START_66=52,this.CPP_ADJUSTMENT_EARLY=.072,this.CPP_ADJUSTMENT_LATE=.084,this.DD_RETIRE1=KJE.FloatArray(3),this.DD_RETIRE2=KJE.FloatArray(3),this.DS_RETIRE1=KJE.FloatArray(3),this.DR_SALARY=null,this.DR_BEGINING_BALANCE=null,this.DR_ENDING_BALANCE=null,this.DR_INTEREST=null,this.DR_SAVINGS=null,this.DR_RETIREMENT_INCOME=null,this.DR_SOCIAL_SECURITY_INCOME=null,this.DR_RETIREMENT_WITHDRAWAL=null,this.DS_INFLATION_INCREASE=KJE.FloatArray(4),this.DS_INFLATION_RUNOUT=KJE.FloatArray(4),this.DS_SAVEMORE_INCREASE=KJE.FloatArray(5),this.DS_SAVEMORE_RUNOUT=KJE.FloatArray(5),this.CS_INFLATION_RUNOUT=new Array(4),this.CS_SAVEMORE_RUNOUT=new Array(5),this.cats=null,this.cats2=new Array(3),this.CAT_LABELS=KJE.parameters.get("ARRAY_CAT_LABELS",["Projected nestegg required:","Projected nestegg required after Social Security:","Projected nestegg required after current Savings:"]),this.INFLATION_RESULTS=!1,this.SAVEMORE_RESULTS=!1,this.sSchedule=new KJE.Repeating},KJE.RetirementPlanCalc.prototype.clear=function(){this.CURRENT_AGE=0,this.HOUSEHOLD_INCOME=0,this.PRE_RATE_OF_RETURN=0,this.AGE_OF_RETIREMENT=0,this.POST_RATE_OF_RETURN=0,this.SALARY_PERCENT=0,this.CURRENT_SAVINGS=0,this.INFLATION_RATE=0,this.INCLUDE_SOCIAL_SECURITY=!1,this.MARRIED=!1,this.SAVINGS_PERCENT=0;for(var e=this.DD_RETIRE1.length,t=0;t<e;t++)this.DD_RETIRE1[t]=0,this.DD_RETIRE2[t]=0},KJE.RetirementPlanCalc.prototype.calculate=function(e){var t=KJE,i=this.CURRENT_AGE,a=this.HOUSEHOLD_INCOME,r=this.PRE_RATE_OF_RETURN,s=this.AGE_OF_RETIREMENT,n=this.POST_RATE_OF_RETURN,o=this.SALARY_PERCENT,E=this.CURRENT_SAVINGS,l=this.INFLATION_RATE,_=this.INCLUDE_SOCIAL_SECURITY,h=this.MARRIED,T=this.SAVINGS_PERCENT,p=0,u=0,d=0,c=0,R=0,S=0,I=0,A=0,g=r/100,K=n/100,J=E;this.OTHER_PENSION_CPP&&(i>=this.OAS_START_65?this.OTHER_PENSION_START_MIN[2]=65:i>=this.OAS_START_66?this.OTHER_PENSION_START_MIN[2]=66:this.OTHER_PENSION_START_MIN[2]=67);var N=this.YEARS_UNTIL_RETIREMENT=s-i;if(this.AGE_RUN_OUT=0,this.SHOW_SOCIAL&&this.INCLUDE_SOCIAL_SECURITY){var C=new KJE.SocialSecurityCalc;C.clear(),C.CURRENT_AGE=i>69?69:i,C.HOUSEHOLD_INCOME=a,C.AGE_OF_RETIREMENT=s>70?70:s,C.SALARY_PERCENT=o,C.SOCIAL_SECURITY_INCREASE_RATE=l,C.MARRIED=h,C.calculate(),R=C.SOCIAL_AT_RETIRE_AMT,S=i>C.SOCIAL_AT_RETIRE_AGE?i:C.SOCIAL_AT_RETIRE_AGE}else R=0,S=65,_=!1;this.SOCIALSECURITY_START_AGE=S,this.SOCIALSECURITY_AT_RETIRE=R,this.INCLUDE_SOCIAL_SECURITY=_;var f=t.round(a*(T/100),0),L=f/12;if(i>s)throw this.MSG_ERROR2;this.bATRETIREMENT=!1,i==s&&(i-=1,this.CURRENT_AGE=i,this.bATRETIREMENT=!0);var O=Math.round(N+this.YEARS_OF_RETIREMENT),m=0,D=0,y=0;this.DS_SAVINGS=KJE.FloatArray(O),this.DS_WITHDRAWAL=KJE.FloatArray(O),this.DR_SALARY=KJE.FloatArray(O),this.DR_BEGINING_BALANCE=KJE.FloatArray(O),this.DR_ENDING_BALANCE=KJE.FloatArray(O),this.DR_INTEREST=KJE.FloatArray(O),this.DR_SAVINGS=KJE.FloatArray(O),this.DR_RETIREMENT_INCOME=KJE.FloatArray(O),this.DR_SOCIAL_SECURITY_INCOME=KJE.FloatArray(O),this.DR_RETIREMENT_WITHDRAWAL=KJE.FloatArray(O),this.DR_RETIREMENT_TAXES=KJE.FloatArray(O),this.cats=new Array(O);var M=!1;for(y=0;y<this.OTHER_PENSION_AMOUNT.length;y++)if(this.OTHER_PENSION_CPP[y]&&(M=this.OTHER_PENSION_CPP[y]),this.OTHER_PENSION_USERETIREAGE[y]&&(this.OTHER_PENSION_START[y]=s,this.OTHER_PENSION_START[y]<this.OTHER_PENSION_START_MIN[y]&&this.OTHER_PENSION_ENFORCE_MIN[y]&&(this.OTHER_PENSION_START[y]=this.OTHER_PENSION_START_MIN[y])),this.OTHER_PENSION_START[y]<s&&0!=this.OTHER_PENSION_START[y])throw this.MSG_ERROR3;for(y=0;y<this.OTHER_PENSION_AMOUNT.length;y++)this.OTHER_PENSION_CPP[y]&&this.OTHER_PENSION_START[y]!=this.CPP_NOMINAL_AGE?this.OTHER_PENSION_START[y]>this.CPP_NOMINAL_AGE?this.OTHER_PENSION_AMOUNT_ADJUSTED[y]=this.OTHER_PENSION_AMOUNT[y]+(this.OTHER_PENSION_START[y]-this.CPP_NOMINAL_AGE)*this.CPP_ADJUSTMENT_LATE*this.OTHER_PENSION_AMOUNT[y]:this.OTHER_PENSION_START[y]<this.CPP_NOMINAL_AGE?this.OTHER_PENSION_AMOUNT_ADJUSTED[y]=this.OTHER_PENSION_AMOUNT[y]-(this.CPP_NOMINAL_AGE-this.OTHER_PENSION_START[y])*this.CPP_ADJUSTMENT_EARLY*this.OTHER_PENSION_AMOUNT[y]:this.OTHER_PENSION_AMOUNT_ADJUSTED[y]=this.OTHER_PENSION_AMOUNT[y]:this.OTHER_PENSION_AMOUNT_ADJUSTED[y]=this.OTHER_PENSION_AMOUNT[y];var v=0,b=0,P=0;for(y=1;y<=O;y++){if(0==(m=y-1)?(this.DR_BEGINING_BALANCE[m]=E,u=(p=a)*(1-this.CURRENT_TAX/100),d=p*(this.INCOME_PERCENT/100),c=u*(this.INCOME_PERCENT/100)):this.DR_BEGINING_BALANCE[m]=this.DR_ENDING_BALANCE[m-1],N-y>0)this.DR_SAVINGS[m]=this.INCREASE_ANNUAL_SAVINGS?(0==m?a:this.DR_SALARY[m-1])*(T/100):f,this.DR_SALARY[m]=KJE.FV_AMT(o/100,y,a),this.DR_INTEREST[m]=this.DR_BEGINING_BALANCE[m]*g,this.DR_RETIREMENT_INCOME[m]=0,this.DR_SOCIAL_SECURITY_INCOME[m]=0,this.DR_RETIREMENT_WITHDRAWAL[m]=0,u=(p=this.DR_SALARY[m])*(1-this.CURRENT_TAX/100),d=p*(this.INCOME_PERCENT/100),c=u*(this.INCOME_PERCENT/100);else{this.DR_SALARY[m]=KJE.FV_AMT(l/100,y-N-(this.bATRETIREMENT?1:0),p),this.DR_INTEREST[m]=this.DR_BEGINING_BALANCE[m]*K,this.DR_SAVINGS[m]=0,this.DR_RETIREMENT_INCOME[m]=this.DR_SALARY[m]*(this.INCOME_PERCENT/100)*(1-(this.USE_NET_INCOME?this.CURRENT_TAX/100:0)),y+i-S>=0&&_?(this.DR_SOCIAL_SECURITY_INCOME[m]=KJE.FV_AMT(l/100,y+i-S,16034.72),this.SOCIAL_SECURITY_TAX_WITHDRAWALS&&(this.DR_RETIREMENT_TAXES[m]=this.DR_SOCIAL_SECURITY_INCOME[m]*(this.RETIREMENT_TAX/200))):this.DR_SOCIAL_SECURITY_INCOME[m]=0;var G=0,x=0;for(D=0;D<this.OTHER_PENSION_AMOUNT.length;D++)this.OTHER_PENSION_AMOUNT[D]>0&&(G=y+i-(0==this.OTHER_PENSION_START[D]?s:this.OTHER_PENSION_START[D]))>=0&&(0==this.OTHER_PENSION_LASTS[D]||this.OTHER_PENSION_LASTS[D]>G)&&(this.OTHER_PENSION_INFLATION[D]?x+=KJE.FV_AMT(l/100,y-1,12*this.OTHER_PENSION_AMOUNT_ADJUSTED[D]):x+=12*this.OTHER_PENSION_AMOUNT_ADJUSTED[D]);if(this.DR_SOCIAL_SECURITY_INCOME[m]+=x,this.RETIREMENT_TAX_WITHDRAWALS&&(this.DR_RETIREMENT_TAXES[m]+=x*(this.RETIREMENT_TAX/100)),this.DR_RETIREMENT_WITHDRAWAL[m]=this.DR_RETIREMENT_INCOME[m]+this.DR_RETIREMENT_TAXES[m]-this.DR_SOCIAL_SECURITY_INCOME[m],this.USE_NET_INCOME&&this.DR_RETIREMENT_WITHDRAWAL[m]>0&&this.RETIREMENT_TAX_WITHDRAWALS){var F=this.DR_RETIREMENT_WITHDRAWAL[m]/(1-this.RETIREMENT_TAX/100);this.DR_RETIREMENT_TAXES[m]+=F-this.DR_RETIREMENT_WITHDRAWAL[m],this.DR_RETIREMENT_WITHDRAWAL[m]=F}v=KJE.NPV_AMT(K,y-N+1,this.DR_RETIREMENT_WITHDRAWAL[m]),this.DD_RETIRE1[1]+=v,this.DD_RETIRE2[1]+=this.DR_RETIREMENT_WITHDRAWAL[m],b=KJE.NPV_AMT(K,y-N+1,this.DR_RETIREMENT_INCOME[m]),this.DD_RETIRE1[0]+=b,this.DD_RETIRE2[0]+=this.DR_RETIREMENT_INCOME[m]}if(this.DR_ENDING_BALANCE[m]=this.DR_BEGINING_BALANCE[m]+this.DR_INTEREST[m]+this.DR_SAVINGS[m]-this.DR_RETIREMENT_WITHDRAWAL[m],N-y==1&&(J=this.DR_ENDING_BALANCE[m]),this.DR_ENDING_BALANCE[m]<=0){var H=0!=this.AGE_RUN_OUT?this.DR_RETIREMENT_WITHDRAWAL[m]:-1*this.DR_ENDING_BALANCE[m];P=KJE.NPV_AMT(K,y-N+1,H),this.DD_RETIRE1[2]+=P,this.DD_RETIRE2[2]+=H,0==this.AGE_RUN_OUT&&(this.AGE_RUN_OUT=y+i),this.DR_RETIREMENT_WITHDRAWAL[m]=this.DR_BEGINING_BALANCE[m]+this.DR_INTEREST[m]+this.DR_SAVINGS[m],this.DR_ENDING_BALANCE[m]=0}}var w=this.DR_ENDING_BALANCE[m];if(this.END_OF_RETIREMENT_MESSAGE=null,0==w?(this.END_OF_RETIREMENT_MESSAGE=this.MSG_RUNOUT,this.RESULTS_MSG=this.MSG_LABEL_4,this.RESPONSE=this.RESPONSE2):(this.END_OF_RETIREMENT_MESSAGE=this.MSG_SUCCESS,this.RESULTS_MSG=this.MSG_LABEL_3,this.RESPONSE=this.RESPONSE1),this.NEST_EGG&&(this.RESULTS_MSG=KJE.getKJEReplaced(this.MSG_TITLE,t.dollars(this.DD_RETIRE1[0]),t.number(s))),A=0,0==w&&(this.dAdjustedSavingsRate=this.getAdjustedSavingsRate(i+O,g,K),this.dAdjustedRorRate=this.getAdjustedRorRate(i+O,g,K),this.dAdjustedSalaryPercent=this.getAdjustedSalaryPercent(i+O,g,K),this.dAdjusteYearsToRetirement=this.getAdjustedYearsToRetirement(i+O,g,K)+i,I=N<=1?this.DD_RETIRE1[2]:t.round(this.dAdjustedSavingsRate*a,2),A=t.round(I/12,2)),this.INFLATION_RESULTS)for(y=0;y<4;y++)this.DS_INFLATION_INCREASE[y]=.03*y+l/100,3==y&&(this.DS_INFLATION_INCREASE[y]=.03*(y+1)+l/100),this.DS_INFLATION_RUNOUT[y]=this.getRunoutAge(i,E,o/100,a,g,T/100,this.DS_INFLATION_INCREASE[y],K,this.INCOME_PERCENT/100,_,l/100,N,S,R,110,!0),this.CS_INFLATION_RUNOUT[y]=t.percent(this.DS_INFLATION_INCREASE[y]);if(this.SAVEMORE_RESULTS)for(y=0;y<5;y++)this.DS_SAVEMORE_INCREASE[y]=.04*y+T/100,this.DS_SAVEMORE_RUNOUT[y]=this.getRunoutAge(i,E,o/100,a,g,this.DS_SAVEMORE_INCREASE[y],l/100,K,this.INCOME_PERCENT/100,_,l/100,N,S,R,110,!0),this.CS_SAVEMORE_RUNOUT[y]=t.percent(this.DS_SAVEMORE_INCREASE[y]);if(e){var U=this.sSchedule;U.clearRepeat();var B=_||this.OTHER_PENSION_COUNT>0?U.sReportCol(M?"Pension Income<br />OAS/CPP<br />or QPP":"NZ<br />Superannuation<br />Income",5):null;B&&!_&&(B=B.replace("\x3c!--STARTHIDETAXES--\x3e","\x3c!--").replace("\x3c!--ENDHIDETAXES--\x3e","--\x3e")),this.SHORT_RESULTS?U.addHeader(U.sReportCol("Age",9),U.sReportCol("Interest<br /> and<br /> Savings",8),U.sReportCol("Retirement<br />Account<br />Withdrawals",6),U.sReportCol("Ending<br />Retirement<br />Balance",7)):U.addHeader(U.sReportCol("Age",9),U.sReportCol("Beginning<br />Retirement<br />Balance",1),U.sReportCol(" <br />Investment<br />Growth",2),this.NEST_EGG?null:this.INCREASE_ANNUAL_SAVINGS?KJE.replace("CALC_RESULT",t.percent(T/100,2),U.sReportCol("Contributions<br />at CALC_RESULT<br />of Income",3)):KJE.replace("CALC_RESULT",t.percent(T/100,2),U.sReportCol("<br /><br />Contributions",10)),KJE.replace("CALC_RESULT",t.percent(this.INCOME_PERCENT/100,0),U.sReportCol("Retire<br />with CALC_RESULT<br />of Income",4)),B,this.USE_NET_INCOME?U.sReportCol("Estimated<br />Retirement<br />Taxes",8):null,U.sReportCol("Retirement<br />Account<br />Withdrawals",6),U.sReportCol("Ending<br />Retirement<br />Balance",7))}if(_)for(this.DS_RETIRE1=KJE.FloatArray(3),this.cats2=new Array(3),D=0;D<this.DS_RETIRE1.length;D++)this.DS_RETIRE1[D]=this.DD_RETIRE1[D],this.cats2[D]=this.CAT_LABELS[D]+" "+t.dollars(this.DD_RETIRE1[D]);else for(this.DS_RETIRE1=KJE.FloatArray(2),this.cats2=new Array(2),this.cats2[0]=this.CAT_LABELS[0]+" "+t.dollars(this.DD_RETIRE1[0]),this.cats2[1]=this.CAT_LABELS[2]+" "+t.dollars(this.DD_RETIRE1[2]),D=0;D<this.DS_RETIRE1.length;D++)this.DS_RETIRE1[D]=this.DD_RETIRE1[D+1];for(y=1;y<=O;y++)m=y-1,this.cats[m]=t.number(y+i),this.DR_ENDING_BALANCE[m]<0&&(this.DR_ENDING_BALANCE[m]=0,this.DR_RETIREMENT_WITHDRAWAL[m]=0),e&&(this.SHORT_RESULTS?U.addRepeat(t.number(y+i,0),t.dollars(this.DR_INTEREST[m]+this.DR_SAVINGS[m],this.iDecimals),t.dollars(this.DR_RETIREMENT_WITHDRAWAL[m],this.iDecimals),t.dollars(this.DR_ENDING_BALANCE[m],this.iDecimals)):U.addRepeat(t.number(y+i,0),t.dollars(this.DR_BEGINING_BALANCE[m],this.iDecimals),t.dollars(this.DR_INTEREST[m],this.iDecimals),this.NEST_EGG?null:t.dollars(this.DR_SAVINGS[m],this.iDecimals),t.dollars(this.DR_RETIREMENT_INCOME[m],this.iDecimals),_||this.OTHER_PENSION_COUNT>0?t.dollars(this.DR_SOCIAL_SECURITY_INCOME[m],this.iDecimals):null,this.USE_NET_INCOME?t.dollars(this.DR_RETIREMENT_TAXES[m],this.iDecimals):null,t.dollars(this.DR_RETIREMENT_WITHDRAWAL[m],this.iDecimals),t.dollars(this.DR_ENDING_BALANCE[m],this.iDecimals))),this.DR_RETIREMENT_WITHDRAWAL[m]<0&&(this.DR_RETIREMENT_WITHDRAWAL[m]=0);(this.MSG_START_OF_MESSAGE="")?this.START_OF_MESSAGE="":(this.START_OF_MESSAGE=KJE.replace("NEED_AT_RETIRE_AFSS",t.dollars(this.DD_RETIRE1[1],0),this.MSG_START_OF_MESSAGE),this.START_OF_MESSAGE=KJE.replace("NEED_THRU_RETIRE_AFSS",t.dollars(this.DD_RETIRE2[1],0),this.START_OF_MESSAGE)+" "),this.SOCIAL_SECURITY_PERCENT=0,this.SOCIAL_SECURITY_SALARY=0,this.ENDING_BALANCE=w,this.ANNUAL_SAVINGS=f,this.MONTHLY_SAVINGS=L,this.INCOME_AT_RETIRE=p,this.INCOME_AT_RETIRE_NET=u,this.INCOME_REQUIRED_AT_RETIRE=d,this.INCOME_REQUIRED_AT_RETIRE_NET=c,this.SOCIALSECURITY_AT_RETIRE=R,this.SOCIALSECURITY_START_AGE=S,this.BALANCE_AT_RETIRE=J,this.ADJUST_ANNUAL_SAVINGS=I,this.ADJUST_MONTHLY_SAVINGS=A},KJE.RetirementPlanCalc.prototype.formatReport=function(e){var t=KJE,i=this.iDecimal,a=e;a=KJE.replace("END_OF_RETIREMENT_MESSAGE",this.END_OF_RETIREMENT_MESSAGE,a);var r=0;for(r=0;r<this.OTHER_PENSION_START.length;r++)a=KJE.replace("OTHER_PENSION_START"+(r+1),t.number(this.OTHER_PENSION_START[r]>this.AGE_OF_RETIREMENT?this.OTHER_PENSION_START[r]:this.AGE_OF_RETIREMENT),a),a=KJE.replace("OTHER_PENSION_AMOUNT"+(r+1),t.dollars(this.OTHER_PENSION_AMOUNT_ADJUSTED[r],i),a),a=KJE.replace("OTHER_PENSION_INFLATION"+(r+1),this.OTHER_PENSION_INFLATION[r]?this.MSG_INFLATION_REPORT:"",a),a=KJE.replace("OTHER_PENSION_LASTS"+(r+1),t.number(this.OTHER_PENSION_LASTS[r]),a);if(this.INFLATION_RESULTS)for(r=0;r<4;r++)a=KJE.replace("INFLATION_INCREASE"+r,t.percent(this.DS_INFLATION_INCREASE[r],2),a),a=this.DS_INFLATION_RUNOUT[r]<110?KJE.replace("INFLATION_MSG"+r,KJE.replace("KJE1",t.number(this.DS_INFLATION_RUNOUT[r],this.MSG_RUNOUT_REPORT),a)):KJE.replace("INFLATION_MSG"+r,this.MSG_SUCCESS_REPORT,a);if(this.SAVEMORE_RESULTS)for(r=0;r<5;r++)a=KJE.replace("SAVEMORE_INCREASE"+r,t.percent(this.DS_SAVEMORE_INCREASE[r],2),a),a=this.DS_SAVEMORE_RUNOUT[r]<110?KJE.replace("SAVEMORE_MSG"+r,this.MSG_RUNOUT_REPORT+" "+t.number(this.DS_SAVEMORE_RUNOUT[r]),a):KJE.replace("SAVEMORE_MSG"+r,this.MSG_SUCCESS_REPORT,a);return 0!=this.ENDING_BALANCE||this.bATRETIREMENT||this.CURRENT_AGE==this.AGE_OF_RETIREMENT-1?(a=KJE.replace("\x3c!--ADJUST_ADVICE--\x3e","\x3c!--",a),a=KJE.replace("\x3c!--/ADJUST_ADVICE--\x3e","--\x3e",a),a=KJE.replace("<ADJUST_ADVICE>","\x3c!--",a),a=KJE.replace("<ADJUST_ADVICE>","--\x3e",a)):(a=KJE.replace("\x3c!--ADJUST_ADVICE--\x3e","",a),a=KJE.replace("\x3c!--/ADJUST_ADVICE--\x3e","",a),a=KJE.replace("<ADJUST_ADVICE>","",a),a=KJE.replace("<ADJUST_ADVICE>","",a),a=KJE.replace("ADJUST_SAVINGS_RATE",t.percent(this.dAdjustedSavingsRate,2),a),a=KJE.replace("ADJUST_ROR",t.percent(this.dAdjustedRorRate,2),a),a=KJE.replace("ADJUST_INCOME_REQUIRED",t.percent(this.dAdjustedSalaryPercent),a),a=KJE.replace("ADJUST_YEARS",t.number(this.dAdjusteYearsToRetirement),a)),a=KJE.replace("ADJUST_ANNUAL_SAVINGS",t.dollars(this.ADJUST_ANNUAL_SAVINGS,2),a),a=KJE.replace("ADJUST_MONTHLY_SAVINGS",t.dollars(this.ADJUST_MONTHLY_SAVINGS,2),a),a=KJE.replace("INCREASE_ANNUAL_SAVINGS",this.INCREASE_ANNUAL_SAVINGS?"will":"does not",a),a=KJE.replace("CURRENT_AGE",t.number(this.CURRENT_AGE+(this.bATRETIREMENT?1:0)),a),a=KJE.replace("HOUSEHOLD_INCOME",t.dollars(this.HOUSEHOLD_INCOME,i),a),a=KJE.replace("PRE_RATE_OF_RETURN",t.percent(this.PRE_RATE_OF_RETURN/100,2),a),a=KJE.replace("AGE_OF_RETIREMENT",t.number(this.AGE_OF_RETIREMENT),a),a=KJE.replace("POST_RATE_OF_RETURN",t.percent(this.POST_RATE_OF_RETURN/100,2),a),a=KJE.replace("SALARY_PERCENT",t.percent(this.SALARY_PERCENT/100,2),a),a=KJE.replace("YEARS_UNTIL_RETIREMENT",t.number(this.YEARS_UNTIL_RETIREMENT),a),a=KJE.replace("YEARS_OF_RETIREMENT",t.number(this.YEARS_OF_RETIREMENT),a),a=KJE.replace("INCOME_PERCENT",t.percent(this.INCOME_PERCENT/100,2),a),a=KJE.replace("CURRENT_SAVINGS",t.dollars(this.CURRENT_SAVINGS,i),a),a=KJE.replace("INFLATION_RATE",t.percent(this.INFLATION_RATE/100,1),a),this.INCLUDE_SOCIAL_SECURITY?(a=KJE.replace("SOCIAL_SECURITY_MSG",this.MSG_SOCIAL_SECURITY,a),a=KJE.replace("SOCIALSECURITY_AT_RETIRE",t.dollars(this.SOCIALSECURITY_AT_RETIRE,i),a)):(a=KJE.replace("SOCIAL_SECURITY_MSG","",a),a=KJE.replace("SOCIALSECURITY_AT_RETIRE",t.dollars(0,i),a)),a=KJE.replace("RETIREMENT_TAX_WITHDRAWALS",t.yesno(this.RETIREMENT_TAX_WITHDRAWALS),a),a=KJE.replace("SOCIAL_SECURITY_TAX_WITHDRAWALS",t.yesno(this.SOCIAL_SECURITY_TAX_WITHDRAWALS),a),a=KJE.replace("INCLUDE_SOCIAL_SECURITY",t.yesno(this.INCLUDE_SOCIAL_SECURITY),a),a=KJE.replace("INCLUDE_SOCIAL_SECURITY",t.yesno(this.INCLUDE_SOCIAL_SECURITY),a),a=KJE.replace("CURRENT_TAX",t.percent(this.CURRENT_TAX/100),a),a=KJE.replace("RETIREMENT_TAX",t.percent(this.RETIREMENT_TAX/100),a),a=KJE.replace("MARRIED",t.yesno(this.MARRIED),a),a=KJE.replace("SOCIAL_SECURITY_PERCENT",t.percent(this.SOCIAL_SECURITY_PERCENT),a),a=KJE.replace("SOCIAL_SECURITY_SALARY",t.dollars(this.SOCIAL_SECURITY_SALARY,i),a),a=KJE.replace("PV_ENDING_BALANCE",t.dollars(KJE.NPV_AMT(this.INFLATION_RATE/100,Math.round(this.YEARS_UNTIL_RETIREMENT+this.YEARS_OF_RETIREMENT),this.ENDING_BALANCE),i),a),a=KJE.replace("ENDING_BALANCE",t.dollars(this.ENDING_BALANCE,i),a),a=KJE.replace("SAVINGS_PERCENT",t.percent(this.SAVINGS_PERCENT/100,2),a),a=KJE.replace("ANNUAL_SAVINGS",t.dollars(this.ANNUAL_SAVINGS,i),a),a=KJE.replace("MONTHLY_SAVINGS",t.dollars(this.MONTHLY_SAVINGS,i),a),a=KJE.replace("INCOME_AT_RETIRE_NET",t.dollars(this.INCOME_AT_RETIRE_NET,i),a),a=KJE.replace("INCOME_AT_RETIRE",t.dollars(this.INCOME_AT_RETIRE,i),a),a=KJE.replace("INCOME_REQUIRED_AT_RETIRE_NET",t.dollars(this.INCOME_REQUIRED_AT_RETIRE_NET,i),a),a=KJE.replace("INCOME_REQUIRED_AT_RETIRE",t.dollars(this.INCOME_REQUIRED_AT_RETIRE,i),a),a=KJE.replace("SOCIALSECURITY_START_AGE",t.number(this.SOCIALSECURITY_START_AGE),a),a=KJE.replace("BALANCE_AT_RETIRE",t.dollars(this.BALANCE_AT_RETIRE,i),a),a=KJE.replace("RESULTS_MSG",this.RESULTS_MSG,a),a=KJE.replace("RESPONSE",this.RESPONSE,a),a=KJE.replace("AGE_RUN_OUT",t.number(this.AGE_RUN_OUT),a),a=KJE.replace("ENDING_BALANCE",t.dollars(this.ENDING_BALANCE),a),a=KJE.replace("NEED_AT_RETIRE_AFSS",t.dollars(this.DD_RETIRE1[1]),a),a=KJE.replace("NEED_AT_RETIRE_PLAN",t.dollars(this.DD_RETIRE1[2]),a),a=KJE.replace("NEED_AT_RETIRE",t.dollars(this.DD_RETIRE1[0]),a),a=KJE.replace("NEED_THRU_RETIRE_AFSS",t.dollars(this.DD_RETIRE2[1]),a),a=KJE.replace("NEED_THRU_RETIRE_PLAN",t.dollars(this.DD_RETIRE2[2]),a),a=(a=KJE.replace("NEED_THRU_RETIRE",t.dollars(this.DD_RETIRE2[0]),a)).replace("**REPEATING GROUP**",this.sSchedule.getRepeat()),this.sSchedule.clearRepeat(),a},KJE.RetirementPlanCalc.prototype.formatGraph=function(e,t){!this.NEST_EGG&&t[0]&&(t[0].setTitle(this.MSG_GRAPH_REPORT_TITLE),t[0].setTitleGraph(this.MSG_GRAPH_REPORT_TITLE),t[0].show(!0),t[0].paint())},KJE.RetirementPlanCalc.prototype.getRunoutAge=function(e,t,i,a,r,s,n,o,E,l,_,h,T,p,u,d){for(var c=t,R=0,S=0,I=0,A=0,g=0,K=0,J=0,N=0,C=0,f=a*s,L=this.USE_NET_INCOME,O=this.CURRENT_TAX/100,m=1;m<=u-e;m++){if(C=0,N=0,K=0,J=0,h-m>0)R=KJE.FV_AMT(i,m,a),S=c*r,I=this.INCREASE_ANNUAL_SAVINGS?R*s:f,A=0,g=R;else{S=c*o,I=0,A=(R=KJE.FV_AMT(n,m-h,g))*E*(1-(L?O:0)),m+e-T>=0&&l>0&&(K=KJE.FV_AMT(_,m+e-T,p),this.SOCIAL_SECURITY_TAX_WITHDRAWALS&&(C=K*(this.RETIREMENT_TAX/200)));for(var D=this.OTHER_PENSION_AMOUNT.length,y=0,M=0;M<D;M++)this.OTHER_PENSION_AMOUNT_ADJUSTED[M]>0&&(y=0==this.OTHER_PENSION_START[M]?m-h:m+e-this.OTHER_PENSION_START[M],(0==this.OTHER_PENSION_LASTS[M]||this.OTHER_PENSION_LASTS[M]>y)&&(this.OTHER_PENSION_INFLATION[M]?N+=KJE.FV_AMT(n,m,12*this.OTHER_PENSION_AMOUNT_ADJUSTED[M]):N+=12*this.OTHER_PENSION_AMOUNT_ADJUSTED[M]));if(this.RETIREMENT_TAX_WITHDRAWALS&&(C=N*(this.RETIREMENT_TAX/100)),J=A+C-K-N,L&&J>0&&this.RETIREMENT_TAX_WITHDRAWALS){var v=J/(1-this.RETIREMENT_TAX/100);C+=v-J,J=v}}if((c=c+S+I-J)<0){u=m+e;break}}return d?u:c},KJE.RetirementPlanCalc.prototype.getAdjustedSavingsRate=function(e,t,i){for(var a=200,r=a/2,s=0,n=1;n<50;n++){if((s=this.getRunoutAge(this.CURRENT_AGE,this.CURRENT_SAVINGS,this.SALARY_PERCENT/100,this.HOUSEHOLD_INCOME,t,a,this.INFLATION_RATE/100,i,this.INCOME_PERCENT/100,this.INCLUDE_SOCIAL_SECURITY,this.INFLATION_RATE/100,this.YEARS_UNTIL_RETIREMENT,this.SOCIALSECURITY_START_AGE,this.SOCIALSECURITY_AT_RETIRE,e,!1))>0&&s<1)return KJE.round(a+5e-8,7);s<=0?a+=r:a-=r,r/=2}return KJE.round(a+5e-8,7)},KJE.RetirementPlanCalc.prototype.getAdjustedRorRate=function(e,t,i){for(var a=t,r=.5,s=0,n=KJE,o=1;o<50;o++){if((s=this.getRunoutAge(this.CURRENT_AGE,this.CURRENT_SAVINGS,this.SALARY_PERCENT/100,this.HOUSEHOLD_INCOME,a,this.SAVINGS_PERCENT/100,this.INFLATION_RATE/100,i,this.INCOME_PERCENT/100,this.INCLUDE_SOCIAL_SECURITY,this.INFLATION_RATE/100,this.YEARS_UNTIL_RETIREMENT,this.SOCIALSECURITY_START_AGE,this.SOCIALSECURITY_AT_RETIRE,e,!1))>0&&s<1)return n.round(a+5e-5,4);s<=0?a+=r:a-=r,r/=2}return n.round(a+5e-5,4)},KJE.RetirementPlanCalc.prototype.getAdjustedSalaryPercent=function(e,t,i){for(var a=this.INCOME_PERCENT/100,r=.5,s=0,n=KJE,o=1;o<50;o++){if((s=this.getRunoutAge(this.CURRENT_AGE,this.CURRENT_SAVINGS,this.SALARY_PERCENT/100,this.HOUSEHOLD_INCOME,t,this.SAVINGS_PERCENT/100,this.INFLATION_RATE/100,i,a,this.INCLUDE_SOCIAL_SECURITY,this.INFLATION_RATE/100,this.YEARS_UNTIL_RETIREMENT,this.SOCIALSECURITY_START_AGE,this.SOCIALSECURITY_AT_RETIRE,e,!1))>0&&s<1)return n.round(a-.005,2);s<=0?a-=r:a+=r,r/=2}return n.round(a-.005,4)},KJE.RetirementPlanCalc.prototype.getAdjustedYearsToRetirement=function(e,t,i){if(this.INCLUDE_SOCIAL_SECURITY)var a=new KJE.SocialSecurityCalc;for(var r=1;r<50;r++){var s=0,n=0;if(this.INCLUDE_SOCIAL_SECURITY&&(a.clear(),a.CURRENT_AGE=this.CURRENT_AGE>69?69:this.CURRENT_AGE,a.HOUSEHOLD_INCOME=this.HOUSEHOLD_INCOME,a.AGE_OF_RETIREMENT=this.CURRENT_AGE+this.YEARS_UNTIL_RETIREMENT+r>70?70:this.CURRENT_AGE+this.YEARS_UNTIL_RETIREMENT+r,a.SALARY_PERCENT=this.SALARY_PERCENT,a.SOCIAL_SECURITY_INCREASE_RATE=this.INFLATION_RATE,a.MARRIED=this.MARRIED,a.calculate(),n=a.SOCIAL_AT_RETIRE_AMT,s=a.SOCIAL_AT_RETIRE_AGE),this.getRunoutAge(this.CURRENT_AGE,this.CURRENT_SAVINGS,this.SALARY_PERCENT/100,this.HOUSEHOLD_INCOME,t,this.SAVINGS_PERCENT/100,this.INFLATION_RATE/100,i,this.INCOME_PERCENT/100,this.INCLUDE_SOCIAL_SECURITY,this.INFLATION_RATE/100,this.YEARS_UNTIL_RETIREMENT+r,s,n,e+r,!1)>0)return this.YEARS_UNTIL_RETIREMENT+r}return this.YEARS_UNTIL_RETIREMENT+50},KJE.RetirementPlanCalc.prototype.getGraphTitle=function(e){var t="";return this.NEST_EGG?t=KJE.getKJEReplaced(this.MSG_GRAPH_TITLE,KJE.dollars(this.ADJUST_MONTHLY_SAVINGS)):"EN"!=KJE.lang?t=this.MSG_GRAPH_REPORT_TITLE:(t=(""==this.MSG_RESULT_EXTRA_GRAPH?this.ENDING_BALANCE>0?this.MSG_SUCCESS:this.MSG_RUNOUT:this.MSG_RESULT_EXTRA_GRAPH)+"<div class='KJESubTitle KJELeft'>"+this.MSG_RESULT_EXTRA+this.MSG_RESULT+(this.SHOW_SOCIAL?" "+this.MSG_RESULT_SOCIAL:"")+"</div>",e&&(t=KJE.replace("AGE_RUN_OUT",KJE.number(this.AGE_RUN_OUT),t),t=KJE.replace("ENDING_BALANCE",KJE.dollars(this.ENDING_BALANCE),t),t=KJE.replace("NEED_AT_RETIRE_AFSS",KJE.dollars(this.DD_RETIRE1[1]),t),t=KJE.replace("NEED_THRU_RETIRE_AFSS",KJE.dollars(this.DD_RETIRE2[1]),t),t=KJE.getKJEReplaced(t,KJE.dollars(this.BALANCE_AT_RETIRE),KJE.dollars(this.INCOME_REQUIRED_AT_RETIRE),KJE.percent(this.INCOME_PERCENT/100),KJE.dollars(this.INCOME_AT_RETIRE),this.SHOW_SOCIAL?KJE.dollars(this.SOCIALSECURITY_AT_RETIRE):""))),t},KJE.CalcName="Retirement Planner",KJE.CalcType="retirementplan",KJE.CalculatorTitleTemplate="KJE1",KJE.gHeight=300,KJE.initialize=function(){KJE.CalcControl=new KJE.RetirementPlanCalc,KJE.GuiControl=new KJE.RetirementPlan(KJE.CalcControl)},KJE.RetirementPlan=function(e){KJE.inputs.items;KJE.NumberSlider("CURRENT_AGE","Current age",14,90,0),KJE.DollarSlider("HOUSEHOLD_INCOME","Your annual income (pre-tax)",1,1e6),KJE.InvestRateSlider("PRE_RATE_OF_RETURN","Expected rate of return before retirement"),KJE.NumberSlider("AGE_OF_RETIREMENT","Age you plan to retire",10,90,0,1),KJE.InvestRateSlider("POST_RATE_OF_RETURN","Expected rate of return during retirement"),KJE.PercentSlider("SALARY_PERCENT","Expected annual pay rise",0,KJE.parameters.get("MAX_SALARY_PERCENT",20),2,1),KJE.NumberSlider("YEARS_OF_RETIREMENT","Expected years of retirement income",1,60,0,1),KJE.PercentSlider("INCOME_PERCENT","Percentage of current income you want during retirement",KJE.parameters.get("MIN_INCOME_PERCENT",25),KJE.parameters.get("MAX_INCOME_PERCENT",100),0,5),KJE.DollarSlider("CURRENT_SAVINGS","Current KiwiSaver balance",0,1e6,0,1,5),KJE.PercentSlider("SAVINGS_PERCENT","Total KiwiSaver contribution (including your employerâ€™s)",0,100,2,1),KJE.InflationRateSlider("INFLATION_RATE","Expected rate of inflation"),KJE.Checkbox("MARRIED","Married",!1,""),KJE.Checkbox("INCLUDE_SOCIAL_SECURITY","Include NZ Superannuation",!0,""),KJE.DollarSlider("OTHER_PENSION_AMOUNT1","Misc. income / pensions",KJE.parameters.get("OTHER_PENSION_AMT1_MIN",0),KJE.parameters.get("OTHER_PENSION_AMT1_MAX",1e4)),KJE.DollarSlider("OTHER_PENSION_AMOUNT2","Retirement work income",KJE.parameters.get("OTHER_PENSION_AMT2_MIN",0),KJE.parameters.get("OTHER_PENSION_AMT2_MAX",1e4)),KJE.DollarSlider("OTHER_PENSION_AMOUNT3","Additional retirement income",KJE.parameters.get("OTHER_PENSION_AMT3_MIN",0),KJE.parameters.get("OTHER_PENSION_AMT3_MAX",1e4)),KJE.Checkbox("OTHER_PENSION_INFLATION1","Increase with inflation",!0,KJE.parameters.get("MSG_OTHER_PENSION_AMOUNT1","Misc. income / pensions")),KJE.Checkbox("OTHER_PENSION_INFLATION2","Increase with inflation",!0,KJE.parameters.get("MSG_OTHER_PENSION_AMOUNT2","Retirement work income")),KJE.Checkbox("OTHER_PENSION_INFLATION3","Increase with inflation",!0,KJE.parameters.get("MSG_OTHER_PENSION_AMOUNT3","Additional retirement income")),KJE.PercentSlider("CURRENT_TAX","Current tax rate",0,50,2),KJE.PercentSlider("RETIREMENT_TAX","Retirement tax rate",0,50,2),KJE.Checkbox("RETIREMENT_TAX_WITHDRAWALS","Tax retirement income",!1,"Check here"),KJE.Checkbox("SOCIAL_SECURITY_TAX_WITHDRAWALS","Tax 1/2 Social Security",!1,"Check here"),this.USE_OTHER_PENSION_START1=KJE.parameters.get("SHOW_PENSION_START1",!1),this.USE_OTHER_PENSION_START2=KJE.parameters.get("SHOW_PENSION_START2",!1),this.USE_OTHER_PENSION_START3=KJE.parameters.get("SHOW_PENSION_START3",!1),this.USE_OTHER_PENSION_START1&&KJE.NumberSlider("OTHER_PENSION_START1","Misc. income / pensions starts",KJE.parameters.get("OTHER_PENSION_START1_MIN",14),KJE.parameters.get("OTHER_PENSION_START1_MAX",90),0),this.USE_OTHER_PENSION_START2&&KJE.NumberSlider("OTHER_PENSION_START2","Retirement work income starts",KJE.parameters.get("OTHER_PENSION_START2_MIN",14),KJE.parameters.get("OTHER_PENSION_START2_MAX",90),0),this.USE_OTHER_PENSION_START3&&KJE.NumberSlider("OTHER_PENSION_START3","Additional retirement income starts",KJE.parameters.get("OTHER_PENSION_START3_MIN",14),KJE.parameters.get("OTHER_PENSION_START3_MAX",90),0),this.USE_PENSION_LASTS1=KJE.parameters.get("SHOW_PENSION_YEAR1",!1),this.USE_PENSION_LASTS2=KJE.parameters.get("SHOW_PENSION_YEAR2",!1),this.USE_PENSION_LASTS1&&KJE.NumberSlider("OTHER_PENSION_LASTS1","Years to work",0,30,0,1),this.USE_PENSION_LASTS2&&KJE.NumberSlider("OTHER_PENSION_LASTS2","Years to work",0,30,0,1);var t=KJE.gNewGraph(e.NEST_EGG?KJE.gCATEGORIES:KJE.gLINE,"GRAPH1",!0,!1,KJE.colorList[1],e.getGraphTitle());t&&(t._titleXAxis.setText(KJE.parameters.get("MSG_GRAPH_1","")),t._axisX.setVisible(!e.NEST_EGG),t._axisY.setVisible(!0),t._legend._iOrientation=KJE.gLegend.BOTTOM,t._showItemLabel=!0,t._showItemLabelOnTop=!0,t._axisX._fSpacingPercent=.2);var i=KJE.parameters.get("MSG_DROPPER_TITLE","Retirement plan inputs:"),a=KJE.parameters.get("MSG_DROPPER_CLOSETITLE"," Retire at age KJE1 with KJE2 of current income");KJE.addDropper(new KJE.Dropper("INPUTS",!0,i,function(){return i+KJE.subText(KJE.getKJEReplaced(a,KJE.number(e.AGE_OF_RETIREMENT),KJE.percent(e.INCOME_PERCENT/100,3)),"KJECenter")}),KJE.colorList[0]);var r=KJE.parameters.get("MSG_DROPPER2_TITLE","Investment returns, inflation and NZ Superannuation:"),s=KJE.parameters.get("MSG_DROPPER2_CLOSETITLE","KJE1&nbsp;pre-retirement, KJE2&nbsp;in&nbsp;retirement, KJE3&nbsp;inflation, New&nbsp;Zealand&nbsp;government&nbsp;superannuation&nbsp;payments?&nbsp;KJE4");KJE.addDropper(new KJE.Dropper("INPUTS2",!1,r,function(){return r+KJE.subText(KJE.getKJEReplaced(s,KJE.percent(e.PRE_RATE_OF_RETURN/100,3),KJE.percent(e.POST_RATE_OF_RETURN/100,3),KJE.percent(e.INFLATION_RATE/100,3),e.INCLUDE_SOCIAL_SECURITY?KJE.MSG_YES:KJE.MSG_NO),"KJECenter")}),KJE.colorList[0]),this.DIV_RESULTS=document.getElementById("KJE-C-RESULTS"),KJE.addDiv("RESULTS",KJE.colorList[1])},KJE.RetirementPlan.clear=function(){this.DIV_RESULTS&&(this.DIV_RESULTS.innerHTML="")},KJE.RetirementPlan.prototype.setValues=function(e){var t=KJE.inputs.items;e.CURRENT_AGE=t.CURRENT_AGE.getValue(),e.HOUSEHOLD_INCOME=t.HOUSEHOLD_INCOME.getValue(),e.PRE_RATE_OF_RETURN=t.PRE_RATE_OF_RETURN.getValue(),e.AGE_OF_RETIREMENT=t.AGE_OF_RETIREMENT.getValue(),e.POST_RATE_OF_RETURN=t.POST_RATE_OF_RETURN.getValue(),e.SALARY_PERCENT=t.SALARY_PERCENT.getValue(),e.YEARS_OF_RETIREMENT=t.YEARS_OF_RETIREMENT.getValue(),e.INCOME_PERCENT=t.INCOME_PERCENT.getValue(),e.CURRENT_SAVINGS=t.CURRENT_SAVINGS.getValue(),e.INFLATION_RATE=t.INFLATION_RATE.getValue(),e.SAVINGS_PERCENT=t.SAVINGS_PERCENT.getValue(),e.INCLUDE_SOCIAL_SECURITY=t.INCLUDE_SOCIAL_SECURITY.getValue(),e.MARRIED=t.MARRIED.getValue(),e.CURRENT_TAX=t.CURRENT_TAX.getValue(),e.RETIREMENT_TAX=t.RETIREMENT_TAX.getValue(),e.OTHER_PENSION_AMOUNT[0]=t.OTHER_PENSION_AMOUNT1.getValue(),e.OTHER_PENSION_AMOUNT[1]=t.OTHER_PENSION_AMOUNT2.getValue(),e.OTHER_PENSION_AMOUNT[2]=t.OTHER_PENSION_AMOUNT3.getValue(),e.OTHER_PENSION_INFLATION[0]=t.OTHER_PENSION_INFLATION1.getValue(),e.OTHER_PENSION_INFLATION[1]=t.OTHER_PENSION_INFLATION2.getValue(),e.OTHER_PENSION_INFLATION[2]=t.OTHER_PENSION_INFLATION3.getValue(),e.RETIREMENT_TAX_WITHDRAWALS=t.RETIREMENT_TAX_WITHDRAWALS.getValue(),e.SOCIAL_SECURITY_TAX_WITHDRAWALS=t.SOCIAL_SECURITY_TAX_WITHDRAWALS.getValue(),this.USE_PENSION_LASTS1&&(e.OTHER_PENSION_LASTS[0]=t.OTHER_PENSION_LASTS1.getValue()),this.USE_PENSION_LASTS2&&(e.OTHER_PENSION_LASTS[1]=t.OTHER_PENSION_LASTS2.getValue()),this.USE_OTHER_PENSION_START1&&(e.OTHER_PENSION_START[0]=t.OTHER_PENSION_START1.getValue()),this.USE_OTHER_PENSION_START2&&(e.OTHER_PENSION_START[1]=t.OTHER_PENSION_START2.getValue()),this.USE_OTHER_PENSION_START3&&(e.OTHER_PENSION_START[2]=t.OTHER_PENSION_START3.getValue())},KJE.RetirementPlan.prototype.refresh=function(e){var t=KJE.gGraphs[0];KJE.setTitleTemplate(e.RESULTS_MSG),t&&(t.removeAll(),t.setTitle(e.getGraphTitle(!0)),e.NEST_EGG?(t.setGraphCategories(e.cats2),t.add(new KJE.gGraphDataSeries(e.DS_RETIRE1,e.sGraph2,t.getColor(1)))):(t.setGraphCategories(e.cats),t.add(new KJE.gGraphDataSeries(e.DR_ENDING_BALANCE,e.sGraph2,t.getColor(1))),t.add(new KJE.gGraphDataSeries(e.DR_RETIREMENT_WITHDRAWAL,e.sGraph3,t.getColor(2)))),t.paint()),this.DIV_RESULTS&&(this.DIV_RESULTS.innerHTML="<div style='margin-right:10px'>"+KJE.setToggleTitleText(e.getGraphTitle(!0),null,KJE)+"</div>")},KJE.InputScreenText=" <div id=KJE-D-INPUTS><div id=KJE-P-INPUTS>Input information:</div></div> <div id=KJE-E-INPUTS > <div id='KJE-C-CURRENT_AGE'><input id='KJE-CURRENT_AGE' /></div> <div id='KJE-C-AGE_OF_RETIREMENT'><input id='KJE-AGE_OF_RETIREMENT' /></div> <div id='KJE-C-HOUSEHOLD_INCOME'><input id='KJE-HOUSEHOLD_INCOME' /></div> <div id='KJE-C-SAVINGS_PERCENT'><input id='KJE-SAVINGS_PERCENT' /></div> <div id='KJE-C-CURRENT_SAVINGS'><input id='KJE-CURRENT_SAVINGS' /></div> <div id='KJE-C-SALARY_PERCENT'><input id='KJE-SALARY_PERCENT' /></div> <div id='KJE-C-INCOME_PERCENT'><input id='KJE-INCOME_PERCENT' /></div> <div id='KJE-C-YEARS_OF_RETIREMENT'><input id='KJE-YEARS_OF_RETIREMENT' /></div> <div style=\"height:10px\"></div> </div> <div id=KJE-D-INPUTS2><div id=KJE-P-INPUTS2>Input information:</div></div> <div id=KJE-E-INPUTS2 > <div id='KJE-C-PRE_RATE_OF_RETURN'><input id='KJE-PRE_RATE_OF_RETURN' /></div> <div id='KJE-C-POST_RATE_OF_RETURN'><input id='KJE-POST_RATE_OF_RETURN' /></div> <div id='KJE-C-INFLATION_RATE'><input id='KJE-INFLATION_RATE' /></div> \x3c!--<div id='KJE-C-MARRIED'><input id='KJE-MARRIED' type=checkbox /></div>--\x3e <div id='KJE-C-INCLUDE_SOCIAL_SECURITY'><input id='KJE-INCLUDE_SOCIAL_SECURITY' type=checkbox /></div> <div style=\"height:10px\"></div> </div> **GRAPH1** ",KJE.DefinitionText=" <div id='KJE-D-CURRENT_AGE' ><dt>Current age</dt><dd>Your current age.</dd></div> <div id='KJE-D-AGE_OF_RETIREMENT' ><dt>Age you plan to retire</dt><dd>Our calculator assumes that you will no longer make any retirement saving contributions to KiwiSaver after you reach the retirement age. So, if you retire at 65 years of age, your last retirement contribution will be made at age 64. While in practice you will contribute every payday with KiwiSaver, our calculator assumes that you contribute once, annually, at the end of each year. The difference is minimal, and our calculator is more conservative as a result as it does not include any compounding gains made within one year.</dd></div> <div id='KJE-D-HOUSEHOLD_INCOME' ><dt>Your annual income (pre-tax)</dt><dd>Your total income, pre-tax, paid by your employer or your business. Do not include income from other sources, such as investment properties, shares or managed funds.</dd></div> <div id='KJE-D-CURRENT_SAVINGS' ><dt>Current KiwiSaver balance</dt><dd>This is your current KiwiSaver balance as it appears today, or as recent as you know.</dd></div> <div id='KJE-D-PRE_RATE_OF_RETURN' ><dt>Expected rate of return before retirement</dt><dd>This is the annual rate of return you expect from your KiwiSaver performance, after tax and after fees. For example, the 10-year, pre-tax annual performance of leading KiwiSaver Conservative and Growth funds is around 5% and 7% respectively, as of December 2018. The actual rate of return on investments can vary widely over time, and there is a risk of your total investment losing value for a period in a global financial correction or crash. Since 1920 there have only been two crashes (1929 and 2018) but plenty of 20%+ corrections. **ROR_DEFINITION**</dd></div> <div id='KJE-D-POST_RATE_OF_RETURN' ><dt>Expected rate of return during retirement</dt><dd>This is the expected annual after-tax rate of return you expect from your KiwiSaver fund during retirement. This is likely to be a lower return than your expected rate of return before retirement because most New Zealanders switch to a conservative or cash fund option.<br><br>The actual rate of return is largely dependent on the types of investments you select. Most KiwiSaver cash funds have paid an average of between 2.50% to 3.00% after-tax in the 10 years to December 2018. Term deposits, i.e. leaving money in a bank account, currently pay around 2.00% to 4.00% depending on the length of the term, whereas on-call bank accounts pay between 0.00% to 0.25%.<br><br>All of the information above is historical or hypothetical and no guarantee of future returns. The actual rate of return on investments can vary widely over time, and there is a risk of your total investment losing value in a global financial crash.</dd></div> <div id='KJE-D-SAVINGS_PERCENT' ><dt>Total KiwiSaver contribution (including your employerâ€™s)</dt><dd>Your employer contributes 3% to your KiwiSaver. You either contribute, 3%, 4% or 8% of your before-tax pay. For example, if you contribute 3%, the total KiwiSaver contribution is 6% (3% from your employer and 3% from you).</dd></div> <div id='KJE-D-SALARY_PERCENT' ><dt>Expected annual pay rise</dt><dd>This is the percentage you expect your income to increase every year. As a baseline, throughout New Zealand, most salaries and wages go up between 2% and 4% per year. In 2018, Stats NZ reported hourly earnings increased 2.9 percent for wage and salary workers.</dd></div> <div id='KJE-D-YEARS_OF_RETIREMENT' ><dt>Expected years of retirement income</dt><dd>This is the total number of years you expect to use your retirement income. For example, if you plan to retire at 65 and live until you are 90, that is 25 years.</dd></div> <div id='KJE-D-INCOME_PERCENT' ><dt>Percentage of current income you want during retirement</dt><dd>This is the percentage of your pre-retirement household income you think you will need in retirement. For example, if you currently earn $60,000 per year and would like a retirement income of $30,000 (excluding government superannuation payments), then the percentage is 50%. If you earn $100,000 and want a retirement income of $75,000, then the percentage is 75%. This amount is based on your income earned during the year immediately before your retirement, and it will increase every year to your expected retirement age if you have inserted a percentage into the expected annual pay rise (above).</dd></div> <div id='KJE-D-INFLATION_RATE' ><dt>Expected rate of inflation</dt><dd>**INFLATION_DEFINITION** \x3c!--STARTHIDETAXES--\x3e</dd></div>\x3c!-- <div id='KJE-D-MARRIED' ><dt>Married checkbox</dt><dd>Check this box if you are married. Married couples have a higher maximum Social Security benefit than single wage earners.</dd></div>--\x3e <div id='KJE-D-INCLUDE_SOCIAL_SECURITY' ><dt>NZ Superannuation payments</dt><dd>Check this box if you wish to include NZ Superannuation payments in your retirement planning. The New Zealand government automatically increases the superannuation payments each year based on increases in the Consumer Price Index. </dd></div> ",KJE.ReportText=' <h2 class=\'KJEReportHeader KJEFontHeading\'>RESULTS_MSG</h2> <p>END_OF_RETIREMENT_MESSAGE RESPONSE This assumes annual retirement expenses of INCOME_REQUIRED_AT_RETIRE which is INCOME_PERCENT of your last year\'s income of INCOME_AT_RETIRE. SOCIAL_SECURITY_MSG <p>**GRAPH** \x3c!--ADJUST_ADVICE--\x3e <h2 class=\'KJEReportHeader KJEFontHeading\'>To help meet your goal, you may wish to do one of the following:</h2> <UL> <li>Increase contributions to ADJUST_SAVINGS_RATE of your income (ADJUST_ANNUAL_SAVINGS annual savings, which INCREASE_ANNUAL_SAVINGS increase as your income increases) <li>Increase your rate of return before retirement to ADJUST_ROR. <li>Reduce your required income in retirement to ADJUST_INCOME_REQUIRED of your final year\'s income. <li>Delay your retirement until age ADJUST_YEARS. </UL> \x3c!--/ADJUST_ADVICE--\x3e <div class=KJEReportTableDiv><table class=KJEReportTable><caption class=\'KJEHeaderRow KJEHeading\'>Retirement Plan Inputs</caption> <tr class=KJEOddRow><th class="KJELabel KJECellBorder KJECell50">Current age</th><td class="KJECell KJECell50">CURRENT_AGE</td></tr> <tr class=KJEEvenRow><th class="KJELabel KJECellBorder">Age you plan to retire</th><td class="KJECell">AGE_OF_RETIREMENT</td></tr> <tr class=KJEOddRow><th class="KJELabel KJECellBorder">Your annual income (pre-tax)</th><td class="KJECell">HOUSEHOLD_INCOME</td></tr> <tr class=KJEEvenRow><th class="KJELabel KJECellBorder r">Current KiwiSaver balance</th><td class="KJECell">CURRENT_SAVINGS</td></tr> <tr class=KJEOddRow><th class="KJELabel KJECellBorder">Total KiwiSaver contribution (including your employerâ€™s)</th><td class="KJECell">SAVINGS_PERCENT (ANNUAL_SAVINGS annually which INCREASE_ANNUAL_SAVINGS increase as your income increases)</td></tr> <tr class=KJEEvenRow><th class="KJELabel KJECellBorder">Expected annual pay rise</th><td class="KJECell">SALARY_PERCENT</td></tr> <tr class=KJEOddRow><th class="KJELabel KJECellBorder">Expected years of retirement income</th><td class="KJECell">YEARS_OF_RETIREMENT</td></tr> <tr class=KJEEvenRow><th class="KJELabel KJECellBorder">Percentage of current income you want during retirement</th><td class="KJECell">INCOME_PERCENT</td></tr> \x3c!--STARTHIDETAXES--\x3e <tr class=KJEHeaderRow><th class=KJEHeading colspan=4>Investment Returns and Inflation</th></tr> <tr class=KJEOddRow><th class="KJELabel KJECellBorder">Expected rate of return before retirement</th><td class="KJECell">PRE_RATE_OF_RETURN</td></tr> <tr class=KJEEvenRow><th class="KJELabel KJECellBorder">Expected rate of return during retirement</th><td class="KJECell">POST_RATE_OF_RETURN</td></tr> <tr class=KJEOddRow><th class="KJELabel KJECellBorder">Expected inflation rate</th><td class="KJECell">INFLATION_RATE</td></tr> \x3c!--<tr class=KJEEvenRow><th class="KJELabel KJECellBorder">Are you married?</th><td class="KJECell">MARRIED</td></tr>--\x3e <tr class=KJEEvenRow><th class="KJELabel KJECellBorder">Include  NZ Superannuation?</th><td class="KJECell">INCLUDE_SOCIAL_SECURITY</td></tr> \x3c!--ENDHIDETAXES--\x3e <tr class=KJEHeaderRow><th class=KJEHeading colspan=4>Result Summary</th></tr> <tr class=KJEOddRow><th class="KJELabel KJECellBorder">Years until retirement</th><td class="KJECell KJELabel">YEARS_UNTIL_RETIREMENT</td></tr> <tr class=KJEEvenRow><th class="KJELabel KJECellBorder">Your last year\'s income</th><td class="KJECell KJELabel">INCOME_AT_RETIRE</td></tr> <tr class=KJEOddRow><th class="KJELabel KJECellBorder">Estimated annual retirement expenditures</th><td class="KJECell KJELabel">INCOME_REQUIRED_AT_RETIRE</td></tr> <tr class=KJEEvenRow><th class="KJELabel KJECellBorder">Your ending balance</th><td class="KJECell KJELabel">ENDING_BALANCE</td></tr> </table> </div> <h2 class=\'KJEScheduleHeader KJEFontHeading\'>Balances by year*</h2> **REPEATING GROUP** <p class=KJEFooter>* This chart and table reflect expected annual rates of KiwiSaver balance growth, income growth and other factors. The chart and table act as a guide only. </p> ',KJE.parameters.set("CURRENT_AGE",25),KJE.parameters.set("AGE_OF_RETIREMENT",65),KJE.parameters.set("HOUSEHOLD_INCOME",5e4),KJE.parameters.set("CURRENT_SAVINGS",1e5),KJE.parameters.set("INFLATION_RATE",KJE.Default.InflationRate),KJE.parameters.set("POST_RATE_OF_RETURN",KJE.Default.RORRetire),KJE.parameters.set("PRE_RATE_OF_RETURN",KJE.Default.RORMarket),KJE.parameters.set("INCOME_PERCENT",90),KJE.parameters.set("SALARY_PERCENT",2),KJE.parameters.set("SAVINGS_PERCENT",6),KJE.parameters.set("YEARS_OF_RETIREMENT",35),KJE.parameters.set("INCLUDE_SOCIAL_SECURITY",!1),KJE.parameters.set("MARRIED",!1),mapCalcValues([["age","CURRENT_AGE"],["retage","AGE_OF_RETIREMENT"],["income","HOUSEHOLD_INCOME"],["sav","CURRENT_SAVINGS"],["prerate","PRE_RATE_OF_RETURN"],["postrate","POST_RATE_OF_RETURN"],["percontr","SAVINGS_PERCENT"],["sincr","SALARY_PERCENT"],["yrinc","YEARS_OF_RETIREMENT"],["perret","INCOME_PERCENT"],["infl","INFLATION_RATE"]]),KJE.IE7and8&&KJE.init();
